(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[344],{2575:function(e,t,a){"use strict";a.r(t);var n=a(476),r=a(497),c=a(477),s=a(16),o=a(0),i=a(1515),l=a(483),d=a(482),p=a(548),u=a(1525),j=a(1526),b=a(550),m=a(551),g=a(480),h=a(470),O=a(487),f=(a(58),a(474)),x=a(478),v=(a(601),a(472)),k=a(490),C=a.n(k),y=a(481),L=a.n(y),D=a(479),N=(a(534),a(500)),P=a(21),S=a(1581),B=a(1653),w=a(660),A=a(6),I=L()(C.a),T=function(e){var t=e.datapackList,a=e.TableDataLoading,n=e.refresh,r=e.setrefresh,c=Object(o.useState)(""),i=Object(s.a)(c,2),p=i[0],u=(i[1],Object(w.g)()),j=[{name:"Name",minWidth:"250px",sortable:!0,selector:"name"},{name:"Operator",minWidth:"100px",sortable:!0,selector:"operator"},{name:"Volume In MB",minWidth:"100px",sortable:!0,selector:"volumeInMB"},{name:"Pack Code",minWidth:"100px",sortable:!0,selector:"packcode"},{name:"Created By",minWidth:"150px",sortable:!0,selector:"createdBy"},{name:"Created At",minWidth:"250px",sortable:!0,selector:function(e){return e.createdAt?Object(D.b)(e.createdAt):null}},{name:"Action",minWidth:"100px",selector:function(e){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("span",{title:"Edit",children:Object(A.jsx)(S.a,{size:15,color:"teal",style:{cursor:"pointer"},onClick:function(t){u.push("/editDatapackList"),localStorage.setItem("datapackInfo",JSON.stringify(e))}})})," \xa0\xa0",Object(A.jsx)("span",{title:"Delete",children:Object(A.jsx)(B.a,{size:15,color:"red",style:{cursor:"pointer"},onClick:function(){return t=e.id,I.fire(Object(P.a)({title:"Do you want to Delete?",text:"Information will be delete when another user will approve this operation.",icon:"warning",allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,confirmButtonText:"Yes",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"},showLoaderOnConfirm:!0,preConfirm:function(){return x.a.datapackDelete({id:parseInt(t)}).then((function(e){console.log(e),Object(v.c)(e),r(!n)})).catch((function(e){Object(v.a)(e),console.log(e)}))},buttonsStyling:!1},"allowOutsideClick",(function(){return!C.a.isLoading()}))).then((function(e){e.isConfirmed}));var t}})})]})}}];return Object(A.jsxs)(l.a,{children:[Object(A.jsxs)(d.a,{children:[Object(A.jsx)(g.a,{}),Object(A.jsx)(h.a.Ripple,{className:"ml-1 text-dark",color:"light",onClick:function(e){Object(D.a)(t,Object.keys(t[0]),"Datapack List")},children:"Export CSV"})]}),Object(A.jsx)(N.a,{column:j,TableData:p.length?filteredData:t,TableDataLoading:a})]})},W=function(e){var t=e.datapackList,a=e.TableDataLoading,n=(e.refresh,e.setrefresh,[{name:"Name",minWidth:"250px",sortable:!0,selector:"name"},{name:"Operator",minWidth:"100px",sortable:!0,selector:"operator"},{name:"Volume In MB",minWidth:"100px",sortable:!0,selector:"volumeInMB"},{name:"Pack Code",minWidth:"100px",sortable:!0,selector:"packcode"},{name:"Operation",minWidth:"150px",sortable:!0,selector:"action"},{name:"Created By",minWidth:"150px",sortable:!0,selector:"createdBy"},{name:"Created At",minWidth:"250px",sortable:!0,selector:function(e){return e.createdAt?Object(D.b)(e.createdAt):null}}]);return Object(A.jsx)(o.Fragment,{children:Object(A.jsx)(N.a,{column:n,TableData:t,TableDataLoading:a})})},_=a(1550),R=a(1672),H=(a(528),a(533)),M=a(536),z=a(531),E=a(484),F=a(485),J=a(486),V=a(555),K=a(502),U=function(e){var t=e.modal,a=e.toggleModal,n=e.datapackListInfo,c=e.setRefresh,i=e.refresh,p=e.action,u=Object(o.useState)([]),j=Object(s.a)(u,2),b=j[0],m=j[1],O=Object(o.useState)(!1),f=Object(s.a)(O,2),k=f[0],C=f[1],y=Object(o.useState)([]),L=Object(s.a)(y,2),N=L[0],P=L[1];console.log(N),Object(o.useEffect)((function(){n.id&&x.a.datapackListApprovalById(n.id).then((function(e){console.log(e);var t,a=[],n=Object(r.a)(e.data.payload.module_data.roles);try{var c=function(){var n=t.value,r=e.data.payload.approved.find((function(e){return e.role_id===n.role_id}));r?a.push({role_id:n.role_name,approved_by:r.approved_by,approved_at:r.approved_at}):a.push({role_id:n.role_name,approved_by:"--",approved_at:""})};for(n.s();!(t=n.n()).done;)c()}catch(s){n.e(s)}finally{n.f()}m(a)})).catch((function(e){console.log(e),Object(v.a)(e)}))}),[n.id]);return Object(A.jsxs)(H.a,{size:"xl",isOpen:t,toggle:a,style:1===p?{border:"2px solid green"}:2===p?{border:"2px solid red"}:{},children:[Object(A.jsx)(M.a,{toggle:a,children:1===p?"Approve Datapack List":2===p?"Reject Datapack List":"Datapack List Details"}),Object(A.jsxs)(z.a,{children:[Object(A.jsx)(E.a,{children:Object(A.jsx)(F.a,{sm:"12",children:Object(A.jsxs)(l.a,{children:[Object(A.jsx)(d.a,{children:Object(A.jsx)(g.a,{children:"Approval Entry"})}),Object(A.jsx)(J.a,{children:Object(A.jsx)(E.a,{children:Object(A.jsx)(F.a,{sm:"12",children:Object(A.jsxs)(V.a,{children:[Object(A.jsxs)("tr",{children:[Object(A.jsx)("th",{children:"Role Id"}),Object(A.jsx)("th",{children:"Approved By"}),Object(A.jsx)("th",{children:"Approved At"})]}),0!==(null===b||void 0===b?void 0:b.length)?null===b||void 0===b?void 0:b.map((function(e,t){return Object(A.jsxs)("tr",{children:[Object(A.jsx)("td",{children:e.role_id}),Object(A.jsx)("td",{children:e.approved_by}),Object(A.jsx)("td",{children:e.approved_at?Object(D.b)(e.approved_at||""):"--"})]},t)})):Object(A.jsx)(K.a,{className:"text-center"})]})})})})]})})}),Object(A.jsx)(E.a,{children:Object(A.jsx)(F.a,{sm:"12",className:"text-center",children:k?Object(A.jsxs)(h.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(A.jsx)(K.a,{color:"white",size:"sm"}),Object(A.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(A.jsx)(h.a.Ripple,{className:"ml-2",color:"primary",onClick:function(){C(!0),x.a.datapackListApprove({id:n.id,action_id:p}).then((function(e){c(!i),Object(v.c)(e),C(!1),a(),console.log(e)})).catch((function(e){console.log(e.response),C(!1),a(),Object(v.a)(e)})),x.a.datapackListApprovalById(n.id).then((function(e){P(e.data.payload)}))},type:"button",style:{marginTop:"25px"},children:Object(A.jsx)("span",{children:"Confirm"})})})})]})]})},Y=(L()(C.a),function(e){var t=e.datapackList,a=e.TableDataLoading,n=e.refresh,r=e.setrefresh,c=Object(o.useState)(0),i=Object(s.a)(c,2),l=i[0],d=i[1],p=Object(o.useState)({}),u=Object(s.a)(p,2),j=u[0],b=u[1],m=Object(o.useState)(!1),g=Object(s.a)(m,2),h=g[0],O=g[1],f=[{name:"Name",minWidth:"250px",sortable:!0,selector:"name"},{name:"Operator",minWidth:"100px",sortable:!0,selector:"operator"},{name:"Volume In MB",minWidth:"100px",sortable:!0,selector:"volumeInMB"},{name:"Pack Code",minWidth:"100px",sortable:!0,selector:"packcode"},{name:"Operation",minWidth:"150px",sortable:!0,selector:"action"},{name:"Modified By",minWidth:"150px",sortable:!0,selector:"modifiedBy"},{name:"Modified At",minWidth:"250px",sortable:!0,selector:function(e){return e.modifiedAt?Object(D.b)(e.modifiedAt):null}},{name:"Action",minWidth:"150px",selector:function(e){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("span",{title:"Approve",children:Object(A.jsx)(_.a,{size:15,color:"teal",style:{cursor:"pointer"},onClick:function(){b(e),O(!0),d(1)}})}),"\xa0\xa0",Object(A.jsx)("span",{title:"Reject",children:Object(A.jsx)(R.a,{size:15,color:"red",style:{cursor:"pointer"},onClick:function(){b(e),O(!0),d(2)}})})]})}}];return Object(A.jsxs)(o.Fragment,{children:[Object(A.jsx)(N.a,{column:f,TableData:t,TableDataLoading:a}),Object(A.jsx)(U,{modal:h,toggleModal:function(){return O(!h)},datapackListInfo:j,refresh:n,setRefresh:r,action:l})]})});L()(C.a),t.default=function(){var e=localStorage.getItem("username"),t=Object(o.useState)([]),a=Object(s.a)(t,2),k=a[0],C=a[1],y=Object(o.useState)([]),L=Object(s.a)(y,2),D=L[0],N=L[1],P=Object(o.useState)([]),S=Object(s.a)(P,2),B=S[0],w=S[1],I=Object(o.useState)(!0),_=Object(s.a)(I,2),R=_[0],H=_[1],M=Object(o.useState)([]),z=Object(s.a)(M,2),E=(z[0],z[1],Object(o.useState)(null)),F=Object(s.a)(E,2),J=(F[0],F[1],Object(o.useState)(1)),V=Object(s.a)(J,2),K=V[0],U=V[1],q=Object(o.useState)("1"),G=Object(s.a)(q,2),Q=G[0],X=G[1],Z=function(e){return X(e)};return Object(o.useEffect)(Object(c.a)(Object(n.a)().mark((function t(){return Object(n.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.datapackList().then((function(e){console.log(e),C(e.data.payload),H(!1)})).catch((function(e){Object(v.a)(e),console.log(e.response),H(!1)}));case 2:return t.next=4,x.a.datapackPendingList().then((function(t){console.log(t);var a,n=[],c=[],s=Object(r.a)(t.data.payload);try{for(s.s();!(a=s.n()).done;){var o=a.value;o.modifiedBy===e?c.push(o):n.push(o)}}catch(i){s.e(i)}finally{s.f()}w(c),N(n),H(!1)})).catch((function(e){Object(v.a)(e),console.log(e.response),H(!1)}));case 4:case"end":return t.stop()}}),t)}))),[K]),Object(A.jsxs)(o.Fragment,{children:[Object(A.jsx)(l.a,{children:Object(A.jsx)(d.a,{children:Object(A.jsxs)(p.a,{tabs:!0,children:[Object(A.jsx)(u.a,{children:Object(A.jsx)(j.a,{active:"1"===Q,onClick:function(){return Z("1")},children:Object(A.jsx)("span",{className:"align-middle d-none d-sm-block",children:"Datapack List"})})}),O.j.includes(34)&&Object(A.jsx)(u.a,{children:Object(A.jsx)(j.a,{active:"2"===Q,onClick:function(){return Z("2")},children:Object(A.jsx)("span",{className:"align-middle d-none d-sm-block",children:"My Pending"})})}),O.j.includes(34)&&Object(A.jsx)(u.a,{children:Object(A.jsx)(j.a,{active:"3"===Q,onClick:function(){return Z("3")},children:Object(A.jsx)("span",{className:"align-middle d-none d-sm-block",children:"Approve"})})})]})})}),Object(A.jsx)(l.a,{children:Object(A.jsxs)(b.a,{activeTab:Q,children:[Object(A.jsx)(m.a,{tabId:"1",children:Object(A.jsxs)(l.a,{children:[Object(A.jsxs)(d.a,{className:"border-bottom",children:[Object(A.jsx)(g.a,{tag:"h4",children:"Datapack"}),Object(A.jsx)("div",{children:O.j.includes(16)&&Object(A.jsx)(h.a.Ripple,{className:"ml-2",color:"primary",tag:f.b,to:"/createDatapackList",children:Object(A.jsxs)("div",{className:"d-flex align-items-center",children:[Object(A.jsx)(i.a,{size:17,style:{marginRight:"5px"}}),Object(A.jsx)("span",{children:"Create Datapack List"})]})})})]}),Object(A.jsx)(T,{datapackList:k,TableDataLoading:R,refresh:K,setrefresh:U})]})}),Object(A.jsx)(m.a,{tabId:"2",children:Object(A.jsx)(W,{datapackList:B,TableDataLoading:R})}),Object(A.jsx)(m.a,{tabId:"3",children:Object(A.jsx)(Y,{datapackList:D,TableDataLoading:R,refresh:K,setrefresh:U})})]})})]})}},472:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return s}));a(0);var n=a(127),r=function(e){try{var t=e.response;404===t.status||401===t.status||400===t.status||500===t.status||409===t.status?n.f.error(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):n.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){n.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},c=function(e){try{var t=e.response;404!==t.status&&401!==t.status&&400!==t.status||n.f.error(t.data.errors?t.data.errors[Object.keys(t.data.errors)[0]]:t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){n.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},s=function(e){var t=e.data.message||"success";n.f.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},479:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return l}));var n=a(476),r=a(477),c={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},s=function(e){return new Date(e).toLocaleDateString(void 0,c)},o=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},i=function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t){e.next=4;break}return window.location.href="/Adminlogin",e.next=4,localStorage.clear();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e,t,a){var n=document.createElement("a"),r=function(e){var a;return a="",a+=t.join(","),a+="\n",e.forEach((function(e){var n=0;t.forEach((function(t){n>0&&(a+=","),a+=e[t],n++})),a+="\n"})),a}(e);if(null!==r){var c=JSON.parse(localStorage.getItem("userData")),s="".concat(a,"_").concat((new Date).toISOString(),"_").concat(c.fullname.replaceAll(/\s/g,""),".csv");r.match(/^data:text\/csv/i)||(r="data:text/csv;charset=utf-8,".concat(r)),n.setAttribute("href",encodeURI(r)),n.setAttribute("download",s),n.click()}}},500:function(e,t,a){"use strict";var n=a(16),r=a(0),c=a(1552),s=a(502),o=a(499),i=a.n(o),l=a(501),d=a.n(l),p=a(6);t.a=function(e){var t=e.column,a=e.TableData,o=e.TableDataLoading,l=Object(r.useState)(0),u=Object(n.a)(l,2),j=u[0],b=u[1];return Object(p.jsx)(r.Fragment,{children:Object(p.jsx)(d.a,{noHeader:!0,pagination:!0,columns:t,paginationPerPage:10,className:"react-dataTable",sortIcon:Object(p.jsx)(c.a,{size:10}),paginationDefaultPage:j+1,paginationComponent:function(){return Object(p.jsx)(i.a,{previousLabel:"",nextLabel:"",forcePage:j,onPageChange:function(e){return function(e){b(e.selected)}(e)},pageCount:a.length?a.length/10:1,breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"})},data:a,progressPending:o,progressComponent:Object(p.jsx)(s.a,{color:"primary"}),responsive:!0,pointerOnHover:!0,highlightOnHover:!0,striped:!0})})}},601:function(e,t,a){"use strict";var n=a(0),r=a(1552),c=a(502),s=a(499),o=a.n(s),i=a(501),l=a.n(i),d=a(6);t.a=function(e){var t=e.currentPage,a=e.handlePagination,s=e.RowCount,i=e.column,p=e.TableData,u=e.TableDataLoading,j=e.RowLimit;return Object(d.jsx)(n.Fragment,{children:Object(d.jsx)(l.a,{noHeader:!0,pagination:!0,highlightOnHover:!0,paginationServer:!0,columns:i,paginationPerPage:j,className:"react-dataTable",sortIcon:Object(d.jsx)(r.a,{size:10}),paginationDefaultPage:t+1,paginationComponent:function(){return Object(d.jsx)(o.a,{previousLabel:"",nextLabel:"",forcePage:t,onPageChange:function(e){return a(e)},pageCount:p.length?s/j:1,breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"})},data:p,progressPending:u,progressComponent:Object(d.jsx)(c.a,{color:"primary"}),responsive:!0})})}}}]);
//# sourceMappingURL=344.12ad226c.chunk.js.map