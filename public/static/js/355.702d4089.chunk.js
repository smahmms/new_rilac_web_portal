(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[355],{2633:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a(16),s=a(0),c=a(1581),o=a(1653),i=a(1515),l=a(483),u=a(482),d=a(480),j=a(470),b=a(486),m=a(484),p=a(485),f=a(474),O=(a(478),a(472),a(490)),g=a.n(O),h=a(481),x=a.n(h),v=a(615),C=a(1),D=a(533),P=a(536),y=a(531),S=a(496),k=a(1488),N=a(489),R=a(1513),w=a(502),E=(a(487),a(479)),A=a(6),L=function(e){var t=e.modal,a=e.toggleModal,c=e.overallPointRuleInfo,o=e.setoverallPointRuleInfo,i=(e.setReset,e.resetData,JSON.parse(localStorage.getItem("customerBusinesses")),Object(s.useState)(!1)),l=Object(r.a)(i,2),u=l[0],d=(l[1],function(e){o(Object(C.a)(Object(C.a)({},c),{},Object(n.a)({},e.target.name,e.target.value)))});return Object(A.jsxs)(D.a,{isOpen:t,toggle:a,className:"modal-dialog-centered",children:[Object(A.jsx)(P.a,{toggle:a,children:"Edit Point Rule"}),Object(A.jsx)(y.a,{children:Object(A.jsxs)(S.a,{className:"row",style:{width:"100%"},onSubmit:function(e){e.preventDefault()},autoComplete:"off",children:[Object(A.jsx)(p.a,{sm:"6",children:Object(A.jsxs)(k.a,{children:[Object(A.jsx)(N.a,{for:"PointRateSetupName",children:"Point Rate Setup Name"}),Object(A.jsx)(R.a,{type:"text",name:"PointRateSetupName",id:"PointRateSetupName",value:c.PointRateSetupName,onChange:d,placeholder:"write a name"})]})}),Object(A.jsx)(p.a,{sm:"6",children:Object(A.jsxs)(k.a,{children:[Object(A.jsx)(N.a,{for:"PurchaseAmount",children:"Purchase Amount"}),Object(A.jsx)(R.a,{type:"number",name:"PurchaseAmount",id:"PurchaseAmount",value:c.PurchaseAmount,onChange:d,placeholder:"0"})]})}),Object(A.jsx)(p.a,{sm:"6",children:Object(A.jsxs)(k.a,{children:[Object(A.jsx)(N.a,{for:"Points",children:"Points"}),Object(A.jsx)(R.a,{type:"number",name:"Points",id:"Points",value:c.Points,onChange:d,placeholder:"0"})]})}),Object(A.jsx)(p.a,{sm:"6",children:Object(A.jsxs)(k.a,{children:[Object(A.jsx)(N.a,{for:"ExpiryDate",children:"Expiry Date"}),Object(A.jsx)(R.a,{type:"date",name:"ExpiryDate",id:"ExpiryDate",value:new Date(c.ExpiryDate).toLocaleDateString("fr-CA"),onChange:d,placeholder:"0"})]})}),Object(A.jsx)(p.a,{sm:"12",className:"mb-1",children:Object(A.jsxs)(k.a,{check:!0,children:[Object(A.jsx)(R.a,{onChange:function(e){e.target.checked?o(Object(C.a)(Object(C.a)({},c),{},{OfferRate:!0})):o(Object(C.a)(Object(C.a)({},c),{},{OfferRate:!1}))},type:"checkbox",id:"viaEmail",checked:c.OfferRate}),Object(A.jsx)(N.a,{for:"viaEmail",check:!0,children:"Offer Rate"})]})}),c.OfferRate?Object(A.jsx)(p.a,{sm:"6",children:Object(A.jsxs)(k.a,{children:[Object(A.jsx)(N.a,{for:"OfferStartDate",children:"Offer Start Date"}),Object(A.jsx)(R.a,{type:"date",name:"OfferStartDate",id:"OfferStartDate",value:new Date(c.OfferStartDate).toLocaleDateString("fr-CA"),onChange:d,placeholder:"0"})]})}):null,c.OfferRate?Object(A.jsx)(p.a,{sm:"6",children:Object(A.jsxs)(k.a,{children:[Object(A.jsx)(N.a,{for:"OfferEndDate",children:"Offer End Date"}),Object(A.jsx)(R.a,{type:"date",name:"OfferEndDate",id:"OfferEndDate",value:new Date(c.OfferEndDate).toLocaleDateString("fr-CA"),onChange:d,placeholder:"0"})]})}):null,Object(A.jsx)(p.a,{sm:"12",className:"text-center",children:u?Object(A.jsxs)(j.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(A.jsx)(w.a,{color:"white",size:"sm"}),Object(A.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(A.jsx)(j.a.Ripple,{className:"ml-2",color:"primary",type:"submit",style:{marginTop:"25px"},children:Object(A.jsx)("span",{children:"Submit"})})})]})})]})},B=x()(g.a);t.default=function(){var e=Object(s.useState)(!0),t=Object(r.a)(e,2),a=t[0],O=(t[1],Object(s.useState)(!0)),h=Object(r.a)(O,2),x=h[0],C=h[1],D=Object(s.useState)([]),P=Object(r.a)(D,2),y=P[0],S=(P[1],Object(s.useState)({})),k=Object(r.a)(S,2),N=k[0],R=k[1],w=Object(s.useState)(!1),I=Object(r.a)(w,2),T=I[0],W=I[1];JSON.parse(localStorage.getItem("customerBusinesses"));Object(s.useEffect)((function(){}),[x]);var H=[{name:"SL.",minWidth:"100px",sortable:!0,cell:function(e,t){return t+1}},{name:"Point Rate Setup Name",minWidth:"150px",sortable:!0,selector:"PointRateSetupName"},{name:"Purchase Amount",minWidth:"100px",sortable:!0,selector:"PurchaseAmount"},{name:"Points",minWidth:"100px",sortable:!0,selector:"Points"},{name:"Expiry Date",minWidth:"250px",sortable:!0,selector:function(e){return e.ExpiryDate?Object(E.b)(e.ExpiryDate):null}},{name:"Offer Rate",minWidth:"100px",sortable:!0,selector:function(e){return e.OfferRate?"True":"False"}},{name:"Offer Start Date",minWidth:"250px",sortable:!0,selector:function(e){return e.OfferStartDate?Object(E.b)(e.OfferStartDate):null}},{name:"Offer End Date",minWidth:"250px",sortable:!0,selector:function(e){return e.OfferEndDate?Object(E.b)(e.OfferEndDate):null}},{name:"Created At",minWidth:"250px",sortable:!0,selector:function(e){return e.CreatedAt?Object(E.b)(e.CreatedAt):null}},{name:"Action",minWidth:"150px",selector:function(e){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("span",{title:"Edit",children:Object(A.jsx)(c.a,{size:15,color:"teal",style:{cursor:"pointer"},onClick:function(t){R(e),W(!0)}})}),"\xa0\xa0",Object(A.jsx)("span",{title:"Delete",children:Object(A.jsx)(o.a,{size:15,color:"red",style:{cursor:"pointer"},onClick:function(t){return e.Id,a="Do you want to delete?",B.fire(Object(n.a)({title:a,text:"You won't be able to revert this",icon:"warning",allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,confirmButtonText:"Yes",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"},showLoaderOnConfirm:!0,preConfirm:function(){},buttonsStyling:!1},"allowOutsideClick",(function(){return!g.a.isLoading()}))).then((function(e){e.isConfirmed}));var a}})})]})}}];return Object(A.jsxs)(l.a,{children:[Object(A.jsxs)(u.a,{className:"border-bottom",children:[Object(A.jsx)(d.a,{tag:"h4",children:"Global Rules"}),Object(A.jsx)(j.a.Ripple,{className:"ml-2",color:"primary",tag:f.b,to:"/createOverallPointRule",children:Object(A.jsxs)("div",{className:"d-flex align-items-center",children:[Object(A.jsx)(i.a,{size:17,style:{marginRight:"5px"}}),Object(A.jsx)("span",{children:"Create Global Rule"})]})})]}),Object(A.jsxs)(b.a,{children:[Object(A.jsx)(m.a,{children:Object(A.jsx)(p.a,{md:"12",children:Object(A.jsx)(v.a,{column:H,TableData:y,TableDataLoading:a})})}),Object(A.jsx)(L,{toggleModal:function(){return W(!T)},modal:T,resetData:x,setReset:C,overallPointRuleInfo:N,setoverallPointRuleInfo:R})]})]})}},472:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return c}));a(0);var n=a(127),r=function(e){try{var t=e.response;404===t.status||401===t.status||400===t.status||500===t.status||409===t.status?n.f.error(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):n.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){n.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},s=function(e){try{var t=e.response;404!==t.status&&401!==t.status&&400!==t.status||n.f.error(t.data.errors?t.data.errors[Object.keys(t.data.errors)[0]]:t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){n.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},c=function(e){var t=e.data.message||"success";n.f.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},479:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return l}));var n=a(476),r=a(477),s={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},c=function(e){return new Date(e).toLocaleDateString(void 0,s)},o=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},i=function(){var e=Object(r.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t){e.next=4;break}return window.location.href="/Adminlogin",e.next=4,localStorage.clear();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e,t,a){var n=document.createElement("a"),r=function(e){var a;return a="",a+=t.join(","),a+="\n",e.forEach((function(e){var n=0;t.forEach((function(t){n>0&&(a+=","),a+=e[t],n++})),a+="\n"})),a}(e);if(null!==r){var s=JSON.parse(localStorage.getItem("userData")),c="".concat(a,"_").concat((new Date).toISOString(),"_").concat(s.fullname.replaceAll(/\s/g,""),".csv");r.match(/^data:text\/csv/i)||(r="data:text/csv;charset=utf-8,".concat(r)),n.setAttribute("href",encodeURI(r)),n.setAttribute("download",c),n.click()}}},615:function(e,t,a){"use strict";var n=a(21),r=a(16),s=a(0),c=a(1552),o=a(502),i=a(499),l=a.n(i),u=a(501),d=a.n(u),j=a(6);t.a=function(e){var t=e.column,a=e.TableData,i=e.TableDataLoading,u=Object(s.useState)(0),b=Object(r.a)(u,2),m=b[0],p=b[1];return Object(j.jsx)(s.Fragment,{children:Object(j.jsx)(d.a,{noHeader:!0,pagination:!0,columns:t,paginationPerPage:10,className:"react-dataTable",sortIcon:Object(j.jsx)(c.a,{size:10}),paginationDefaultPage:m+1,paginationComponent:function(){var e;return Object(j.jsx)(l.a,(e={previousLabel:"",nextLabel:"",forcePage:m,onPageChange:function(e){return function(e){p(e.selected)}(e)},pageCount:a.length?a.length/10:1,breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link"},Object(n.a)(e,"breakClassName","page-item"),Object(n.a)(e,"breakLinkClassName","page-link"),Object(n.a)(e,"containerClassName","pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"),e))},data:a,progressPending:i,progressComponent:Object(j.jsx)(o.a,{color:"primary"}),responsive:!0})})}}}]);
//# sourceMappingURL=355.702d4089.chunk.js.map