(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[360],{2397:function(e,a,t){"use strict";t.r(a);var c=t(21),s=t(1),n=t(16),l=t(478),r=(t(518),t(487)),i=t(0),o=t(1553),j=t(660),u=t(474),d=t(495),b=t(470),h=t(483),O=t(482),m=t(480),x=t(496),p=t(486),f=t(484),g=t(485),v=t(1488),y=t(489),T=t(1513),C=t(1485),k=t(502),N=t(490),R=t.n(N),S=t(481),D=t.n(S),P=t(472),M=t(6);D()(R.a);a.default=function(){var e=Object(j.g)(),a=Object(i.useRef)(),t=Object(i.useRef)(),N=Object(i.useRef)(),R=Object(i.useRef)(),S=Object(i.useRef)(),D=Object(i.useState)(!1),A=Object(n.a)(D,2),w=A[0],B=A[1],H=Object(i.useState)([]),I=Object(n.a)(H,2),q=I[0],F=I[1],L=Object(i.useState)({offlineRuleName:"",serviceId:"",offlineRuleMsg:"",noOfTran:0,minPerTran:0,isTotalTran:!1,tranOpsType:0,tranDays:1,userType:"",bonusAmount:0,isPercentage:!1,min:0,max:0,startDate:"",endDate:"",isExpiry:!0,isActive:!1,isPerTranBonus:!1,isSkdDatetime:!1,skdHour:0,skdTime:0}),E=Object(n.a)(L,2),z=E[0],J=E[1],K=function(e){J(Object(s.a)(Object(s.a)({},z),{},Object(c.a)({},e.target.name,e.target.value)))};Object(i.useEffect)((function(){localStorage.setItem("useBMStoken",!0),l.a.getServiceList().then((function(e){console.log(e),F(e.data),localStorage.setItem("useBMStoken",!1)})).catch((function(e){Object(P.a)(e),console.log(e),localStorage.setItem("useBMStoken",!1)}))}),[]);var W=function(e){for(var a=0,t=0,c=e;c.match(/<TransactionTime>/)||c.match(/<TransactionId>/)||c.match(/<RewordAmount>/)||c.match(/<Msisdn>/)||c.match(/<TransactionAmount>/)||c.match(/<CampaignName>/);){var s,n;if(c.match(/<TransactionTime>/)&&(a+=19,t+=2,c=c.replace(/<TransactionTime>/,"")),c.match(/<TransactionId>/)&&(a+=30,t+=15,c=c.replace(/<TransactionId>/,"")),c.match(/<RewordAmount>/)&&(a+=10,t-=4,c=c.replace(/<RewordAmount>/,"")),c.match(/<Msisdn>/)&&(a+=11,t-=3,c=c.replace(/<Msisdn>/,"")),c.match(/<TransactionAmount>/)&&(a+=10,t-=9,c=c.replace(/<TransactionAmount>/,"")),c.match(/<CampaignName>/))t+=(null===z||void 0===z||null===(s=z.offlineRuleName)||void 0===s?void 0:s.length)-14,a+=null===z||void 0===z||null===(n=z.offlineRuleName)||void 0===n?void 0:n.length,c=c.replace(/<CampaignName>/,"")}return{charCount:a+=c.length,actualCharReduce:t}};return Object(M.jsxs)(i.Fragment,{children:[Object(M.jsx)(b.a.Ripple,{className:"mb-1",color:"primary",tag:u.b,to:"/allOfflineRules",children:Object(M.jsxs)("div",{className:"d-flex align-items-center",children:[Object(M.jsx)(o.a,{size:17,style:{marginRight:"5px"}}),Object(M.jsx)("span",{children:"Back"})]})}),Object(M.jsx)(h.a,{children:Object(M.jsx)(O.a,{className:"border-bottom",children:Object(M.jsx)(m.a,{tag:"h4",children:"Add Offline Campaign Rule"})})}),Object(M.jsxs)(x.a,{style:{width:"100%"},onSubmit:function(a){a.preventDefault(),localStorage.setItem("useBMStoken",!0),B(!0),console.log(Object(s.a)({},z)),l.a.createOfflineRule(Object(s.a)({},z)).then((function(a){B(!1),localStorage.setItem("useBMStoken",!1),Object(P.c)(a),e.push("/allOfflineRules")})).catch((function(e){B(!1),localStorage.setItem("useBMStoken",!1),Object(P.a)(e),console.log(e.response)}))},autoComplete:"off",children:[Object(M.jsx)(h.a,{children:Object(M.jsx)(p.a,{children:Object(M.jsxs)(f.a,{children:[Object(M.jsx)(g.a,{sm:"6",children:Object(M.jsxs)(v.a,{children:[Object(M.jsxs)(y.a,{for:"offlineRuleName",children:["Campaign Rule Name",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(T.a,{type:"text",name:"offlineRuleName",id:"offlineRuleName",value:z.offlineRuleName,onChange:K,required:!0,maxLength:"20",placeholder:"description here..."}),Object(M.jsxs)("p",{className:"text-right",style:20===z.offlineRuleName.length?{margin:"2px",color:"red"}:{margin:"2px",color:"blue"},children:[20-z.offlineRuleName.length," characters remaining"]})]})}),Object(M.jsx)(g.a,{sm:"6",children:Object(M.jsxs)(v.a,{children:[Object(M.jsxs)(y.a,{for:"offlineRuleMsg",children:["Offline Rule Message",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(T.a,{type:"textarea",name:"offlineRuleMsg",id:"offlineRuleMsg",value:z.offlineRuleMsg,onChange:K,required:!0,placeholder:"message here...",maxLength:(160-W(z.offlineRuleMsg).actualCharReduce).toString()}),Object(M.jsxs)("p",{className:"text-right",style:160===W(z.offlineRuleMsg).charCount?{margin:"2px",color:"red"}:{margin:"2px",color:"blue"},children:[160-W(z.offlineRuleMsg).charCount," characters remaining"]})]})}),Object(M.jsx)(g.a,{sm:"5",children:Object(M.jsxs)(v.a,{children:[Object(M.jsxs)(y.a,{for:"serviceId",children:["Service Type",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(d.a,{ref:a,theme:r.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:function(e){J(Object(s.a)(Object(s.a)({},z),{},{serviceId:e.value}))},options:null===q||void 0===q?void 0:q.map((function(e){return{value:e.serviceId,label:e.serviceKeyword}}))}),Object(M.jsx)(T.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return a.current.select.focus()},value:z.serviceId||"",onChange:function(e){return""}})]})}),Object(M.jsx)(g.a,{sm:"4",children:Object(M.jsxs)(v.a,{children:[Object(M.jsxs)(y.a,{for:"userType",children:["Reward Receiver",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(d.a,{ref:N,theme:r.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:function(e){J(Object(s.a)(Object(s.a)({},z),{},{userType:e.value}))},options:[{value:"s",label:"Sender"},{value:"r",label:"Receiver"}]}),Object(M.jsx)(T.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return N.current.select.focus()},value:z.userType||"",onChange:function(e){return""}})]})}),Object(M.jsx)(g.a,{sm:"3",children:Object(M.jsxs)(v.a,{children:[Object(M.jsxs)(y.a,{for:"tranDays",children:["Rule Tenure",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(d.a,{ref:t,theme:r.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",defaultValue:{value:1,label:"Daily"},onChange:function(e){1===e.value?J(Object(s.a)(Object(s.a)({},z),{},{skdTime:0,tranDays:e.value})):J(Object(s.a)(Object(s.a)({},z),{},{tranDays:e.value}))},options:[{value:1,label:"Daily"},{value:7,label:"Weekly"},{value:30,label:"Monthly"}]}),Object(M.jsx)(T.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return t.current.select.focus()},value:z.tranDays||"",onChange:function(e){return""}})]})}),Object(M.jsx)(g.a,{sm:"3",className:"mt-2",children:Object(M.jsx)(v.a,{children:Object(M.jsx)(C.a,{type:"switch",id:"isSkdDatetime",name:"isSkdDatetime",label:"Is Schedule?",onChange:function(e){e.target.checked?J(Object(s.a)(Object(s.a)({},z),{},{isSkdDatetime:!0})):J(Object(s.a)(Object(s.a)({},z),{},{isSkdDatetime:!1,skdTime:0,skdHour:0}))}})})}),z.isSkdDatetime&&30===z.tranDays&&Object(M.jsx)(g.a,{md:"3",children:Object(M.jsxs)(v.a,{children:[Object(M.jsxs)(y.a,{for:"endTimeline",children:["Select a date",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(d.a,{ref:S,theme:r.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:function(e){J(Object(s.a)(Object(s.a)({},z),{},{skdTime:e.value}))},options:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"},{value:9,label:"9"},{value:10,label:"10"},{value:11,label:"11"},{value:12,label:"12"},{value:13,label:"13"},{value:14,label:"14"},{value:15,label:"15"},{value:16,label:"16"},{value:17,label:"17"},{value:18,label:"18"},{value:19,label:"19"},{value:20,label:"20"},{value:21,label:"21"},{value:22,label:"22"},{value:23,label:"23"},{value:24,label:"24"},{value:25,label:"25"},{value:26,label:"26"},{value:27,label:"27"},{value:28,label:"28"},{value:29,label:"29"},{value:30,label:"30"},{value:31,label:"31"}]}),Object(M.jsx)(T.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return S.current.select.focus()},value:z.skdTime||"",onChange:function(e){return""}})]})}),z.isSkdDatetime&&7===z.tranDays&&Object(M.jsx)(g.a,{md:"3",children:Object(M.jsxs)(v.a,{children:[Object(M.jsxs)(y.a,{for:"skdHour",children:["Select a day",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(d.a,{ref:S,theme:r.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:function(e){J(Object(s.a)(Object(s.a)({},z),{},{skdTime:e.value}))},options:[{value:6,label:"Saturday"},{value:7,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"}]}),Object(M.jsx)(T.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return S.current.select.focus()},value:z.skdTime||"",onChange:function(e){return""}})]})}),z.isSkdDatetime&&Object(M.jsx)(g.a,{md:"3",children:Object(M.jsxs)(v.a,{children:[Object(M.jsxs)(y.a,{for:"skdHour",children:["Hour",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(T.a,{type:"number",name:"skdHour",min:"0",max:"24",id:"skdHour",value:z.skdHour,onChange:K,required:!0,placeholder:"0"})]})})]})})}),Object(M.jsx)(h.a,{children:Object(M.jsxs)(p.a,{children:[Object(M.jsxs)(f.a,{children:[Object(M.jsx)(g.a,{sm:"6",children:Object(M.jsxs)(v.a,{children:[Object(M.jsxs)(y.a,{for:"tranOpsType",children:["Rule Type",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(d.a,{ref:R,theme:r.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:function(e){J(Object(s.a)(Object(s.a)({},z),{},{tranOpsType:e.value}))},options:[{value:1,label:"Apply Rule on Transaction Count"},{value:0,label:"Apply Rule on Transaction Amount Limit"},{value:2,label:"Apply Rule on Both Transaction Count & Amount"}]}),Object(M.jsx)(T.a,{required:!0,type:"number",style:{opacity:0,width:"100%",height:0},onFocus:function(e){return R.current.select.focus()},value:0===z.tranOpsType?1:z.tranOpsType||"",onChange:function(e){return""}})]})}),Object(M.jsx)(g.a,{sm:"6",className:"mt-1",children:Object(M.jsx)(v.a,{children:Object(M.jsx)(C.a,{type:"switch",id:"isPerTranBonus",name:"isPerTranBonus",label:"Is Bonus Per Transaction?",onChange:function(e){e.target.checked?J(Object(s.a)(Object(s.a)({},z),{},{isPerTranBonus:!0})):J(Object(s.a)(Object(s.a)({},z),{},{isPerTranBonus:!1}))}})})})]}),Object(M.jsxs)(f.a,{className:"mt-2",children:[(1===z.tranOpsType||2===z.tranOpsType)&&Object(M.jsx)(g.a,{sm:"3",children:Object(M.jsxs)(v.a,{children:[Object(M.jsxs)(y.a,{for:"noOfTran",children:["MIN TXN Count",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(T.a,{type:"number",name:"noOfTran",id:"noOfTran",value:z.noOfTran,onChange:K,required:!0,placeholder:"0"})]})}),(0===z.tranOpsType||2===z.tranOpsType)&&Object(M.jsx)(g.a,{sm:"3",children:Object(M.jsxs)(v.a,{children:[Object(M.jsxs)(y.a,{for:"minPerTran",children:["MIN Amount(TK)/TXN",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(T.a,{type:"number",name:"minPerTran",id:"minPerTran",value:z.minPerTran,onChange:K,required:!0,placeholder:"0"})]})}),2===z.tranOpsType&&Object(M.jsx)(g.a,{sm:"3",className:"pt-2",children:Object(M.jsx)(v.a,{check:!0,children:Object(M.jsx)(C.a,{onChange:function(e){e.target.checked?J(Object(s.a)(Object(s.a)({},z),{},{isTotalTran:!0})):J(Object(s.a)(Object(s.a)({},z),{},{isTotalTran:!1}))},label:"On Total Amount?",type:"checkbox",id:"isTotalTran"})})})]})]})}),Object(M.jsxs)(f.a,{children:[Object(M.jsx)(g.a,{sm:"6",children:Object(M.jsx)(h.a,{children:Object(M.jsx)(p.a,{children:Object(M.jsxs)(f.a,{children:[Object(M.jsxs)(g.a,{sm:"12",className:"mb-1",children:[Object(M.jsx)(y.a,{className:"d-block",children:Object(M.jsx)("h6",{children:"Type"})}),Object(M.jsx)(v.a,{check:!0,inline:!0,className:"mr-3",children:Object(M.jsxs)(y.a,{check:!0,children:[Object(M.jsx)(C.a,{type:"radio",id:"flat",name:"flat",checked:!z.isPercentage,onChange:function(){J(Object(s.a)(Object(s.a)({},z),{},{isPercentage:!1,min:0,max:0}))}})," Flat"]})}),Object(M.jsx)(v.a,{check:!0,inline:!0,children:Object(M.jsxs)(y.a,{check:!0,children:[Object(M.jsx)(C.a,{type:"radio",id:"percentage",name:"percentage",checked:z.isPercentage,onChange:function(){J(Object(s.a)(Object(s.a)({},z),{},{isPercentage:!0}))}})," Percentage"]})})]}),Object(M.jsx)(g.a,{sm:"4",children:Object(M.jsxs)(v.a,{children:[Object(M.jsxs)(y.a,{for:"bonusAmount",children:["Amount",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(T.a,{type:"number",name:"bonusAmount",id:"bonusAmount",value:z.bonusAmount,onChange:K,required:!0,placeholder:"0"})]})}),z.isPercentage&&Object(M.jsx)(g.a,{sm:"4",children:Object(M.jsxs)(v.a,{children:[Object(M.jsxs)(y.a,{for:"min",children:["Min",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(T.a,{type:"number",name:"min",id:"min",value:z.min,onChange:K,required:!0,placeholder:"0"})]})}),z.isPercentage&&Object(M.jsx)(g.a,{sm:"4",children:Object(M.jsxs)(v.a,{children:[Object(M.jsxs)(y.a,{for:"max",children:["Max",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(T.a,{type:"number",name:"max",id:"max",value:z.max,onChange:K,required:!0,placeholder:"0"})]})})]})})})}),Object(M.jsx)(g.a,{sm:"6",children:Object(M.jsx)(h.a,{children:Object(M.jsxs)(p.a,{children:[Object(M.jsxs)(f.a,{children:[Object(M.jsx)(g.a,{md:"6",children:Object(M.jsxs)(v.a,{children:[Object(M.jsxs)(y.a,{for:"startDate",children:["Start Date",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(T.a,{type:"datetime-local",min:(new Date).toLocaleDateString("fr-CA"),name:"startDate",id:"startDate",value:z.startDate,onChange:function(e){J(Object(s.a)(Object(s.a)({},z),{},{startDate:e.target.value.replace(/T/," ")}))},required:!0,placeholder:"0"})]})}),Object(M.jsx)(g.a,{md:"6",children:Object(M.jsxs)(v.a,{children:[Object(M.jsxs)(y.a,{for:"endDate",children:["End Date",Object(M.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(M.jsx)(T.a,{type:"datetime-local",min:(new Date).toLocaleDateString("fr-CA"),name:"endDate",id:"endDate",value:z.endDate,onChange:function(e){J(Object(s.a)(Object(s.a)({},z),{},{endDate:e.target.value.replace(/T/," ")}))},required:!0,placeholder:"0"})]})})]}),Object(M.jsx)(g.a,{sm:"4",className:"mt-1",children:Object(M.jsx)(v.a,{children:Object(M.jsx)(C.a,{type:"switch",id:"isActive",name:"isActive",label:"isActive?",onChange:function(e){e.target.checked?J(Object(s.a)(Object(s.a)({},z),{},{isActive:!0})):J(Object(s.a)(Object(s.a)({},z),{},{isActive:!1}))}})})})]})})})]}),Object(M.jsx)(g.a,{sm:"12",className:"text-center",children:w?Object(M.jsxs)(b.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(M.jsx)(k.a,{color:"white",size:"sm"}),Object(M.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(M.jsx)(b.a.Ripple,{className:"ml-2",color:"primary",type:"submit",style:{marginTop:"25px"},children:Object(M.jsx)("span",{children:"Submit"})})})]})]})}},472:function(e,a,t){"use strict";t.d(a,"a",(function(){return s})),t.d(a,"b",(function(){return n})),t.d(a,"c",(function(){return l}));t(0);var c=t(127),s=function(e){try{var a=e.response;404===a.status||401===a.status||400===a.status||500===a.status||409===a.status?c.f.error(a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):c.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){c.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},n=function(e){try{var a=e.response;404!==a.status&&401!==a.status&&400!==a.status||c.f.error(a.data.errors?a.data.errors[Object.keys(a.data.errors)[0]]:a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){c.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},l=function(e){var a=e.data.message||"success";c.f.success(a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},518:function(e,a,t){}}]);
//# sourceMappingURL=360.e6b131db.chunk.js.map