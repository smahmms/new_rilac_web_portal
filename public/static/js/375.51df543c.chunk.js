(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[375],{2409:function(e,a,t){"use strict";t.r(a);var s=t(1),l=t(16),c=t(0),i=t(660),r=t(474),n=t(495),o=t(487),d=(t(499),t(501),t(1553)),j=t(470),m=t(483),b=t(482),u=t(486),O=t(496),h=t(485),f=t(1488),p=t(489),x=t(1513),v=t(502),g=t(633),y=(t(232),t(478)),N=t(490),S=t.n(N),T=t(481),C=t.n(T),U=t(6),L=C()(S.a);a.default=function(){var e=Object(i.g)(),a=Object(i.i)().userID,t=Object(c.useState)([{value:"",label:""}]),N=Object(l.a)(t,2),S=N[0],T=N[1],C=Object(c.useState)([{value:"",label:""}]),w=Object(l.a)(C,2),R=w[0],z=w[1],E=Object(c.useState)([]),q=Object(l.a)(E,2),D=q[0],F=q[1],k=Object(c.useState)(!0),I=Object(l.a)(k,2),P=I[0],V=I[1],B=Object(c.useState)(!1),J=Object(l.a)(B,2),A=J[0],G=(J[1],Object(c.useState)({})),H=Object(l.a)(G,2),K=H[0],M=H[1],Q=Object(c.useState)({userType:!1,userTitle:!1,storeName:!1,email:!1}),W=Object(l.a)(Q,2),X=W[0],Y=W[1];Object(c.useEffect)((function(){y.a.userRoleList().then((function(e){var a=e.data.payload.map((function(e){return{value:e.id,label:e.statusdesc}}));T(a)})).catch((function(e){console.log(e.response)})),y.a.userTitleList().then((function(e){var a=e.data.payload.map((function(e){return{value:e.id,label:e.statusdesc}}));z(a)})).catch((function(e){console.log(e.response)})),y.a.adminUserDetails({id:a}).then((function(e){var a,t=e.data.payload[0];console.log(e);var s=t.fullname?t.fullname.split(" "):[" "," "];a={id:t.id,firstname:s.length?s[0]:"",lastname:2===s.length?s[1]:"",emailid:t.emailid,roleid:t.roleid,rolename:t.adminstatus.statusdesc,storename:t.adminstore.storename,storeid:t.storeid,title:t.titleinfo.statusdesc,titleid:t.titleinfo.id},M(a),V(!1)})).catch((function(e){console.log(e.response)})),y.a.storeList().then((function(e){var a=e.data.payload.map((function(e){return{value:e.storeid,label:e.storename}}));F(a)})).catch((function(e){console.log(e)}))}),[]);var Z=function(e){var a=/\S+@\S+\.\S+/.test(e.target.value);"emailid"===e.target.name&&a&&Y(Object(s.a)(Object(s.a)({},X),{},{email:!1}));var t=Object(s.a)({},K);"firstname"===e.target.name&&(t.firstname=e.target.value),"lastname"===e.target.name&&(t.lastname=e.target.value),"emailid"===e.target.name&&(t.emailid=e.target.value),M(t)};return Object(U.jsx)(U.Fragment,{children:P?Object(U.jsxs)(U.Fragment,{children:[" ",Object(U.jsx)(g.a,{active:!0})," ",Object(U.jsx)(g.a,{active:!0})]}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(j.a.Ripple,{className:"ml-2 mb-2",color:"primary",tag:r.b,to:"/user",children:[Object(U.jsx)(d.a,{size:10}),Object(U.jsx)("span",{className:"align-middle ml-50",children:"Back to staff list"})]}),Object(U.jsxs)(m.a,{children:[Object(U.jsx)(b.a,{className:"border-bottom",children:Object(U.jsx)("h5",{children:"Update Staff Info"})}),Object(U.jsx)(u.a,{style:{paddingTop:"15px"},children:Object(U.jsxs)(O.a,{className:"row",style:{width:"100%"},onSubmit:function(a){a.preventDefault();var t=K.id,l=K.firstname,c=K.lastname,i=K.emailid,r=K.roleid,n=K.storeid,o=K.titleid,d=/\S+@\S+\.\S+/.test(i),j=Object(s.a)({},X);if(j.email=!d,j.userType=!r,j.userTitle=!o,j.storeName=!n,Y(j),d){var m="".concat(l," ").concat(c);r&&n&&o&&y.a.adminUserEdit({id:t,fullname:m,roleid:r,emailid:i,storeid:n,title:o}).then((function(a){console.log(a),L.fire({icon:"success",title:"Done!",text:"The Staff Info has been updated.",customClass:{confirmButton:"btn btn-success"}}),setTimeout((function(){e.replace("/user")}),1e3)})).catch((function(e){console.log(e)}))}},autoComplete:"off",children:[Object(U.jsx)(h.a,{sm:"3",children:Object(U.jsxs)(f.a,{children:[Object(U.jsxs)(p.a,{for:"firstName",children:["First Name ",Object(U.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(U.jsx)(x.a,{type:"text",name:"firstname",id:"firstName",required:!0,placeholder:"firstName",value:K.firstname,onChange:Z})]})}),Object(U.jsx)(h.a,{sm:"3",children:Object(U.jsxs)(f.a,{children:[Object(U.jsxs)(p.a,{for:"lastName",children:["Last Name ",Object(U.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(U.jsx)(x.a,{type:"text",name:"lastname",id:"lastName",onChange:Z,required:!0,placeholder:"lastName",value:K.lastname})]})}),Object(U.jsx)(h.a,{sm:"3",children:Object(U.jsxs)(f.a,{children:[Object(U.jsxs)(p.a,{for:"Email",children:["Email ",Object(U.jsx)("span",{style:{color:"red"},children:"*"})]}),"\xa0",X.email&&Object(U.jsx)("span",{style:{color:"red",fontSize:"11px"},children:" is not valid"}),Object(U.jsx)(x.a,{type:"email",name:"emailid",id:"Email",onChange:Z,placeholder:"Email",value:K.emailid})]})}),Object(U.jsx)(h.a,{sm:"3",children:Object(U.jsxs)(f.a,{children:[Object(U.jsxs)(p.a,{for:"StoreName",children:["Store Name",Object(U.jsx)("span",{style:{color:"red"},children:"*"})]}),"\xa0",X.storeName&&Object(U.jsx)("span",{style:{color:"red",fontSize:"11px"},children:"Required"}),Object(U.jsx)(n.a,{theme:o.i,className:"react-select",classNamePrefix:"select",name:"StoreName",defaultValue:{label:K.storename,value:K.storeid},onChange:function(e,a){if("clear"===a.action){var t=Object(s.a)({},K);t.storeid=null,M(t)}else{Y(Object(s.a)(Object(s.a)({},X),{},{storeName:!1}));var l=Object(s.a)({},K);l.storeid=e.value,M(l)}},options:D,isClearable:!0,isLoading:!1})]})}),Object(U.jsx)(h.a,{sm:"3",children:Object(U.jsxs)(f.a,{children:[Object(U.jsxs)(p.a,{for:"UserType",children:["User Type",Object(U.jsx)("span",{style:{color:"red"},children:"*"})]}),"\xa0",X.userType&&Object(U.jsx)("span",{style:{color:"red",fontSize:"11px"},children:"Required"}),Object(U.jsx)(n.a,{theme:o.i,className:"react-select",classNamePrefix:"select",defaultValue:{label:K.rolename,value:K.roleid},name:"UserType",onChange:function(e,a){if("clear"===a.action){var t=Object(s.a)({},K);t.roleid=null,M(t)}else{Y(Object(s.a)(Object(s.a)({},X),{},{userType:!1}));var l=Object(s.a)({},K);l.roleid=e.value,M(l)}},options:S,isClearable:!0,isLoading:!1})]})}),Object(U.jsx)(h.a,{sm:"3",children:Object(U.jsxs)(f.a,{children:[Object(U.jsxs)(p.a,{for:"UserTitle",children:["User Title",Object(U.jsx)("span",{style:{color:"red"},children:"*"})]}),"\xa0",X.userTitle&&Object(U.jsx)("span",{style:{color:"red",fontSize:"11px"},children:"Required"}),Object(U.jsx)(n.a,{theme:o.i,className:"react-select",classNamePrefix:"select",name:"UserTitle",defaultValue:{label:K.title,value:K.titleid},onChange:function(e,a){if("clear"===a.action){var t=Object(s.a)({},K);t.titleid=null,M(t)}else{Y(Object(s.a)(Object(s.a)({},X),{},{userTitle:!1}));var l=Object(s.a)({},K);l.titleid=e.value,M(l)}},options:R,isClearable:!0,isLoading:!1})]})}),Object(U.jsx)(h.a,{sm:"3",children:A?Object(U.jsxs)(j.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(U.jsx)(v.a,{color:"white",size:"sm"}),Object(U.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(U.jsx)(j.a.Ripple,{className:"ml-2",color:"primary",type:"submit",style:{marginTop:"25px"},children:Object(U.jsx)("span",{className:"align-middle ml-50",children:"Update"})})})]})})]})," "]})})}}}]);
//# sourceMappingURL=375.51df543c.chunk.js.map