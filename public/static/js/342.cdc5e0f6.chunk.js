(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[342],{2576:function(e,t,a){"use strict";a.r(t);var r=a(497),n=a(16),o=a(0),c=a(1515),i=a(483),s=a(482),l=a(548),d=a(1525),u=a(1526),p=a(550),j=a(551),b=a(480),g=a(470),h=a(478),m=a(474),O=a(487),f=a(21),x=a(1581),v=a(1653),k=a(479),y=a(1520),C=a(472),_=a(490),D=a.n(_),E=a(481),w=a.n(E),L=a(500),S=a(660),N=a(6),T=w()(D.a),A=function(e){var t=e.datapackGroupList,a=(e.rule_type,e.TableDataLoading),r=e.setrefresh,n=e.refresh,c=(e.setgroupEditData,Object(S.g)()),i=[{name:"Group Title",minWidth:"150px",sortable:!0,selector:"group_title"},{name:"Operator",minWidth:"50px",sortable:!0,selector:function(e){var t;return null===e||void 0===e||null===(t=e.group_items)||void 0===t?void 0:t.map((function(e){return Object(N.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:null===e||void 0===e?void 0:e.keyword})}))}},{name:"Pack Code",minWidth:"50px",sortable:!0,selector:function(e){var t;return null===e||void 0===e||null===(t=e.group_items)||void 0===t?void 0:t.map((function(e){return Object(N.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.pack_code||"--"})}))}},{name:"Created By",minWidth:"150px",sortable:!0,selector:"created_by"},{name:"Created At",minWidth:"250px",sortable:!0,selector:function(e){return e.created_at?Object(k.b)(e.created_at):null}},{name:"Status",minWidth:"150px",sortable:!0,selector:function(e){return 1===e.status?Object(N.jsx)(y.a,{color:"light-success",children:"Active"}):Object(N.jsx)(y.a,{color:"light-danger",children:"Pending"})}},{name:"Action",minWidth:"150px",selector:function(e){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("span",{title:"Edit",children:Object(N.jsx)(x.a,{size:15,color:"#3b3acb",style:{cursor:"pointer"},onClick:function(t){return a=e,localStorage.setItem("datapackInfo",JSON.stringify(a)),void c.push("/editDatapack");var a}})})," \xa0\xa0",Object(N.jsx)("span",{title:"Delete",children:Object(N.jsx)(v.a,{size:15,color:"red",style:{cursor:"pointer"},onClick:function(t){return function(e,t){return e.preventDefault(),T.fire(Object(f.a)({title:"Do you want to Delete",text:"Information will be delete when another user will approve this operation.",icon:"warning",allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,confirmButtonText:"Yes",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"},showLoaderOnConfirm:!0,preConfirm:function(){return h.a.datapackGroupDelete({id:t.id}).then((function(e){console.log(e),Object(C.c)({data:{message:e.data.message}}),r(n+1)})).catch((function(e){Object(C.a)(e),console.log(e.response)}))},buttonsStyling:!1},"allowOutsideClick",(function(){return!D.a.isLoading()}))).then((function(e){e.isConfirmed}))}(t,e)}})})]})}}];return Object(N.jsx)(o.Fragment,{children:Object(N.jsx)(L.a,{column:i,TableData:t,TableDataLoading:a})})},P=(a(528),a(638),function(e){var t=e.datapackGroupList,a=(e.rule_type,e.TableDataLoading);e.setgroupIdForView,e.setref_id;console.log(t);var r=[{name:"Group Title",minWidth:"200px",sortable:!0,selector:"group_title"},{name:"Operator",minWidth:"50px",sortable:!0,selector:function(e){var t;return null===e||void 0===e||null===(t=e.group_item)||void 0===t?void 0:t.map((function(e){return Object(N.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:null===e||void 0===e?void 0:e.keyword})}))}},{name:"Pack Code",minWidth:"50px",sortable:!0,selector:function(e){var t;return null===e||void 0===e||null===(t=e.group_item)||void 0===t?void 0:t.map((function(e){return Object(N.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.pack_code||"--"})}))}},{name:"Created By",minWidth:"150px",sortable:!0,selector:"created_by"},{name:"Created At",minWidth:"250px",sortable:!0,selector:function(e){return e.created_at?Object(k.b)(e.created_at):null}}];return Object(N.jsx)(o.Fragment,{children:Object(N.jsx)(L.a,{column:r,TableData:t,TableDataLoading:a})})}),I=a(1550),B=a(1672),W=a(533),G=a(536),R=a(531),F=a(484),H=a(485),z=a(486),U=a(555),V=a(502),J=function(e){var t=e.modal,a=e.toggleModal,c=e.datapackInfo,l=e.setRefresh,d=e.refresh,u=e.action,p=Object(o.useState)([]),j=Object(n.a)(p,2),m=j[0],O=j[1],f=Object(o.useState)(!1),x=Object(n.a)(f,2),v=x[0],y=x[1];console.log(c),Object(o.useEffect)((function(){c.id&&h.a.datapackGroupApprovalById(c.id).then((function(e){console.log(e);var t,a=[],n=Object(r.a)(e.data.payload.module_data.roles);try{var o=function(){var r=t.value,n=e.data.payload.approved.find((function(e){return e.role_id===r.role_id}));n?a.push({role_id:r.role_name,approved_by:n.approved_by,approved_at:n.approved_at}):a.push({role_id:r.role_name,approved_by:"--",approved_at:""})};for(n.s();!(t=n.n()).done;)o()}catch(c){n.e(c)}finally{n.f()}O(a)})).catch((function(e){console.log(e),Object(C.a)(e)}))}),[c.id]);return Object(N.jsxs)(W.a,{size:"xl",isOpen:t,toggle:a,style:1===u?{border:"2px solid green"}:2===u?{border:"2px solid red"}:{},children:[Object(N.jsx)(G.a,{toggle:a,children:1===u?"Approve Datapack":2===u?"Reject Datapack":"Datapack Details"}),Object(N.jsxs)(R.a,{children:[Object(N.jsx)(F.a,{children:Object(N.jsxs)(H.a,{sm:"12",children:[Object(N.jsxs)(i.a,{children:[Object(N.jsx)(s.a,{children:Object(N.jsx)(b.a,{children:"Approval Entry"})}),Object(N.jsx)(z.a,{children:Object(N.jsx)(F.a,{children:Object(N.jsx)(H.a,{sm:"12",children:Object(N.jsxs)(U.a,{children:[Object(N.jsxs)("tr",{children:[Object(N.jsx)("th",{children:"Role Name"}),Object(N.jsx)("th",{children:"Approved By"}),Object(N.jsx)("th",{children:"Approved At"})]}),0!==(null===m||void 0===m?void 0:m.length)?null===m||void 0===m?void 0:m.map((function(e,t){return Object(N.jsxs)("tr",{children:[Object(N.jsx)("td",{children:e.role_id}),Object(N.jsx)("td",{children:e.approved_by}),Object(N.jsx)("td",{children:e.approved_at?Object(k.b)(e.approved_at||""):"--"})]},t)})):Object(N.jsx)(V.a,{className:"text-center"})]})})})})]}),"`"]})}),Object(N.jsx)(F.a,{children:Object(N.jsx)(H.a,{sm:"12",className:"text-center",children:v?Object(N.jsxs)(g.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(N.jsx)(V.a,{color:"white",size:"sm"}),Object(N.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(N.jsx)(g.a.Ripple,{className:"ml-2",color:"primary",onClick:function(){y(!0),h.a.datapackGroupApprove({id:c.id,action_id:u}).then((function(e){l(!d),Object(C.c)(e),y(!1),a(),console.log(e)})).catch((function(e){console.log(e.response),y(!1),a(),Object(C.a)(e)}))},type:"button",style:{marginTop:"25px"},children:Object(N.jsx)("span",{children:"Confirm"})})})})]})]})},M=(w()(D.a),function(e){var t=e.datapackGroupList,a=(e.rule_type,e.TableDataLoading),r=e.refresh,c=e.setrefresh;e.setref_id;console.log(t);var i=Object(o.useState)(0),s=Object(n.a)(i,2),l=s[0],d=s[1],u=Object(o.useState)({}),p=Object(n.a)(u,2),j=p[0],b=p[1],g=Object(o.useState)(!1),h=Object(n.a)(g,2),m=h[0],O=h[1],f=[{name:"Group Title",minWidth:"200px",sortable:!0,selector:"group_title"},{name:"Operator",minWidth:"50px",sortable:!0,selector:function(e){var t;return null===e||void 0===e||null===(t=e.group_item)||void 0===t?void 0:t.map((function(e){return Object(N.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:null===e||void 0===e?void 0:e.keyword})}))}},{name:"Pack Code",minWidth:"50px",sortable:!0,selector:function(e){var t;return null===e||void 0===e||null===(t=e.group_item)||void 0===t?void 0:t.map((function(e){return Object(N.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.pack_code||"--"})}))}},{name:"Created By",minWidth:"150px",sortable:!0,selector:"created_by"},{name:"Created At",minWidth:"250px",sortable:!0,selector:function(e){return e.created_at?Object(k.b)(e.created_at):null}},{name:"Action",minWidth:"150px",selector:function(e){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("span",{title:"Approve",children:Object(N.jsx)(I.a,{size:15,color:"teal",style:{cursor:"pointer"},onClick:function(){b(e),O(!0),d(1)}})}),"\xa0\xa0",Object(N.jsx)("span",{title:"Reject",children:Object(N.jsx)(B.a,{size:15,color:"red",style:{cursor:"pointer"},onClick:function(t){b(e),O(!0),d(2)}})})]})}}];return Object(N.jsxs)(o.Fragment,{children:[Object(N.jsx)(L.a,{column:f,TableData:t,TableDataLoading:a}),Object(N.jsx)(J,{modal:m,toggleModal:function(){return O(!m)},datapackInfo:j,refresh:r,setRefresh:c,action:l})]})});t.default=function(){var e=localStorage.getItem("username"),t=Object(o.useState)([]),a=Object(n.a)(t,2),f=a[0],x=a[1],v=Object(o.useState)([]),k=Object(n.a)(v,2),y=k[0],_=k[1],D=Object(o.useState)([]),E=Object(n.a)(D,2),w=E[0],L=E[1],S=Object(o.useState)(!0),T=Object(n.a)(S,2),I=T[0],B=T[1],W=Object(o.useState)(null),G=Object(n.a)(W,2),R=G[0],F=G[1],H=Object(o.useState)(null),z=Object(n.a)(H,2),U=z[0],V=z[1],J=Object(o.useState)(null),K=Object(n.a)(J,2),Y=K[0],q=K[1],Q=Object(o.useState)(!1),X=Object(n.a)(Q,2),Z=X[0],$=X[1],ee=Object(o.useState)("1"),te=Object(n.a)(ee,2),ae=te[0],re=te[1],ne=function(e){return re(e)};return Object(o.useEffect)((function(){h.a.datapackGroupList().then((function(e){console.log("datapack",e),B(!1),x(e.data.payload)})).catch((function(e){Object(C.a)(e),console.log(e),B(!1)})),h.a.datapackGroupPendingList().then((function(t){var a,n=[],o=[],c=Object(r.a)(t.data.payload);try{for(c.s();!(a=c.n()).done;){var i=a.value;i.modified_by===e?n.push(i):o.push(i)}}catch(s){c.e(s)}finally{c.f()}B(!1),_([].concat(n)),L([].concat(o))})).catch((function(e){Object(C.a)(e),console.log(e),B(!1)}))}),[Z]),Object(N.jsx)(o.Fragment,{children:R?Object(N.jsx)(SKURuleEditPage,{refresh:Z,setrefresh:$,groupEditData:R,setgroupEditData:F}):U?Object(N.jsx)(ViewTempDetails,{setgroupIdForView:V,groupIdForView:U,ref_id:Y}):Object(N.jsxs)(o.Fragment,{children:[Object(N.jsx)(i.a,{children:Object(N.jsx)(s.a,{children:Object(N.jsxs)(l.a,{tabs:!0,children:[Object(N.jsx)(d.a,{children:Object(N.jsx)(u.a,{active:"1"===ae,onClick:function(){return ne("1")},children:Object(N.jsx)("span",{className:"align-middle d-none d-sm-block",children:"Datapack Group List"})})}),O.j.includes(34)&&Object(N.jsx)(d.a,{children:Object(N.jsx)(u.a,{active:"2"===ae,onClick:function(){return ne("2")},children:Object(N.jsx)("span",{className:"align-middle d-none d-sm-block",children:"My Pending"})})}),O.j.includes(34)&&Object(N.jsx)(d.a,{children:Object(N.jsx)(u.a,{active:"3"===ae,onClick:function(){return ne("3")},children:Object(N.jsx)("span",{className:"align-middle d-none d-sm-block",children:"Approve"})})})]})})}),Object(N.jsx)(i.a,{children:Object(N.jsxs)(p.a,{activeTab:ae,children:[Object(N.jsx)(j.a,{tabId:"1",children:Object(N.jsxs)(i.a,{children:[Object(N.jsxs)(s.a,{className:"border-bottom",children:[Object(N.jsx)(b.a,{tag:"h4",children:"Datapack"}),Object(N.jsx)("div",{children:O.j.includes(16)&&Object(N.jsx)(g.a.Ripple,{className:"ml-2",color:"primary",tag:m.b,to:"/createDatapack",children:Object(N.jsxs)("div",{className:"d-flex align-items-center",children:[Object(N.jsx)(c.a,{size:17,style:{marginRight:"5px"}}),Object(N.jsx)("span",{children:"Create Datapack"})]})})})]}),Object(N.jsx)(A,{datapackGroupList:f,TableDataLoading:I,refresh:Z,setrefresh:$,setgroupEditData:F})]})}),Object(N.jsx)(j.a,{tabId:"2",children:Object(N.jsx)(P,{datapackGroupList:y,TableDataLoading:I,setgroupIdForView:V,setref_id:q})}),Object(N.jsx)(j.a,{tabId:"3",children:Object(N.jsx)(M,{datapackGroupList:w,TableDataLoading:I,refresh:Z,setrefresh:$,setgroupIdForView:V,setref_id:q})})]})})]})})}},472:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return c}));a(0);var r=a(127),n=function(e){try{var t=e.response;404===t.status||401===t.status||400===t.status||500===t.status||409===t.status?r.f.error(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):r.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){r.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},o=function(e){try{var t=e.response;404!==t.status&&401!==t.status&&400!==t.status||r.f.error(t.data.errors?t.data.errors[Object.keys(t.data.errors)[0]]:t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){r.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},c=function(e){var t=e.data.message||"success";r.f.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},479:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return l}));var r=a(476),n=a(477),o={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},c=function(e){return new Date(e).toLocaleDateString(void 0,o)},i=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},s=function(){var e=Object(n.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t){e.next=4;break}return window.location.href="/Adminlogin",e.next=4,localStorage.clear();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e,t,a){var r=document.createElement("a"),n=function(e){var a;return a="",a+=t.join(","),a+="\n",e.forEach((function(e){var r=0;t.forEach((function(t){r>0&&(a+=","),a+=e[t],r++})),a+="\n"})),a}(e);if(null!==n){var o=JSON.parse(localStorage.getItem("userData")),c="".concat(a,"_").concat((new Date).toISOString(),"_").concat(o.fullname.replaceAll(/\s/g,""),".csv");n.match(/^data:text\/csv/i)||(n="data:text/csv;charset=utf-8,".concat(n)),r.setAttribute("href",encodeURI(n)),r.setAttribute("download",c),r.click()}}},500:function(e,t,a){"use strict";var r=a(16),n=a(0),o=a(1552),c=a(502),i=a(499),s=a.n(i),l=a(501),d=a.n(l),u=a(6);t.a=function(e){var t=e.column,a=e.TableData,i=e.TableDataLoading,l=Object(n.useState)(0),p=Object(r.a)(l,2),j=p[0],b=p[1];return Object(u.jsx)(n.Fragment,{children:Object(u.jsx)(d.a,{noHeader:!0,pagination:!0,columns:t,paginationPerPage:10,className:"react-dataTable",sortIcon:Object(u.jsx)(o.a,{size:10}),paginationDefaultPage:j+1,paginationComponent:function(){return Object(u.jsx)(s.a,{previousLabel:"",nextLabel:"",forcePage:j,onPageChange:function(e){return function(e){b(e.selected)}(e)},pageCount:a.length?a.length/10:1,breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"})},data:a,progressPending:i,progressComponent:Object(u.jsx)(c.a,{color:"primary"}),responsive:!0,pointerOnHover:!0,highlightOnHover:!0,striped:!0})})}},638:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return s}));var r={1:{title:"Active",color:"light-success "},0:{title:"Pending",color:"light-primary"},5:{title:"Stopped",color:"light-danger"},11:{title:"Unpaid",color:"light-primary"}},n={1:{title:"Active",color:"light-success "},0:{title:"In-Active",color:"light-primary"}},o={Insert:{title:"Insert",color:"light-success "},Update:{title:"Update",color:"light-primary"},Delete:{title:"Delete",color:"light-danger"},INSERT:{title:"INSERT",color:"light-success "},UPDATE:{title:"UPDATE",color:"light-primary"},DELETE:{title:"DELETE",color:"light-danger"}},c=function(e){return r[e]||{title:"N/A",color:"light-danger"}},i=function(e){return n[e]||{title:"N/A",color:"light-danger"}},s=function(e){return o[e]||{title:"N/A",color:"light-danger"}}}}]);
//# sourceMappingURL=342.cdc5e0f6.chunk.js.map