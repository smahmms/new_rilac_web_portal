(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[323],{1274:function(e,a,o){"use strict";o(0),o(1275);var t=o(47),c=o(6);a.a=function(e){var a=e.style;return Object(c.jsx)("div",{className:"background",style:a,children:Object(c.jsx)("img",{src:t.a.app.appLogoImage,alt:"logo",style:{height:"90px",width:"90px"}})})}},1275:function(e,a,o){},1475:function(e,a,o){"use strict";var t=o(1),c=o(0),s=o(1751),l=o.n(s),n=o(6);a.a=function(e){var a=e.appId,o=e.userInput,s=e.setUserInput,r=e.setHaveFacebookResponse,i=Object(c.useRef)();return Object(n.jsxs)(c.Fragment,{children:[Object(n.jsx)("div",{style:{display:"none"},children:Object(n.jsx)(l.a,{appId:a,autoLoad:!1,fields:"name,email,picture",scope:"public_profile,pages_manage_posts,pages_manage_metadata",cookie:!1,state:"ren",callback:function(e){e.userID&&(r(!0),console.log("facebook login response : ",e),s(Object(t.a)(Object(t.a)({},o),{},{facebook_user_id:e.userID,user_access_token:e.accessToken})))},render:function(e){return Object(n.jsx)("button",{type:"button",onClick:e.onClick,ref:i,children:"FB Login"})}})}),Object(n.jsxs)("div",{style:{textAlign:"center"},className:"facebookconnectDiv",children:[Object(n.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAUwSURBVHgB1ZpdTBxVFMfPuTOwUL52rdrF2JQ+kDRpiokopqmJlFp9UHxpjTGxEW2NDz6IaS0kBgV5YUEifbCJTUD6amzig5oYo+JTk0pJDDyYyANEAoNQlu/dZWfu8dwtW752lt3pLLv8EnZ25s6duf/7ce7Zc0BwCX9jqALyorUkoEoAnSYALwCWcZFPlfO5iUATfG2MTwdJ0hBq8rbR4RsDF0B4CLyNQW9Bvv4hIL3Op8fBETiMhD+QiN54GFGOhPivLNWSBi3cw3XgLv2AVpsTQWkJKb+8+Cjp+BVPlHN8qkGG4Eb1gmm1T3X7xtOokxqHmhff5YnejbG5vyeMgYQ2o6u0P5WbUxLib1oOAMirkAUQsGcqUPLR7vclQS3mwnztF0J4BrIJ4VB4zTwz3+Obt7tF2BXELJJH+znrIhRIT6u2qDbZ3WIrpNCj/8qHGsgdagp4dtgVJpxa5U1LXxJQI2SAx4tRlh1AOJCP0pIAEZP0e8tkzq2SntoTRKcRKG7afnWHEP/Hiw08Tt+Aixw7JMy3nsvTXjuRB4+VYMLOkwRydpno1eur2r9BmfR5RHBpurO0d/O1LQ8tvxw8Qro2wF8rwCUuncqXV8/mi5KC1Cx9TWAFdhPCT5pfNqFyqbt0Nn5tyxqRutYCLor4vL6A2us9KYtIFeXHFcU25g0eCPE3Byv4dRfBJS7U5Mn3TuW5q2ALdI7bXBs/2xgR0j4Dl1CroLHOIyCzaNzmlvhJ7GVqNPjQAC7x0jFdPuHN4GBsUBffW2ImD0l7n8A96qv0XR+3GCb4aSRKY3NgsQk249fvrUgPpOEDFuQLtU20xoSwjXjFzf477BNJPeOJeaDzN1ZhfE6q1+rrf85APM+frWJ9kZ8AF3mkCM1k5c3fh+Ii3OB4+SehI4IscRJcxqOjbQ8vR4j+HE+qM21oLXpaIFI17CHBVcLFELhqCQjpKQEo9lRIRkCoVea3AvY5/OPLyyMCT8L+p0xnx8WR6fPoYHrybK1TQbK6pYUYTlyCvH5i+0i6+NDftOhoL3yhUoebbxcmbBCLTCokYkLCesOTlqy/vnoAHKBGIwjr0cB0ELh7g+2wq2cskFO7bKrFvgA5wsikdOpoTgginIcc4W/DAoeMcQ/IAcgRZlccuq4k7woOIP8FOUA4SvKfGQlOIIF3BWjWAOQAozOSTS85WiMI8nbM5/E3L41waCKttECRB+XRgyJhF/ZdKNQP+xK7UxwpkW/2hXbUC5skRv9zsthx2AiUVN3fDKX8jveitISsREiMTFppvzgUdVbPDk5t/KiOsQeG12QP7FMIra/VMSZkPTj8G+w/+uNJoY0hRqudPx0b8qzA2a341wdCWNkAl9yCfQKB6N2cotuy6LCQPuAtKWd2entoTJjR9s1XtgiZauVYKskrkOsgtm3PL+4wg9Od3l4ety7IUTjdcc3o2JlXTGjPjc5SzhfSIOQY/JN2aDpQljBvY7sxhSPyLB/uQO5wJxQxz9gV2gpRe0s4Yr2sEpGQfQZVWxwlQxWqotFZUs1uwDXIFii7jEDps8lEKFLyeabUvER4R5k92CN4Uc+rFJvR4U0pv5+y86YsBZqylj3MPsggFPMu6NtVEyu35wmTkZYXqmy3EfBeZNfgKLv9N8FtCH5HtF40AmVvbM4PpoKjmNa6a9DAkfxWlVtZT0s4i+gTjICgW+Gw7NltHSTDtWCySk+QRScRRPXIp2XVB4tjoVgVxYx3lgo7LYzOUPD5L5b+QCHVT+wBt/7x7H8V+e72tzhGsAAAAABJRU5ErkJggg=="}),Object(n.jsx)("p",{style:{paddingTop:10},children:"Facebook Access"}),o.page_name?Object(n.jsx)("p",{style:{marginTop:"-10px"},children:o.page_name}):null,Object(n.jsx)("button",{type:"button",className:"facebbokConnectBtn",onClick:function(){return i.current.click()},children:Object(n.jsx)("p",{children:o.page_access_token?"Connected":"Connect"})})]})]})}},2465:function(e,a,o){"use strict";o.r(a);var t=o(476),c=o(477),s=o(21),l=o(1),n=o(16),r=o(478),i=o(487),d=o(0),p=o(495),u=o(483),b=o(482),g=o(480),_=o(1485),j=o(496),f=o(486),h=o(484),O=o(485),k=o(634),v=o(1488),m=o(489),y=o(1513),x=o(470),A=o(502),C=o(472),w=o(1475),I=o(1274),B=o(6);a.default=function(){Object(d.useRef)();var e,a,o=Object(d.useRef)(),N=(JSON.parse(localStorage.getItem("userData")),Object(d.useState)(!1)),P=Object(n.a)(N,2),R=P[0],F=P[1],L=Object(d.useState)(),S=Object(n.a)(L,2),T=(S[0],S[1],Object(d.useState)(!1)),U=Object(n.a)(T,2),Q=(U[0],U[1],Object(d.useState)([])),J=Object(n.a)(Q,2),E=J[0],H=J[1],q=Object(d.useState)(!1),D=Object(n.a)(q,2),W=D[0],M=D[1],V=Object(d.useState)(null),Y=Object(n.a)(V,2),K=Y[0],X=Y[1],G=Object(d.useState)([]),z=Object(n.a)(G,2),Z=z[0],$=z[1],ee=Object(d.useState)(!0),ae=Object(n.a)(ee,2),oe=ae[0],te=ae[1],ce=Object(d.useState)({pageId:"",instagram_actor_id:"",allow_admin_facebook_page_post:!1,allow_other_merchant_facebook_page_post:!1,facebook_pagepost_page_id:"",facebook_user_id:"",user_access_token:"",facebook_page_category_localuid:"",facebookpage_subcategory_localuid:"",page_name:null,page_access_token:null}),se=Object(n.a)(ce,2),le=se[0],ne=se[1],re=Object(d.useState)({fb_page:!0}),ie=Object(n.a)(re,2),de=ie[0],pe=ie[1],ue=function(){var e=Object(c.a)(Object(t.a)().mark((function e(){return Object(t.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("useBMStoken",!1),localStorage.setItem("usePMStoken",!1),e.next=4,r.a.getFbpageCategory().then((function(e){console.log(e),H(e.data.payload.map((function(e){return{value:{id:e.uid,subcategory:e.subcategory},label:null===e||void 0===e?void 0:e.name}})))})).catch((function(e){Object(C.a)(e),console.log(e.response)}));case 4:return e.next=6,r.a.getMerchentCampaignSettings().then((function(e){var a,o,t,c,s,l,n,r,i,d,p,u,b;(console.log(e),e.data.payload.facebook_page_category_localuid&&e.data.payload.facebookpage_subcategory_localuid)&&$(null===(b=E.find((function(a){var o;return a.value.id===(null===(o=e.data.payload)||void 0===o?void 0:o.facebook_page_category_localuid)})))||void 0===b?void 0:b.value.subcategory);ne({pageId:null===(a=e.data.payload)||void 0===a?void 0:a.page_id,instagram_actor_id:null===(o=e.data.payload)||void 0===o?void 0:o.instagram_actor_id,allow_admin_facebook_page_post:null===(t=e.data.payload)||void 0===t?void 0:t.allow_admin_facebook_page_post,allow_other_merchant_facebook_page_post:null===(c=e.data.payload)||void 0===c?void 0:c.allow_other_merchant_facebook_page_post,facebook_pagepost_page_id:null===(s=e.data.payload)||void 0===s?void 0:s.global_facebook_page_id,user_access_token:null===(l=e.data.payload)||void 0===l?void 0:l.user_access_token,facebook_page_category_localuid:null===(n=e.data.payload)||void 0===n?void 0:n.facebook_page_category_localuid,facebookpage_subcategory_localuid:null===(r=e.data.payload)||void 0===r?void 0:r.facebookpage_subcategory_localuid,facebook_user_id:null===(i=e.data.payload)||void 0===i?void 0:i.facebook_user_id,page_name:(null===(d=e.data.payload)||void 0===d?void 0:d.page_name)||null,page_access_token:(null===(p=e.data.payload)||void 0===p?void 0:p.page_access_token)||null}),null!==(u=e.data.payload)&&void 0!==u&&u.global_facebook_page_id||X("This feature will active after create a facebook app by this site admin!"),te(!1)})).catch((function(e){te(!1),Object(C.a)(e),console.log(e.response)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(d.useEffect)((function(){ue()}),[]);return Object(B.jsxs)(d.Fragment,{children:[oe&&Object(B.jsx)(u.a,{className:"p-2 position-relative",style:{height:"80vh"},children:Object(B.jsx)(I.a,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50% ,-50%)"}})}),!oe&&Object(B.jsxs)(u.a,{children:[Object(B.jsxs)(b.a,{className:"border-bottom",children:[Object(B.jsx)(g.a,{tag:"h4",children:"Facebook Page"}),Object(B.jsx)(_.a,{onChange:function(e){e.target.checked?(pe(Object(l.a)(Object(l.a)({},de),{},{fb_page:!0})),X(null),M(!1)):pe(Object(l.a)(Object(l.a)({},de),{},{fb_page:!1}))},type:"switch",id:"fb_page",inline:!0,label:"",defaultChecked:!0})]}),Object(B.jsx)(j.a,{style:{width:"100%"},onSubmit:function(e){e.preventDefault();var a=le.facebook_pagepost_page_id,o=le.allow_admin_facebook_page_post,t=le.allow_other_merchant_facebook_page_post,c=le.facebook_user_id,s=le.app_secret,l=le.user_access_token,n=le.pageId,i=le.facebook_page_category_localuid,d=le.facebookpage_subcategory_localuid;F(!0),r.a.updateFacebookPageCrd({allow_admin_facebook_page_post:o,allow_other_merchant_facebook_page_post:t,app_secret:s,facebook_pagepost_page_id:a,facebook_user_id:c,user_access_token:l,pageId:n,facebook_page_category_localuid:i,facebookpage_subcategory_localuid:d}).then((function(e){console.log(e),F(!1),Object(C.c)(e)})).catch((function(e){var a,o;X((null===(a=e.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.message)||"Error Occurred !"),console.log(e.response),F(!1)}))},autoComplete:"off",children:de.fb_page&&Object(B.jsx)(f.a,{style:{paddingTop:"15px"},children:Object(B.jsxs)(h.a,{children:[K?Object(B.jsx)(O.a,{md:"12",sm:"12",children:Object(B.jsx)(k.a,{color:"danger",children:Object(B.jsxs)("div",{className:"alert-body",children:[" ",K," "]})})}):null,W?Object(B.jsxs)(d.Fragment,{children:[Object(B.jsx)(O.a,{sm:"4",children:Object(B.jsxs)(v.a,{children:[Object(B.jsxs)(m.a,{for:"pageId",children:["Page Id",Object(B.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(B.jsx)(y.a,{type:"text",name:"pageId",id:"pageId",value:(null===le||void 0===le?void 0:le.pageId)||"",onChange:function(e){ne(Object(l.a)(Object(l.a)({},le),{},Object(s.a)({},e.target.name,e.target.value)))},required:!0,placeholder:"page id"})]})}),Object(B.jsx)(O.a,{sm:"4",children:Object(B.jsxs)(v.a,{children:[Object(B.jsxs)(m.a,{for:"facebook_page_category_localuid",children:["Facebook Page Category",Object(B.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(B.jsx)(p.a,{ref:o,theme:i.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",value:{value:le.facebook_page_category_localuid,label:(null===(e=E.find((function(e){return e.value.id===le.facebook_page_category_localuid})))||void 0===e?void 0:e.label)||"select a category"},onChange:function(e){ne(Object(l.a)(Object(l.a)({},le),{},{facebook_page_category_localuid:e.value.id})),$(null===e||void 0===e?void 0:e.value.subcategory)},options:E,isLoading:0===E.length}),Object(B.jsx)(y.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return o.current.select.focus()},value:le.facebook_page_category_localuid||"",onChange:function(e){return""}})]})}),0!==(null===Z||void 0===Z?void 0:Z.length)&&Object(B.jsx)(O.a,{sm:"4",children:Object(B.jsxs)(v.a,{children:[Object(B.jsx)(m.a,{for:"facebookpage_subcategory_localuid",children:"Facebook page Sub Category"}),Object(B.jsx)(p.a,{theme:i.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",value:{value:le.facebookpage_subcategory_localuid,label:(null===Z||void 0===Z||null===(a=Z.find((function(e){return e.uid===le.facebookpage_subcategory_localuid})))||void 0===a?void 0:a.name)||"select a subcategory"},onChange:function(e){ne(Object(l.a)(Object(l.a)({},le),{},{facebookpage_subcategory_localuid:e.value}))},isClearable:!0,options:null===Z||void 0===Z?void 0:Z.map((function(e){return{value:e.uid,label:e.name}})),isLoading:0===(null===Z||void 0===Z?void 0:Z.length)})]})}),Object(B.jsx)(O.a,{sm:"4",className:"mb-2 mt-1",children:Object(B.jsx)(v.a,{children:Object(B.jsx)(_.a,{type:"switch",onChange:function(e){e.target.checked?ne(Object(l.a)(Object(l.a)({},le),{},{allow_admin_facebook_page_post:!0})):ne(Object(l.a)(Object(l.a)({},le),{},{allow_admin_facebook_page_post:!1}))},id:"allow_admin_facebook_page_post",label:"Allow admin facebook page post?",checked:null===le||void 0===le?void 0:le.allow_admin_facebook_page_post})})}),Object(B.jsx)(O.a,{sm:"4",className:"mb-2 mt-1",children:Object(B.jsx)(v.a,{children:Object(B.jsx)(_.a,{type:"switch",onChange:function(e){e.target.checked?ne(Object(l.a)(Object(l.a)({},le),{},{allow_other_merchant_facebook_page_post:!0})):ne(Object(l.a)(Object(l.a)({},le),{},{allow_other_merchant_facebook_page_post:!1}))},id:"allow_other_merchant_facebook_page_post",label:"Allow other merchant facebook page post?",checked:null===le||void 0===le?void 0:le.allow_other_merchant_facebook_page_post})})}),Object(B.jsx)(O.a,{sm:"12",className:"text-center mt-2",children:R?Object(B.jsxs)(x.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(B.jsx)(A.a,{color:"white",size:"sm"}),Object(B.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(B.jsx)(x.a.Ripple,{className:"ml-2",color:"primary",type:"submit",children:Object(B.jsx)("span",{children:le.page_access_token?"Update":"Submit"})})})]}):Object(B.jsx)(d.Fragment,{children:Object(B.jsx)(O.a,{sm:"3",className:"d-flex justify-content-right",children:Object(B.jsx)(w.a,{appId:le.facebook_pagepost_page_id,userInput:le,setUserInput:ne,setHaveFacebookResponse:M})})})]})})})]})]})}},472:function(e,a,o){"use strict";o.d(a,"a",(function(){return c})),o.d(a,"b",(function(){return s})),o.d(a,"c",(function(){return l}));o(0);var t=o(127),c=function(e){try{var a=e.response;404===a.status||401===a.status||400===a.status||500===a.status||409===a.status?t.f.error(a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):t.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){t.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},s=function(e){try{var a=e.response;404!==a.status&&401!==a.status&&400!==a.status||t.f.error(a.data.errors?a.data.errors[Object.keys(a.data.errors)[0]]:a.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(a){t.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},l=function(e){var a=e.data.message||"success";t.f.success(a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}}}]);
//# sourceMappingURL=323.c6e7f8eb.chunk.js.map