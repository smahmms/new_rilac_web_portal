(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[327],{2393:function(e,t,a){"use strict";a.r(t);var c=a(121),n=a(476),r=a(497),s=a(477),i=a(21),l=a(1),o=a(16),j=a(478),d=(a(518),a(487)),u=a(0),b=a(1553),h=a(660),m=a(474),p=a(495),g=a(470),O=a(496),x=a(483),y=a(482),f=a(480),v=a(486),C=a(484),S=a(485),N=a(1488),T=a(489),w=a(1513),M=a(1485),I=a(502),R=a(490),D=a.n(R),P=a(481),k=a.n(P),A=a(770),q=a(534),B=a(479),H=a(472),L=a(500),G=a(6);k()(D.a);t.default=function(){var e,t,a,R,D=Object(h.g)(),P=Object(u.useRef)(),k=Object(u.useRef)(),E=Object(u.useRef)(),F=Object(u.useRef)(),Q=Object(u.useRef)(),_=Object(u.useState)(!1),W=Object(o.a)(_,2),U=W[0],z=W[1],J=Object(u.useState)(!0),K=Object(o.a)(J,2),X=K[0],V=K[1],Y=Object(u.useState)([]),Z=Object(o.a)(Y,2),$=Z[0],ee=Z[1],te=Object(u.useState)([]),ae=Object(o.a)(te,2),ce=ae[0],ne=ae[1],re=Object(u.useState)([]),se=Object(o.a)(re,2),ie=se[0],le=se[1],oe=Object(u.useState)({}),je=Object(o.a)(oe,2),de=je[0],ue=je[1],be=Object(u.useState)({}),he=Object(o.a)(be,2),me=he[0],pe=he[1],ge=Object(u.useState)({}),Oe=Object(o.a)(ge,2),xe=Oe[0],ye=Oe[1],fe=Object(u.useState)([]),ve=Object(o.a)(fe,2),Ce=ve[0],Se=ve[1],Ne=Object(u.useState)([]),Te=Object(o.a)(Ne,2),we=Te[0],Me=Te[1],Ie=Object(u.useState)([]),Re=Object(o.a)(Ie,2),De=Re[0],Pe=Re[1],ke=Object(u.useState)([]),Ae=Object(o.a)(ke,2),qe=Ae[0],Be=Ae[1],He=Object(u.useState)({}),Le=Object(o.a)(He,2),Ge=Le[0],Ee=Le[1],Fe=Object(u.useState)(!1),Qe=Object(o.a)(Fe,2),_e=Qe[0],We=Qe[1],Ue=Object(u.useState)({campaignName:"",isMultiService:!1,multiService:[],serviceId:"",groupId:0,mapGroupId:0,groupType:0,mapGroupType:0,commissionId:0,receiver:"",isActive:!0,isSubCategory:!1,subTypes:[],isSameUser:!1,campaignMsg:"",qtExpireMsg:"",qtPartialMsg:"",alertDate:"",isDynamicCamp:!1,dynamicCampExpire:0,isHierarchy:!1,hrchyPercentage:""}),ze=Object(o.a)(Ue,2),Je=ze[0],Ke=ze[1],Xe=Object(u.useState)({}),Ve=Object(o.a)(Xe,2),Ye=Ve[0],Ze=Ve[1],$e=function(e){Ke(Object(l.a)(Object(l.a)({},Je),{},Object(i.a)({},e.target.name,e.target.value)))};Object(u.useEffect)((function(){var e=function(){var e=Object(s.a)(Object(n.a)().mark((function e(){var t,a,c;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("useBMStoken",!1),localStorage.setItem("usePMStoken",!1),e.next=4,j.a.getCentralGroup().then((function(e){console.log(e);var t,a=[],c=Object(r.a)(e.data.payload);try{for(c.s();!(t=c.n()).done;){var n=t.value;n.is_approved&&4!==n.type&&n.group_member_count&&a.push(n)}}catch(s){c.e(s)}finally{c.f()}le(a)})).catch((function(e){Object(H.a)(e),console.log(e.response)}));case 4:return localStorage.setItem("useBMStoken",!0),e.next=7,j.a.currentRealtimeRuleList().then((function(e){var t;console.log(e),ee(null===(t=e.data.filter((function(e){return!e.isDefault})))||void 0===t?void 0:t.sort((function(e,t){return parseInt(t.commissionId)-parseInt(e.commissionId)}))),localStorage.setItem("useBMStoken",!1)})).catch((function(e){Object(H.a)(e),console.log(e),localStorage.setItem("useBMStoken",!1)}));case 7:return(t=new Headers).append("Accept","application/json"),a=window.btoa("".concat(q.g,":").concat(q.e)),c="Basic ".concat(a),t.append("Authorization",c),e.next=14,fetch(new Request(A.a.hierarchyEndpoint,{method:"GET",headers:t,credentials:"include"})).then(function(){var e=Object(s.a)(Object(n.a)().mark((function e(t){var a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:a=e.sent,console.log("hierarchyList",a),Be(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Object(H.a)(e),console.log(e)}));case 14:return localStorage.setItem("useBMStoken",!0),e.next=17,j.a.getServiceList().then((function(e){console.log(e),ne(e.data),localStorage.setItem("useBMStoken",!1)})).catch((function(e){Object(H.a)(e),console.log(e),localStorage.setItem("useBMStoken",!1)}));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(u.useEffect)((function(){""===Je.serviceId||(Ke(Object(l.a)(Object(l.a)({},Je),{},{isHierarchy:!1,receiver:""})),Ee({}),We(!1),localStorage.setItem("useBMStoken",!0),j.a.getServiceLogicByServiceId(Je.serviceId).then((function(e){console.log(e),ue(e.data),0===e.data.recGroupType?Me(ie):Me(Object(c.a)(null===ie||void 0===ie?void 0:ie.filter((function(t){return t.type===e.data.recGroupType})))),0===e.data.senGroupType?Se(ie):Se(Object(c.a)(null===ie||void 0===ie?void 0:ie.filter((function(t){return t.type===e.data.senGroupType})))),localStorage.setItem("useBMStoken",!1)})).catch((function(e){console.log(e),localStorage.setItem("useBMStoken",!1)})))}),[Je.serviceId]),Object(u.useEffect)((function(){"s"===Je.receiver?2===de.senGroupType||0===de.senGroupType?We(!0):(We(!1),Ke(Object(l.a)(Object(l.a)({},Je),{},{isHierarchy:!1})),Ee({})):"r"===Je.receiver?2===de.recGroupType||0===de.senGroupType?We(!0):(We(!1),Ke(Object(l.a)(Object(l.a)({},Je),{},{isHierarchy:!1})),Ee({})):"b"===Je.receiver&&(2===de.recGroupType||0===de.senGroupType||2===de.senGroupType||0===de.senGroupType?We(!0):(We(!1),Ke(Object(l.a)(Object(l.a)({},Je),{},{isHierarchy:!1})),Ee({})))}),[Je.receiver]);var et=function(e){for(var t=0,a=0,c=e;c.match(/<TransactionTime>/)||c.match(/<TransactionId>/)||c.match(/<RewordAmount>/)||c.match(/<Msisdn>/)||c.match(/<TransactionAmount>/)||c.match(/<CampaignName>/);){var n,r;if(c.match(/<TransactionTime>/)&&(t+=19,a+=2,c=c.replace(/<TransactionTime>/,"")),c.match(/<TransactionId>/)&&(t+=30,a+=15,c=c.replace(/<TransactionId>/,"")),c.match(/<RewordAmount>/)&&(t+=10,a-=4,c=c.replace(/<RewordAmount>/,"")),c.match(/<Msisdn>/)&&(t+=11,a-=3,c=c.replace(/<Msisdn>/,"")),c.match(/<TransactionAmount>/)&&(t+=10,a-=9,c=c.replace(/<TransactionAmount>/,"")),c.match(/<CampaignName>/))a+=(null===Je||void 0===Je||null===(n=Je.campaignName)||void 0===n?void 0:n.length)-14,t+=null===Je||void 0===Je||null===(r=Je.campaignName)||void 0===r?void 0:r.length,c=c.replace(/<CampaignName>/,"")}return{charCount:t+=c.length,actualCharReduce:a}};return Object(G.jsxs)(u.Fragment,{children:[Object(G.jsx)(g.a.Ripple,{className:"mb-1",color:"primary",tag:m.b,to:"/allCampaigns",children:Object(G.jsxs)("div",{className:"d-flex align-items-center",children:[Object(G.jsx)(b.a,{size:17,style:{marginRight:"5px"}}),Object(G.jsx)("span",{children:"Back"})]})}),Object(G.jsxs)(O.a,{style:{width:"100%"},onSubmit:function(e){e.preventDefault(),localStorage.setItem("useBMStoken",!0),z(!0);var t=Je.groupId,a=Je.mapGroupId,c=Je.groupType,n=Je.mapGroupType,r=Je.hrchyPercentage;Je.isMultiService||"s"===de.ruleProvider?(a=me.groupId?me.groupId:0,n=me.groupType?me.groupType:" ",t=xe.groupId?xe.groupId:0,c=xe.groupType?xe.groupType:" "):"r"===de.ruleProvider&&(a=xe.groupId?xe.groupId:0,n=xe.groupType?xe.groupType:" ",t=me.groupId?me.groupId:0,c=me.groupType?me.groupType:" "),r=JSON.stringify(Ge),console.log(Object(l.a)(Object(l.a)({},Je),{},{mapGroupId:a,groupType:c,groupId:t,mapGroupType:n,hrchyPercentage:r})),j.a.createCampaign(Object(l.a)(Object(l.a)({},Je),{},{mapGroupId:a,groupType:c,groupId:t,mapGroupType:n,hrchyPercentage:r})).then((function(e){z(!1),localStorage.setItem("useBMStoken",!1),Object(H.c)(e),D.push("/allCampaigns")})).catch((function(e){z(!1),localStorage.setItem("useBMStoken",!1),Object(H.a)(e),console.log(e.response)}))},autoComplete:"off",children:[Object(G.jsxs)(x.a,{children:[Object(G.jsx)(y.a,{className:"border-bottom",children:Object(G.jsx)(f.a,{tag:"h4",children:"Create Campaign"})}),Object(G.jsx)(v.a,{style:{paddingTop:"15px"},children:Object(G.jsxs)(C.a,{children:[Object(G.jsx)(S.a,{sm:"4",children:Object(G.jsxs)(N.a,{children:[Object(G.jsxs)(T.a,{for:"campaignName",children:["Campaign Name",Object(G.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(G.jsx)(w.a,{type:"text",name:"campaignName",id:"campaignName",value:Je.campaignName,onChange:$e,required:!0,maxLength:"20",placeholder:"name here..."}),Object(G.jsxs)("p",{className:"text-right",style:20===Je.campaignName.length?{margin:"2px",color:"red"}:{margin:"2px",color:"blue"},children:[20-Je.campaignName.length," characters remaining"]})]})}),!Je.isDynamicCamp&&Object(G.jsx)(S.a,{sm:"4",className:"mt-1 mb-1",children:Object(G.jsx)(M.a,{type:"switch",label:"Multi Service Alow?",id:"isMultiService",checked:Je.isMultiService,onChange:function(e){e.target.checked?(Ke(Object(l.a)(Object(l.a)({},Je),{},{isMultiService:!0,serviceId:0,isSubCategory:!1,subTypes:[]})),V(!1)):(Ke(Object(l.a)(Object(l.a)({},Je),{},{isMultiService:!1,multiService:[]})),V(!0))}})}),X&&Object(G.jsx)(S.a,{sm:"4",children:Object(G.jsxs)(N.a,{children:[Object(G.jsxs)(T.a,{for:"serviceId",children:["Service Type",Object(G.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(G.jsx)(p.a,{ref:P,theme:d.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:function(e){Ke(Object(l.a)(Object(l.a)({},Je),{},{serviceId:e.value.id})),Pe(e.value.subTypes)},options:null===ce||void 0===ce?void 0:ce.map((function(e){return{value:{id:e.serviceId,subTypes:e.subTypes},label:e.serviceKeyword}})),isLoading:0===ce.length}),Object(G.jsx)(w.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return P.current.select.focus()},value:Je.serviceId||"",onChange:function(e){return""}})]})}),X&&Object(G.jsx)(S.a,{sm:"4",className:"mt-1 mb-1",children:Object(G.jsx)(M.a,{type:"switch",label:"Allow Subtype?",id:"isSubcategory",checked:Je.isSubCategory,onChange:function(e){e.target.checked?Ke(Object(l.a)(Object(l.a)({},Je),{},{isSubCategory:!0})):Ke(Object(l.a)(Object(l.a)({},Je),{},{isSubCategory:!1,subTypes:[]}))}})}),X&&Je.isSubCategory&&Object(G.jsx)(S.a,{sm:"4",children:Object(G.jsxs)(N.a,{children:[Object(G.jsxs)(T.a,{for:"max_age",children:["Subtypes",Object(G.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(G.jsx)(p.a,{theme:d.i,isClearable:!0,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",menuPlacement:"auto",isMulti:!0,onChange:function(e){var t=e.map((function(e){return e.value}));Ke(Object(l.a)(Object(l.a)({},Je),{},{subTypes:t}))},name:"user_os",isLoading:0===(null===De||void 0===De?void 0:De.length),required:!0,options:null===De||void 0===De?void 0:De.map((function(e){return{value:e,label:e}}))})]})}),Je.isMultiService&&Object(G.jsx)(S.a,{sm:"4",children:Object(G.jsxs)(N.a,{children:[Object(G.jsxs)(T.a,{for:"service id",children:["Select Services",Object(G.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(G.jsx)(p.a,{ref:P,theme:d.i,maxMenuHeight:200,isClearable:!0,menuPlacement:"auto",isMulti:!0,className:"react-select",classNamePrefix:"select",onChange:function(e){var t=e.map((function(e){return e.value}));Ke(Object(l.a)(Object(l.a)({},Je),{},{multiService:t}))},options:null===ce||void 0===ce?void 0:ce.map((function(e){return{value:e.serviceId,label:e.serviceKeyword}})),isLoading:0===ce.length}),Object(G.jsx)(w.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return P.current.select.focus()},value:Je.multiService||[],onChange:function(e){return""}})]})}),Object(G.jsx)(S.a,{sm:"12"}),Object(G.jsx)(S.a,{sm:"4",className:"mt-1 mb-1",children:Object(G.jsx)(M.a,{type:"switch",label:"Allow Dynamic Campaign?",id:"isDynamicCamp",onChange:function(e){e.target.checked?(Ke(Object(l.a)(Object(l.a)({},Je),{},{isDynamicCamp:!0,isMultiService:!0})),V(!0)):Ke(Object(l.a)(Object(l.a)({},Je),{},{isDynamicCamp:!1,isMultiService:!1,isSubCategory:!1}))}})}),Je.isDynamicCamp&&Object(G.jsx)(S.a,{sm:"4",children:Object(G.jsxs)(N.a,{children:[Object(G.jsxs)(T.a,{for:"dynamicCampExpire",children:["Dynamic Campaign Expiry",Object(G.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(G.jsx)(w.a,{type:"number",name:"dynamicCampExpire",id:"dynamicCampExpire",value:Je.dynamicCampExpire,onChange:$e,required:!0,placeholder:"0"})]})}),Object(G.jsx)(S.a,{sm:"4",className:"mt-1 mb-1",children:Object(G.jsx)(M.a,{type:"switch",label:"Allow SameUser?",id:"isSameUser",onChange:function(e){e.target.checked?Ke(Object(l.a)(Object(l.a)({},Je),{},{isSameUser:!0})):Ke(Object(l.a)(Object(l.a)({},Je),{},{isSameUser:!1}))}})}),Object(G.jsx)(S.a,{sm:"12"}),Object(G.jsxs)(S.a,{sm:"4",children:[Object(G.jsxs)(N.a,{children:[Object(G.jsxs)(T.a,{for:"Businesses",children:["Sender Group (",null===(e=[{value:1,label:"Customer"},{value:2,label:"Agent"},{value:3,label:"Merchant"},{value:0,label:"Any"}].find((function(e){return e.value===(de.senGroupType?de.senGroupType:0)})))||void 0===e?void 0:e.label,") ","s"===de.ruleProvider||Je.isMultiService?Object(G.jsx)("span",{className:"text-danger",children:"*"}):"r"===de.ruleProvider?" (optional)":""]}),Object(G.jsx)(p.a,{ref:k,theme:d.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:function(e){pe(e?{groupId:e.value.id,groupType:e.value.type}:{groupId:0,groupType:0})},options:null===Ce||void 0===Ce?void 0:Ce.map((function(e){return{value:{id:e.id,type:e.type},label:"".concat(e.id,". ").concat(e.group_name)}})),isLoading:0===ie.length,isClearable:"r"===de.ruleProvider})]}),("s"===de.ruleProvider||Je.isMultiService)&&Object(G.jsx)(w.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return k.current.select.focus()},value:me.groupId||"",onChange:function(e){return""}})]}),Object(G.jsxs)(S.a,{sm:"4",children:[Object(G.jsxs)(N.a,{children:[Object(G.jsxs)(T.a,{for:"Businesses",children:["Receiver Group (",null===(t=[{value:1,label:"Customer"},{value:2,label:"Agent"},{value:3,label:"Merchant"},{value:0,label:"Any"}].find((function(e){return e.value===(de.recGroupType?de.recGroupType:0)})))||void 0===t?void 0:t.label,") ","r"===de.ruleProvider||Je.isMultiService?Object(G.jsx)("span",{className:"text-danger",children:"*"}):"s"===de.ruleProvider?" (optional)":""]}),Object(G.jsx)(p.a,{ref:E,theme:d.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:function(e){e?ye({groupId:e.value.id,groupType:e.value.type}):pe({groupId:0,groupType:0})},options:null===we||void 0===we?void 0:we.map((function(e){return{value:{id:e.id,type:e.type},label:"".concat(e.id,". ").concat(e.group_name)}})),isLoading:0===ie.length,isClearable:"s"===de.ruleProvider})]}),("r"===de.ruleProvider||Je.isMultiService)&&Object(G.jsx)(w.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return E.current.select.focus()},value:xe.groupId||"",onChange:function(e){return""}})]}),Object(G.jsxs)(S.a,{sm:"4",children:[Object(G.jsxs)(N.a,{children:[Object(G.jsxs)(T.a,{for:"Businesses",children:["Campaign Rule",Object(G.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(G.jsx)(p.a,{ref:F,theme:d.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:function(e){var t;Ke(Object(l.a)(Object(l.a)({},Je),{},{commissionId:e.value.commissionId,alertDate:null===(t=e.value.endDate)||void 0===t?void 0:t.replace(/ .*/g,"")})),Ze(Object(l.a)({},e.value))},options:null===$||void 0===$?void 0:$.map((function(e){return{value:Object(l.a)({},e),label:"".concat(e.commissionId,". ").concat(e.commissionRuleName)}})),isLoading:0===$.length,menuPlacement:"auto"})]}),Object(G.jsx)(w.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return F.current.select.focus()},value:Je.commissionId||"",onChange:function(e){return""}})]}),Object(G.jsx)(S.a,{md:"4",children:Object(G.jsxs)(N.a,{children:[Object(G.jsx)(T.a,{for:"alertDate",children:"Alert Date"}),Object(G.jsx)(w.a,{type:"date",min:new Date(null===(a=Ye.startDate)||void 0===a?void 0:a.replace(/ .*/g,"")).toLocaleDateString("fr-CA"),max:new Date(null===(R=Ye.endDate)||void 0===R?void 0:R.replace(/ .*/g,"")).toLocaleDateString("fr-CA"),name:"alertDate",id:"alertDate",value:Je.alertDate,onChange:$e,required:!0,placeholder:"0"})]})}),Object(G.jsxs)(S.a,{sm:"4",children:[Object(G.jsxs)(N.a,{children:[Object(G.jsxs)(T.a,{for:"receiver",children:["Reward Receiver",Object(G.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(G.jsx)(p.a,{ref:Q,theme:d.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:function(e){Ke(Object(l.a)(Object(l.a)({},Je),{},{receiver:e.value}))},options:[{value:"s",label:"Sender"},{value:"r",label:"Receiver"},{value:"b",label:"both"}]})]}),Object(G.jsx)(w.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return Q.current.select.focus()},value:Je.receiver||"",onChange:function(e){return""}})]}),Object(G.jsx)(S.a,{sm:"4",children:Object(G.jsxs)(N.a,{children:[Object(G.jsxs)(T.a,{for:"campaignMsg",children:["Campaign Message",Object(G.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(G.jsx)(w.a,{type:"textarea",name:"campaignMsg",id:"campaignMsg",value:Je.campaignMsg,onChange:$e,maxLength:(160-et(Je.campaignMsg).actualCharReduce).toString(),required:!0,placeholder:"message here..."}),Object(G.jsxs)("p",{className:"text-right",style:160===et(Je.campaignMsg).charCount?{margin:"2px",color:"red"}:{margin:"2px",color:"blue"},children:[160-et(Je.campaignMsg).charCount," characters remaining"]})]})}),(Ye.isRxQuota||Ye.isQuota)&&Object(G.jsx)(S.a,{sm:"4",children:Object(G.jsxs)(N.a,{children:[Object(G.jsx)(T.a,{for:"qtExpireMsg",children:"Quota Expire Message"}),Object(G.jsx)(w.a,{type:"textarea",name:"qtExpireMsg",id:"qtExpireMsg",value:Je.qtExpireMsg,onChange:$e,placeholder:"message here...",maxLength:(160-et(Je.qtExpireMsg).actualCharReduce).toString()}),Object(G.jsxs)("p",{className:"text-right",style:160===et(Je.qtExpireMsg).charCount?{margin:"2px",color:"red"}:{margin:"2px",color:"blue"},children:[160-et(Je.qtExpireMsg).charCount," characters remaining"]})]})}),(Ye.isRxQuota||Ye.isQuota)&&Object(G.jsx)(S.a,{sm:"4",children:Object(G.jsxs)(N.a,{children:[Object(G.jsx)(T.a,{for:"qtPartialMsg",children:"Quota Partial Message"}),Object(G.jsx)(w.a,{type:"textarea",name:"qtPartialMsg",id:"qtPartialMsg",value:Je.qtPartialMsg,onChange:$e,placeholder:"message here...",maxLength:(160-et(Je.qtPartialMsg).actualCharReduce).toString()}),Object(G.jsxs)("p",{className:"text-right",style:160===et(Je.qtPartialMsg).charCount?{margin:"2px",color:"red"}:{margin:"2px",color:"blue"},children:[160-et(Je.qtPartialMsg).charCount," characters remaining"]})]})}),_e&&Object(G.jsx)(S.a,{sm:"4",className:"mt-1 mb-1",children:Object(G.jsx)(M.a,{type:"switch",label:"Allow Hierarchy?",id:"isHierarchy",checked:Je.isHierarchy,onChange:function(e){e.target.checked?Ke(Object(l.a)(Object(l.a)({},Je),{},{isHierarchy:!0})):(Ke(Object(l.a)(Object(l.a)({},Je),{},{isHierarchy:!1})),Ee({}))}})}),Je.isHierarchy&&Object(G.jsx)(S.a,{sm:"12",children:Object(G.jsxs)(C.a,{children:[Object(G.jsx)(S.a,{sm:"12",children:Object(G.jsxs)("h5",{children:["Hierarchy List ",Object(G.jsx)("span",{style:{color:"#F49D1A",fontSize:"12px"},children:"( In total of all hierarchy percentage will not more than 100%! )"})]})}),0===qe.length?Object(G.jsx)(S.a,{sm:"4",children:Object(G.jsx)(I.a,{color:"blue"})}):qe.map((function(e){return Object(G.jsx)(S.a,{sm:"4",children:Object(G.jsxs)(N.a,{children:[Object(G.jsx)(T.a,{for:"hierarchy",children:e}),Object(G.jsx)(w.a,{type:"number",name:"hierarchy",id:"hierarchy",value:Ge[e],onChange:function(t){var a=0;for(var c in Ge)a+=parseInt(Ge[c]);(a+=parseInt(t.target.value)-Ge[e])>100?(Ee(Object(l.a)(Object(l.a)({},Ge),{},Object(i.a)({},e,0))),t.target.value=null):Ee(Object(l.a)(Object(l.a)({},Ge),{},Object(i.a)({},e,t.target.value)))},placeholder:"percentage here..."})]})})}))]})})]})})]}),Ye.commissionId&&Object(G.jsx)(x.a,{children:Object(G.jsx)(v.a,{children:Object(G.jsxs)(C.a,{children:[Object(G.jsx)(S.a,{sm:"12",children:Object(G.jsx)("h4",{children:"Campaign Rule Details"})}),Object(G.jsx)(S.a,{sm:"4",children:Object(G.jsxs)(x.a,{style:{border:"1px solid grey"},children:[Object(G.jsxs)("div",{className:"d-flex justify-content-between border-bottom p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Campaign Rule Name:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.commissionRuleName})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between border-bottom p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Reward Type:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.commissionType})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Reward Condition:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.isPercentage?"Percentage":"Flat"})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between border-bottom p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Sender Reward:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.snAmount})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between border-bottom p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Receiver Reward:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.rxAmount})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between border-bottom p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Minimum Reward:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.max})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between border-bottom p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Maximum Reward:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.min})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between border-bottom p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Default Campaign Id:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.returnCommissionId})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Is Default?:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.isDefault?"True":"False"})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Distribute Reward Point?:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.isPoint?"True":"False"})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Start Date:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:null!==Ye&&void 0!==Ye&&Ye.startDate?Object(B.b)(null===Ye||void 0===Ye?void 0:Ye.startDate):"N/A"})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"End Date:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:null!==Ye&&void 0!==Ye&&Ye.endDate?Object(B.b)(null===Ye||void 0===Ye?void 0:Ye.endDate):"N/A"})})]})]})}),Object(G.jsxs)(S.a,{sm:"4",children:[Object(G.jsxs)(x.a,{style:{border:"1px solid grey"},children:[Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Set Recurring Timeline?:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.isCertainTimeline?"True":"False"})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Recurring Type:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:"w"===Ye.timelineType?"Weekly":"Monthly"})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Recurring Type 2:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:"w"===Ye.timelineType&&Ye.isTimelineRange?"Day Range":"w"!==Ye.timelineType||Ye.isTimelineRange?"m"===Ye.timelineType&&Ye.isTimelineRange?"Date Range":"m"!==Ye.timelineType||Ye.isTimelineRange?"":"Specific Date":"Specific Day"})})]})]}),Object(G.jsxs)(x.a,{style:{border:"1px solid grey"},children:[Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Set Campaign Quota?:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.isQuota?"True":"False"})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Quota Type:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:0===Ye.quotaType?"On Amount":1===Ye.quotaType?"On Transaction Count":2===Ye.quotaType?"Both":""})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Set Quota Count:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.quotaCount})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Set Quota Amount Limit:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.quotaAmount})})]})]}),Object(G.jsxs)(x.a,{style:{border:"1px solid grey"},children:[Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Set Reward Receivers's Quota?:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.isRxQuota?"True":"False"})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Quota Type:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:0===Ye.rxQuotaType?"On Amount":1===Ye.quotaType?"On Transaction Count":2===Ye.quotaType?"Both":""})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Set Quota Count:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.rxQuotaCount})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Set Quota Amount Limit:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.rxQuotaAmount})})]})]})]}),Object(G.jsxs)(S.a,{sm:"4",children:[Object(G.jsxs)(x.a,{style:{border:"1px solid grey"},children:[Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Is Time?:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.isTime?"True":"False"})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Start Hour:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.startHour})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"End Hour:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.endHour})})]})]}),Object(G.jsxs)(x.a,{style:{border:"1px solid grey"},children:[Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Add Transaction Condition?:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.isFinBasedOffer?"True":"False"})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Define TXN no.:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.offerCount})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Reward Amount:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.offerAmount})})]})]}),Object(G.jsxs)(x.a,{style:{border:"1px solid grey"},children:[Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Create By:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.createBy})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Create Date:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:null!==Ye&&void 0!==Ye&&Ye.createDate?Object(B.b)(null===Ye||void 0===Ye?void 0:Ye.createDate):"N/A"})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Modify By:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.modifyBy})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Create Date:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:null!==Ye&&void 0!==Ye&&Ye.modifyDate?Object(B.b)(null===Ye||void 0===Ye?void 0:Ye.modifyDate):"N/A"})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Approved By:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:Ye.approvedBy})})]}),Object(G.jsxs)("div",{className:"d-flex justify-content-between p-1",children:[Object(G.jsx)("h6",{style:{margin:"0"},children:"Approve Date:"}),Object(G.jsx)("h6",{style:{margin:"0"},children:Object(G.jsx)("b",{children:null!==Ye&&void 0!==Ye&&Ye.approveDate?Object(B.b)(null===Ye||void 0===Ye?void 0:Ye.approveDate):"N/A"})})]})]})]}),Object(G.jsx)(S.a,{sm:"12",children:Object(G.jsxs)(x.a,{style:{border:"1px solid grey"},children:[Object(G.jsx)(y.a,{children:"Flexible Rules"}),Object(G.jsx)(v.a,{children:Object(G.jsx)(L.a,{column:[{name:"Reward Condition",minWidth:"200px",selector:function(e,t){return e.isPercentage?"Percentage":"Flat"}},{name:"Sender Reward",minWidth:"100px",selector:"snAmount"},{name:"Receiver Reward",minWidth:"100px",selector:"rxAmount"},{name:"Start Range",minWidth:"100px",selector:"startRange"},{name:"End Range",minWidth:"100px",selector:"endRange"},{name:"Minimum Reward",minWidth:"100px",selector:"min"},{name:"Maximum Reward",minWidth:"100px",selector:"max"}],TableData:Ye.flexibleRules})})]})})]})})}),Object(G.jsx)(x.a,{children:Object(G.jsx)(S.a,{sm:"12",className:"text-center m-1",children:U?Object(G.jsxs)(g.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,children:[Object(G.jsx)(I.a,{color:"white",size:"sm"}),Object(G.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(G.jsx)(g.a.Ripple,{className:"ml-2",color:"primary",type:"submit",children:Object(G.jsx)("span",{children:"Submit"})})})})]})]})}},472:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return s}));a(0);var c=a(127),n=function(e){try{var t=e.response;404===t.status||401===t.status||400===t.status||500===t.status||409===t.status?c.f.error(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):c.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){c.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},r=function(e){try{var t=e.response;404!==t.status&&401!==t.status&&400!==t.status||c.f.error(t.data.errors?t.data.errors[Object.keys(t.data.errors)[0]]:t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){c.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},s=function(e){var t=e.data.message||"success";c.f.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},479:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return o}));var c=a(476),n=a(477),r={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},s=function(e){return new Date(e).toLocaleDateString(void 0,r)},i=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},l=function(){var e=Object(n.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t){e.next=4;break}return window.location.href="/Adminlogin",e.next=4,localStorage.clear();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(e,t,a){var c=document.createElement("a"),n=function(e){var a;return a="",a+=t.join(","),a+="\n",e.forEach((function(e){var c=0;t.forEach((function(t){c>0&&(a+=","),a+=e[t],c++})),a+="\n"})),a}(e);if(null!==n){var r=JSON.parse(localStorage.getItem("userData")),s="".concat(a,"_").concat((new Date).toISOString(),"_").concat(r.fullname.replaceAll(/\s/g,""),".csv");n.match(/^data:text\/csv/i)||(n="data:text/csv;charset=utf-8,".concat(n)),c.setAttribute("href",encodeURI(n)),c.setAttribute("download",s),c.click()}}},500:function(e,t,a){"use strict";var c=a(16),n=a(0),r=a(1552),s=a(502),i=a(499),l=a.n(i),o=a(501),j=a.n(o),d=a(6);t.a=function(e){var t=e.column,a=e.TableData,i=e.TableDataLoading,o=Object(n.useState)(0),u=Object(c.a)(o,2),b=u[0],h=u[1];return Object(d.jsx)(n.Fragment,{children:Object(d.jsx)(j.a,{noHeader:!0,pagination:!0,columns:t,paginationPerPage:10,className:"react-dataTable",sortIcon:Object(d.jsx)(r.a,{size:10}),paginationDefaultPage:b+1,paginationComponent:function(){return Object(d.jsx)(l.a,{previousLabel:"",nextLabel:"",forcePage:b,onPageChange:function(e){return function(e){h(e.selected)}(e)},pageCount:a.length?a.length/10:1,breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"})},data:a,progressPending:i,progressComponent:Object(d.jsx)(s.a,{color:"primary"}),responsive:!0,pointerOnHover:!0,highlightOnHover:!0,striped:!0})})}},518:function(e,t,a){}}]);
//# sourceMappingURL=327.3fe95876.chunk.js.map