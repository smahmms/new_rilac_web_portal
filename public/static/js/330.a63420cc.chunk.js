(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[330],{2504:function(e,s,t){"use strict";t.r(s);var a=t(476),o=t(1),r=t(477),c=t(16),n=t(478),i=t(506),l=t(0),u=t(502),d=t(998),g=t(660),p=t(472),b=t(129),m=t(780),j=t(130),h=t(127),O=t(1567),f=(t(831),t(534)),y=t(487),v=t(6),x=function(e){var s=e.name,t=e.role;return Object(v.jsxs)(l.Fragment,{children:[Object(v.jsx)("div",{className:"toastify-header",children:Object(v.jsxs)("div",{className:"title-wrapper",children:[Object(v.jsx)(i.a,{size:"sm",color:"success",icon:Object(v.jsx)(O.a,{size:12})}),Object(v.jsxs)("h6",{className:"toast-title font-weight-bold",children:["Welcome, ",s]})]})}),Object(v.jsx)("div",{className:"toastify-body",children:Object(v.jsxs)("span",{children:["You have successfully logged in as an ",t," user to system. Now you can start to explore. Enjoy!"]})})]})};s.default=function(){var e=Object(l.useState)(null),s=Object(c.a)(e,2),t=s[0],i=s[1],O=Object(b.b)(),C=(Object(g.h)().search,Object(g.g)()),k=Object(l.useContext)(j.a),N=new URLSearchParams(location.search);JSON.parse(localStorage.getItem("registration_data"));return Object(l.useEffect)(Object(r.a)(Object(a.a)().mark((function e(){var s,t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=N.get("card_id"),t=N.get("user_id"),localStorage.setItem("usePMStoken",!1),localStorage.setItem("useBMStoken",!1),i("pending"),e.next=7,n.a.goCardLessPaymentSuccess({card_id:s,user_id:t}).then(function(){var e=Object(r.a)(Object(a.a)().mark((function e(s){var t;return Object(a.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i("success"),console.log(s),console.log(s.data.payload),console.log(s.data.payload.payload),t=Object(o.a)(Object(o.a)({},s.data.payload.payload.user_info),{},{accessToken:s.data.payload.payload.token,refreshToken:s.data.payload.payload.token,extras:{eCommerceCartItemsCount:5},role:"vendor",ability:[{action:"manage",subject:"VENDOR"},{action:"manage",subject:"Auth"}]}),O(Object(m.a)(t)),k.update(t.ability),h.f.success(Object(v.jsx)(x,{name:t.username,role:t.role}),{transition:h.c,hideProgressBar:!0,autoClose:2e3}),localStorage.setItem("usePMStoken",!1),localStorage.setItem("BMSCall",!0),e.next=12,n.a.getBMStoken({username:f.f,password:f.d}).then((function(e){localStorage.setItem("BMStoken",e.data.jwtToken),localStorage.setItem("BMSCall",!1)})).catch((function(e){localStorage.setItem("BMSCall",!1),console.log(e)}));case 12:return e.next=14,n.a.customerbusinesslistbymobileno({mobile:Number(s.data.payload.payload.user_info.mobileno)}).then((function(e){console.log(e),localStorage.setItem("customerBusinesses",JSON.stringify(e.data.payload)),C.push(Object(y.d)(t.role))})).catch((function(e){Object(p.a)(e),console.log(e)}));case 14:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}()).catch((function(e){Object(p.a)(e),console.log(e),console.log(e.response)}));case 7:case"end":return e.stop()}}),e)}))),[]),Object(v.jsxs)("div",{className:"misc-wrapper",children:[Object(v.jsx)("a",{className:"brand-logo",href:"/",children:Object(v.jsx)("h2",{style:{color:window.TukitakiThemeColor},className:"brand-text ml-1",children:"RILAC"})}),Object(v.jsx)("div",{className:"misc-inner p-2 p-sm-3",children:Object(v.jsxs)("div",{className:"w-100 text-center",children:["pending"===t?Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{className:"mb-1",children:"Payment is Processing... "}),Object(v.jsx)(u.a,{})]}):"success"===t?Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{className:"mb-1",children:"Payment Successful \ud83d\ude80"}),Object(v.jsx)("p",{className:"mb-3",children:"Logging into Dashboard"})]}):"",Object(v.jsx)("img",{className:"img-fluid",src:d.default,alt:"Coming soon page"})]})})]})}},472:function(e,s,t){"use strict";t.d(s,"a",(function(){return o})),t.d(s,"b",(function(){return r})),t.d(s,"c",(function(){return c}));t(0);var a=t(127),o=function(e){try{var s=e.response;404===s.status||401===s.status||400===s.status||500===s.status||409===s.status?a.f.error(s.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):a.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(s){a.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},r=function(e){try{var s=e.response;404!==s.status&&401!==s.status&&400!==s.status||a.f.error(s.data.errors?s.data.errors[Object.keys(s.data.errors)[0]]:s.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(s){a.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},c=function(e){var s=e.data.message||"success";a.f.success(s,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},502:function(e,s,t){"use strict";var a=t(14),o=t(15),r=t(0),c=t.n(r),n=t(5),i=t.n(n),l=t(58),u=t.n(l),d=t(83),g={tag:d.tagPropType,type:i.a.string,size:i.a.string,color:i.a.string,className:i.a.string,cssModule:i.a.object,children:i.a.string},p=function(e){var s=e.className,t=e.cssModule,r=e.type,n=e.size,i=e.color,l=e.children,g=e.tag,p=Object(o.a)(e,["className","cssModule","type","size","color","children","tag"]),b=Object(d.mapToCssModules)(u()(s,!!n&&"spinner-"+r+"-"+n,"spinner-"+r,!!i&&"text-"+i),t);return c.a.createElement(g,Object(a.a)({role:"status"},p,{className:b}),l&&c.a.createElement("span",{className:Object(d.mapToCssModules)("sr-only",t)},l))};p.propTypes=g,p.defaultProps={tag:"div",type:"border",children:"Loading..."},s.a=p},831:function(e,s,t){},998:function(e,s,t){"use strict";t.r(s),s.default=t.p+"static/media/coming-soon.539770ed.svg"}}]);
//# sourceMappingURL=330.a63420cc.chunk.js.map