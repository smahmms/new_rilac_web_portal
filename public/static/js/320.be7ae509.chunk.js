(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[320],{1009:function(e,t,r){"use strict";var n=r(1),a=r(124),i=r(123),c=r(85),s=r.n(c),o=r(770),l=r(534),d=s.a.create(),u=function(){function e(t){var r=this;Object(a.a)(this,e),this.jwtConfig=Object(n.a)({},o.a),this.isAlreadyFetchingAccessToken=!1,this.subscribers=[],this.jwtConfig=Object(n.a)(Object(n.a)({},this.jwtConfig),t),console.log("jwtOverrideConfig ",t),d.interceptors.request.use((function(e){console.log("config ",e);var t=r.getToken();return e.headers.Authorization="".concat(r.jwtConfig.tokenType," ").concat(t),e}),(function(e){return Promise.reject(e)})),d.interceptors.response.use((function(e){return e}),(function(e){var t=e.config,n=e.response,a=t;return n&&401===n.status?(console.log("response.status ",n.status),r.isAlreadyFetchingAccessToken?window.location.replace("logout"):(r.isAlreadyFetchingAccessToken=!0,r.refreshToken().then((function(e){r.isAlreadyFetchingAccessToken=!1,r.setToken(e.data.jwtToken),r.onAccessTokenFetched(e.data.jwtToken)}))),new Promise((function(e){r.addSubscriber((function(t){a.headers.Authorization="".concat(r.jwtConfig.tokenType," ").concat(t),e(d(a))}))}))):Promise.reject(e)}))}return Object(i.a)(e,[{key:"onAccessTokenFetched",value:function(e){this.subscribers=this.subscribers.filter((function(t){return t(e)}))}},{key:"addSubscriber",value:function(e){this.subscribers.push(e)}},{key:"getToken",value:function(){return localStorage.getItem("BMStoken")||null}},{key:"setToken",value:function(e){localStorage.setItem("BMStoken",e)}},{key:"refreshToken",value:function(){return d.post(this.jwtConfig.getBMStoken,{username:l.f,password:l.d})}},{key:"login",value:function(){return d.post(this.jwtConfig.getBMStoken,{username:l.f,password:l.d})}},{key:"bmsDashboard",value:function(){return d.get(this.jwtConfig.bmsDashboardEndpoint)}},{key:"getServiceList",value:function(){return d.get(this.jwtConfig.serviceListEndpoint)}}]),e}();var p={jwtBMS:new u({})}.jwtBMS;t.a=p},2552:function(e,t,r){"use strict";r.r(t);var n=r(476),a=r(477),i=r(16),c=r(0),s=r(1515),o=r(483),l=r(482),d=r(548),u=r(1525),p=r(1526),j=r(550),b=r(551),m=r(480),h=r(470),x=r(528),O=r(474),g=r(487),f=r(21),v=r(1581),_=r(1653),y=r(500),k=r(479),w=r(1520),E=r(472),S=r(490),T=r.n(S),R=r(481),N=r.n(R),C=r(6),P=N()(T.a),A=function(e){var t=e.pointRuleList,r=(e.rule_type,e.TableDataLoading),n=e.setrefresh,a=e.refresh,i=e.setruleeditdata,s=[{name:"Rule Name",minWidth:"150px",sortable:!0,selector:"rule_name"},{name:"Service Name",minWidth:"200px",sortable:!0,selector:function(e){return e.map_item.length?e.map_item[0].service_keyword:"--"}},{name:"Is Range",minWidth:"70px",sortable:!0,selector:function(e){return e.is_range?Object(C.jsx)(w.a,{pill:!0,color:"success",className:"badge-center",children:"True"}):Object(C.jsx)(w.a,{pill:!0,color:"danger",className:"badge-center",children:"False"})}},{name:"Start Range",minWidth:"50px",sortable:!0,selector:function(e){return e.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.start_range})}))}},{name:"End Range",minWidth:"50px",sortable:!0,selector:function(e){return e.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.end_range||"--"})}))}},{name:"Point Receiver Type",minWidth:"50px",sortable:!0,selector:function(e){return e.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.point_receiver_type||"--"})}))}},{name:"Sender Point Per Amount",minWidth:"50px",sortable:!0,selector:function(e){return e.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.sender_reward_point||"--"})}))}},{name:"Receiver Point Per Amount",minWidth:"50px",sortable:!0,selector:function(e){return e.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.receiver_reward_point||"--"})}))}},{name:"Start Date",minWidth:"150px",sortable:!0,selector:function(e){return e.start_date?e.start_date.split("T")[0]:"--"}},{name:"End Date",minWidth:"150px",sortable:!0,selector:function(e){return e.end_date?e.end_date.split("T")[0]:"--"}},{name:"Tier Name",minWidth:"150px",sortable:!0,selector:"tier_name"},{name:"Point Expiry Interval(days)",minWidth:"70px",sortable:!0,selector:"point_expiry_interval_days"},{name:"Active",minWidth:"80px",sortable:!0,selector:function(e){return e.is_active?Object(C.jsx)(w.a,{pill:!0,color:"success",className:"badge-center",children:"True"}):Object(C.jsx)(w.a,{pill:!0,color:"danger",className:"badge-center",children:"False"})}},{name:"Action",minWidth:"150px",selector:function(e){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("span",{title:"Edit",children:Object(C.jsx)(v.a,{size:15,color:"#3b3acb",style:{cursor:"pointer"},onClick:function(t){i(e)}})})," \xa0\xa0",Object(C.jsx)("span",{title:"Delete",children:Object(C.jsx)(_.a,{size:15,color:"red",style:{cursor:"pointer"},onClick:function(t){return function(e,t){return e.preventDefault(),P.fire(Object(f.a)({title:"Do you want to Delete",text:"Information will be delete when another user will approve this operation.",icon:"warning",allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,confirmButtonText:"Yes",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-danger ml-1"},showLoaderOnConfirm:!0,preConfirm:function(){return x.a.pmsPointRuleDelete({rule_id:t.id}).then((function(e){console.log(e),Object(E.c)({data:{message:e.data.message}}),n(a+1)})).catch((function(e){Object(E.a)(e),console.log(e.response)}))},buttonsStyling:!1},"allowOutsideClick",(function(){return!T.a.isLoading()}))).then((function(e){e.isConfirmed}))}(t,e)}})})]})}}];return Object(C.jsx)(c.Fragment,{children:Object(C.jsx)(y.a,{column:s,TableData:t,TableDataLoading:r})})},D=r(1583),W=r(638),B=function(e){var t=e.pointRuleList,r=(e.rule_type,e.TableDataLoading),n=e.setruleidforview,a=e.setref_id,i=[{name:"Rule Name",minWidth:"200px",sortable:!0,selector:"rule_name"},{name:"Service Name",minWidth:"200px",sortable:!0,selector:function(e){return e.map_item.length?e.map_item[0].service_keyword:"--"}},{name:"Is Range",minWidth:"70px",sortable:!0,selector:function(e){return e.is_range?Object(C.jsx)(w.a,{pill:!0,color:"success",className:"badge-center",children:"True"}):Object(C.jsx)(w.a,{pill:!0,color:"danger",className:"badge-center",children:"False"})}},{name:"Start Range",minWidth:"50px",sortable:!0,selector:function(e){return e.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.start_range})}))}},{name:"End Range",minWidth:"50px",sortable:!0,selector:function(e){return e.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.end_range||"--"})}))}},{name:"Point Receiver Type",minWidth:"50px",sortable:!0,selector:function(e){return e.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.point_receiver_type||"--"})}))}},{name:"Sender Point Per Amount",minWidth:"50px",sortable:!0,selector:function(e){return e.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.sender_reward_point||"--"})}))}},{name:"Receiver Point Per Amount",minWidth:"50px",sortable:!0,selector:function(e){return e.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.receiver_reward_point||"--"})}))}},{name:"Start Date",minWidth:"150px",sortable:!0,selector:function(e){return e.start_date?e.start_date.split("T")[0]:"--"}},{name:"End Date",minWidth:"150px",sortable:!0,selector:function(e){return e.end_date?e.end_date.split("T")[0]:"--"}},{name:"Tier Name",minWidth:"150px",sortable:!0,selector:"tier_name"},{name:"Point Expiry Interval(days)",minWidth:"70px",sortable:!0,selector:"point_expiry_interval_days"},{name:"Active",minWidth:"80px",sortable:!0,selector:function(e){return e.is_active?Object(C.jsx)(w.a,{pill:!0,color:"success",className:"badge-center",children:"True"}):Object(C.jsx)(w.a,{pill:!0,color:"danger",className:"badge-center",children:"False"})}},{name:"Operation",minWidth:"70px",sortable:!0,selector:function(e){return Object(C.jsxs)(w.a,{color:Object(W.a)(e.action).color,pill:!0,className:"px-1",children:[" ",Object(W.a)(e.action).title," "]})}},{name:"Operation At",minWidth:"200px",sortable:!0,selector:function(e){return e.created_at?Object(k.b)(e.created_at):"N/A"}},{name:"Action",minWidth:"150px",selector:function(e){return Object(C.jsx)("span",{title:"View",children:Object(C.jsx)(D.a,{size:15,color:"teal",style:{cursor:"pointer"},onClick:function(t){return a((r=e).ref_id),void n(r.id);var r}})})}}];return Object(C.jsx)(c.Fragment,{children:Object(C.jsx)(y.a,{column:i,TableData:t,TableDataLoading:r})})},L=r(1550),F=r(1672),I=r(497),z=r(533),M=r(536),H=r(531),q=r(484),V=r(485),U=r(486),J=r(555),K=r(502),Y=function(e){var t=e.modal,r=e.toggleModal,n=e.serviceRuleInfo,a=e.setRefresh,s=e.refresh,d=e.action,u=Object(c.useState)([]),p=Object(i.a)(u,2),j=p[0],b=p[1],O=Object(c.useState)(!1),g=Object(i.a)(O,2),f=g[0],v=g[1];console.log(n),Object(c.useEffect)((function(){n.id&&x.a.getApprovalEntryforServiceRule(n.id).then((function(e){console.log(e);var t,r=[],n=Object(I.a)(e.data.payload.module_data.roles);try{var a=function(){var n=t.value,a=e.data.payload.approved.find((function(e){return e.role_id===n.role_id}));a?r.push({role_id:n.role_name,approved_by:a.approved_by,approved_at:a.approved_at}):r.push({role_id:n.role_name,approved_by:"--",approved_at:""})};for(n.s();!(t=n.n()).done;)a()}catch(i){n.e(i)}finally{n.f()}b(r)})).catch((function(e){console.log(e),Object(E.a)(e)}))}),[n.id]);return Object(C.jsxs)(z.a,{size:"xl",isOpen:t,toggle:r,style:1===d?{border:"2px solid green"}:2===d?{border:"2px solid red"}:{},children:[Object(C.jsx)(M.a,{toggle:r,children:1===d?"Approve Service Rule":2===d?"Reject Service Rule":"Service Rule Details"}),Object(C.jsxs)(H.a,{children:[Object(C.jsx)(q.a,{children:Object(C.jsxs)(V.a,{sm:"12",children:[Object(C.jsxs)(o.a,{children:[Object(C.jsx)(l.a,{children:Object(C.jsx)(m.a,{children:"Approval Entry"})}),Object(C.jsx)(U.a,{children:Object(C.jsx)(q.a,{children:Object(C.jsx)(V.a,{sm:"12",children:Object(C.jsxs)(J.a,{children:[Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"Role Name"}),Object(C.jsx)("th",{children:"Approved By"}),Object(C.jsx)("th",{children:"Approved At"})]}),0!==(null===j||void 0===j?void 0:j.length)?null===j||void 0===j?void 0:j.map((function(e,t){return Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:e.role_id}),Object(C.jsx)("td",{children:e.approved_by}),Object(C.jsx)("td",{children:e.approved_at?Object(k.b)(e.approved_at||""):"--"})]},t)})):Object(C.jsx)(K.a,{className:"text-center"})]})})})})]}),"`"]})}),Object(C.jsx)(q.a,{children:Object(C.jsx)(V.a,{sm:"12",className:"text-center",children:f?Object(C.jsxs)(h.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(C.jsx)(K.a,{color:"white",size:"sm"}),Object(C.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(C.jsx)(h.a.Ripple,{className:"ml-2",color:"primary",onClick:function(){v(!0),x.a.pmsServiceRuleAction({rule_id:n.id,action_type:d}).then((function(e){a(!s),Object(E.c)(e),v(!1),r(),console.log(e)})).catch((function(e){console.log(e.response),v(!1),r(),Object(E.a)(e)}))},type:"button",style:{marginTop:"25px"},children:Object(C.jsx)("span",{children:"Confirm"})})})})]})]})},G=(N()(T.a),function(e){var t=e.setruleidforview,r=e.pointRuleList,n=(e.rule_type,e.TableDataLoading),a=e.refresh,s=e.setrefresh,o=e.setref_id,l=Object(c.useState)(0),d=Object(i.a)(l,2),u=d[0],p=d[1],j=Object(c.useState)({}),b=Object(i.a)(j,2),m=b[0],h=b[1],x=Object(c.useState)(!1),O=Object(i.a)(x,2),g=O[0],f=O[1],v=[{name:"Rule Name",minWidth:"150px",sortable:!0,selector:"rule_name"},{name:"Service Name",minWidth:"200px",sortable:!0,selector:function(e){return e.map_item.length?e.map_item[0].service_keyword:"--"}},{name:"Is Range",minWidth:"70px",sortable:!0,selector:function(e){return e.is_range?Object(C.jsx)(w.a,{pill:!0,color:"success",className:"badge-center",children:"True"}):Object(C.jsx)(w.a,{pill:!0,color:"danger",className:"badge-center",children:"False"})}},{name:"Start Range",minWidth:"50px",sortable:!0,selector:function(e){return e.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.start_range})}))}},{name:"End Range",minWidth:"50px",sortable:!0,selector:function(e){return e.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.end_range||"--"})}))}},{name:"Point Receiver Type",minWidth:"50px",sortable:!0,selector:function(e){return e.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.point_receiver_type||"--"})}))}},{name:"Sender Point Per Amount",minWidth:"50px",sortable:!0,selector:function(e){return e.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.sender_reward_point||"--"})}))}},{name:"Receiver Point Per Amount",minWidth:"50px",sortable:!0,selector:function(e){return e.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.receiver_reward_point||"--"})}))}},{name:"Start Date",minWidth:"150px",sortable:!0,selector:function(e){return e.start_date?e.start_date.split("T")[0]:"--"}},{name:"End Date",minWidth:"150px",sortable:!0,selector:function(e){return e.end_date?e.end_date.split("T")[0]:"--"}},{name:"Tier Name",minWidth:"150px",sortable:!0,selector:"tier_name"},{name:"Point Expiry Interval(days)",minWidth:"70px",sortable:!0,selector:"point_expiry_interval_days"},{name:"Active",minWidth:"80px",sortable:!0,selector:function(e){return e.is_active?Object(C.jsx)(w.a,{pill:!0,color:"success",className:"badge-center",children:"True"}):Object(C.jsx)(w.a,{pill:!0,color:"danger",className:"badge-center",children:"False"})}},{name:"Operation",minWidth:"100px",sortable:!0,selector:function(e){return Object(C.jsxs)(w.a,{color:Object(W.a)(e.action).color,pill:!0,className:"px-1",children:[" ",Object(W.a)(e.action).title," "]})}},{name:"Operation By",minWidth:"100px",sortable:!0,selector:"created_by"},{name:"Operation At",minWidth:"200px",sortable:!0,selector:function(e){return e.created_at?Object(k.b)(e.created_at):"N/A"}},{name:"Action",minWidth:"150px",selector:function(e){return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("span",{title:"View",children:Object(C.jsx)(D.a,{size:15,color:"teal",style:{cursor:"pointer"},onClick:function(r){return o((n=e).ref_id),void t(n.id);var n}})})," \xa0\xa0",Object(C.jsx)("span",{title:"Approve",children:Object(C.jsx)(L.a,{size:15,color:"teal",style:{cursor:"pointer"},onClick:function(){h(e),f(!0),p(1)}})}),"\xa0\xa0",Object(C.jsx)("span",{title:"Reject",children:Object(C.jsx)(F.a,{size:15,color:"red",style:{cursor:"pointer"},onClick:function(){h(e),f(!0),p(2)}})})]})}}];return Object(C.jsxs)(c.Fragment,{children:[Object(C.jsx)(y.a,{column:v,TableData:r,TableDataLoading:n}),Object(C.jsx)(Y,{modal:g,toggleModal:function(){return f(!g)},serviceRuleInfo:m,refresh:a,setRefresh:s,action:u})]})}),Q=r(1),X=r(121),Z=r(1553),$=r(1514),ee=r(496),te=r(1488),re=r(489),ne=r(1513),ae=r(1485),ie=r(1009),ce=r(495),se=r(633),oe=[{value:1,label:"Active"},{value:0,label:"InActive"}],le=[{value:"sender",label:"Sender"},{value:"receiver",label:"Receiver"},{value:"both",label:"Both Sender & Receiver"}],de=function(e){var t=e.refresh,r=e.setrefresh,d=e.ruleeditdata,u=e.setruleeditdata,p=Object(c.useRef)(),j=Object(c.useState)(!0),b=Object(i.a)(j,2),O=b[0],v=b[1],_=Object(c.useState)(!1),y=Object(i.a)(_,2),k=y[0],w=y[1],S=Object(c.useState)(!0),T=Object(i.a)(S,2),R=T[0],N=T[1],P=Object(c.useState)([{value:null,label:"All"}]),A=Object(i.a)(P,2),D=A[0],W=A[1],B=Object(c.useState)({}),L=Object(i.a)(B,2),F=L[0],I=L[1],z=Object(c.useState)(oe[0]),M=Object(i.a)(z,2),H=M[0],q=M[1],Y=Object(c.useState)({value:"",label:"select..."}),G=Object(i.a)(Y,2),de=G[0],ue=G[1],pe=Object(c.useState)([]),je=Object(i.a)(pe,2),be=je[0],me=je[1],he=Object(c.useState)({}),xe=Object(i.a)(he,2),Oe=xe[0],ge=xe[1],fe=Object(c.useState)({}),ve=Object(i.a)(fe,2),_e=ve[0],ye=ve[1],ke=Object(c.useState)([{skustartrange:"",skuendrange:"",skupoints:"",receiverpoint:"",usertype:"sender",defaultuserType:le[0]}]),we=Object(i.a)(ke,2),Ee=we[0],Se=we[1],Te=function(){for(var e=!0,t=0;t<Ee.length;t++){if(("sender"===Ee[t].usertype||"both"===Ee[t].usertype)&&""===Ee[t].skupoints)return e=!1,!1;if(("receiver"===Ee[t].usertype||"both"===Ee[t].usertype)&&""===Ee[t].receiverpoint)return e=!1,!1;if(""===Ee[t].skustartrange)return e=!1,!1;if(""===Ee[t].skuendrange)return e=!1,!1}return N(e),e},Re=Object(c.useState)({status:1,skuamount:0,skupoints:0,skustartrange:0,skuendrange:0,receiverpoint:0,usertype:"sender",product_id:null,isrange:!1,title:"",business_id:null,Tier:null,startdate:"",expiryDate:"",point_expiry_interval_days:365,productId:null,is_sku_rule:!1,service_id:null}),Ne=Object(i.a)(Re,2),Ce=Ne[0],Pe=Ne[1];Object(c.useEffect)(Object(a.a)(Object(n.a)().mark((function e(){var t,r,a,c,s,o,l,u;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.map_item.length?d.map_item[0].service_id:null,e.next=3,Promise.all([ie.a.getServiceList().then((function(e){return console.log("getServiceList",e),e.data.map((function(e){return{value:{id:e.serviceId,keyword:e.serviceKeyword},label:e.serviceKeyword}}))})).catch((function(e){return console.log(e.response),[]})),x.a.tierList().then((function(e){console.log(e);var t=e.data.payload,r=d.tire_id?+d.tire_id:null,n={value:null,label:"All"},a=t.map((function(e){return r&&+e.id===r&&(n={value:+e.id,label:e.tier}),{value:+e.id,label:e.tier}}));return W([{value:null,label:"All"}].concat(Object(X.a)(a))),I(n),null})).catch((function(e){return console.log(e.response),Object(E.a)(e),null}))]);case 3:r=e.sent,a=Object(i.a)(r,2),c=a[0],a[1],s=Object(Q.a)(Object(Q.a)(Object(Q.a)({},Ce),d),{},{service_id:t,title:d.rule_name,isrange:d.is_range,status:d.is_active?1:0,Tier:d.tire_id,startdate:d.start_date?d.start_date.split("T")[0]:"",expiryDate:d.end_date?d.end_date.split("T")[0]:"",skuamount:d.is_range?0:d.map_item.length?d.map_item[0].start_range:0,skupoints:d.is_range?0:d.map_item.length?d.map_item[0].sender_reward_point:0,receiverpoint:d.is_range?0:d.map_item.length?d.map_item[0].receiver_reward_point:0,usertype:d.is_range?0:d.map_item.length?d.map_item[0].point_receiver_type:"sender"}),Pe(s),o=le.filter((function(e){return e.value===s.usertype})),ge(o.length?o[0]:{}),l=c.filter((function(e){return e.value.id===s.service_id})),ye(l.length?l[0]:{}),me(c),d.is_active||q({value:0,label:"InActive"}),d.is_range&&d.map_item.length&&(u=d.map_item.map((function(e){var t=le.filter((function(t){return t.value===e.point_receiver_type}));return{skustartrange:e.start_range,skuendrange:e.end_range,skupoints:e.sender_reward_point,receiverpoint:e.receiver_reward_point,usertype:e.point_receiver_type,defaultuserType:t.length?t[0]:{}}})),Se(u)),v(!1);case 17:case"end":return e.stop()}}),e)}))),[]);var Ae=function(e){Pe(Object(Q.a)(Object(Q.a)({},Ce),{},Object(f.a)({},e.target.name,e.target.value)))},De=function(e,t){Te();var r=Object(X.a)(Ee);r[t]=Object(Q.a)(Object(Q.a)({},r[t]),{},Object(f.a)({},e.target.name,parseFloat(e.target.value))),Se(r)};return Object(C.jsx)(c.Fragment,{children:O?Object(C.jsxs)(c.Fragment,{children:[" ",Object(C.jsx)(se.a,{active:!0})," ",Object(C.jsx)(se.a,{active:!0})," ",Object(C.jsx)(se.a,{active:!0})," "]}):Object(C.jsxs)(c.Fragment,{children:[Object(C.jsx)(h.a.Ripple,{className:"mb-1",color:"primary",onClick:function(e){u(null)},children:Object(C.jsxs)("div",{className:"d-flex align-items-center",children:[Object(C.jsx)(Z.a,{size:17,style:{marginRight:"5px"}}),Object(C.jsx)("span",{children:"Back"})]})}),Object(C.jsxs)(o.a,{children:[Object(C.jsx)(l.a,{className:"border-bottom",children:Object(C.jsx)(m.a,{tag:"h4",children:"Edit Rule"})}),Object(C.jsx)(U.a,{style:{paddingTop:"15px"},children:Object(C.jsxs)(ee.a,{className:"row",style:{width:"100%"},onSubmit:function(e){e.preventDefault();var n=Ce.service_id,a=Ce.title,i=Ce.receiverpoint,c=Ce.Tier,s=Ce.usertype,o=Ce.status,l=Ce.startdate,p=Ce.expiryDate,j=Ce.point_expiry_interval_days,b=Ce.skuamount,m=Ce.skupoints,h=(Ce.skustartrange,Ce.skuendrange,Ce.productId,Ce.isrange),O=[],g={rule_id:d.id,rule_name:a,is_sku_rule:!1,is_global_rule:!1,is_service_rule:!0,bussiness_id:null,is_range:h,is_active:1===o||!1,start_date:l,end_date:p,point_expiry_interval_days:+j,tire_id:c?+c:c,items:[]};g.is_range?Ee.map((function(e){O.push({product_id:null,service_id:n,start_range:+e.skustartrange,end_range:+e.skuendrange,point_receiver_type:e.usertype,sender_reward_point:+e.skupoints,receiver_reward_point:+e.receiverpoint})})):O.push({product_id:null,service_id:n,start_range:+b,end_range:null,point_receiver_type:s,sender_reward_point:+m,receiver_reward_point:+i}),g.items=O,console.log("body ",g),w(!0),x.a.pmsPointRuleEdit(g).then((function(e){Object(E.c)({data:{message:e.data.payload.msg}}),r(t+1),u(null)})).catch((function(e){w(!1),Object(E.a)(e),console.log(e.response)}))},autoComplete:"off",children:[Object(C.jsx)(V.a,{md:"4",children:Object(C.jsxs)(te.a,{children:[Object(C.jsx)(re.a,{for:"voucherValue",children:"Title"}),Object(C.jsx)(ne.a,{type:"text",name:"title",id:"title",value:Ce.title,onChange:Ae,required:!0,placeholder:"title"})]})}),Object(C.jsx)(V.a,{sm:"3",children:Object(C.jsxs)(te.a,{children:[Object(C.jsxs)(re.a,{for:"Business",children:["Service Type ",Object(C.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(C.jsx)(ce.a,{ref:p,theme:g.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",onChange:function(e){ue(e),Pe(Object(Q.a)(Object(Q.a)({},Ce),{},{service_id:e.value.id}))},defaultValue:_e,options:be}),Object(C.jsx)(ne.a,{required:!0,style:{opacity:0,width:"100%",height:0},onFocus:function(e){return p.current.select.focus()},value:de.value||"",onChange:function(e){return""}})]})}),Object(C.jsx)(V.a,{md:"3",children:Object(C.jsxs)(te.a,{children:[Object(C.jsxs)(re.a,{for:"startdate",children:["Start Date",Object(C.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(C.jsx)(ne.a,{type:"date",min:(new Date).toLocaleDateString("fr-CA"),name:"startdate",id:"startdate",value:Ce.startdate,onChange:Ae,required:!0,placeholder:"0"})]})}),Object(C.jsx)(V.a,{md:"3",children:Object(C.jsxs)(te.a,{children:[Object(C.jsxs)(re.a,{for:"expiryDate",children:["Expiry Date",Object(C.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(C.jsx)(ne.a,{type:"date",min:(new Date).toLocaleDateString("fr-CA"),name:"expiryDate",id:"expiryDate",value:Ce.expiryDate,onChange:Ae,required:!0,placeholder:"0"})]})}),Object(C.jsx)(V.a,{md:"3",children:Object(C.jsxs)(te.a,{children:[Object(C.jsx)(re.a,{for:"Business",children:"Select a Tier"}),Object(C.jsx)(ce.a,{theme:g.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",defaultValue:F,onChange:function(e){return Pe(Object(Q.a)(Object(Q.a)({},Ce),{},{Tier:e.value}))},options:D})]})}),Object(C.jsx)(V.a,{md:"3",children:Object(C.jsxs)(te.a,{children:[Object(C.jsx)(re.a,{for:"Business",children:"Status"}),Object(C.jsx)(ce.a,{theme:g.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",defaultValue:H,onChange:function(e){Pe(Object(Q.a)(Object(Q.a)({},Ce),{},{status:e.value}))},options:oe})]})}),Object(C.jsx)(V.a,{md:"4",children:Object(C.jsxs)(te.a,{children:[Object(C.jsx)(re.a,{for:"point_expiry_interval_days",children:"Point Expiry Interval (Days)"}),Object(C.jsx)(ne.a,{type:"number",name:"point_expiry_interval_days",id:"point_expiry_interval_days",value:Ce.point_expiry_interval_days,onChange:Ae,min:0,placeholder:"0",onWheel:function(e){return e.target.blur()}})]})}),Object(C.jsx)(V.a,{sm:"12",className:"mb-1",children:Object(C.jsx)(te.a,{children:Object(C.jsx)(ae.a,{type:"switch",id:"isrange",name:"isrange",label:"Is Range?",checked:Ce.isrange,onChange:function(e){e.target.checked?Pe(Object(Q.a)(Object(Q.a)({},Ce),{},{isrange:!0})):Pe(Object(Q.a)(Object(Q.a)({},Ce),{},{isrange:!1}))}})})}),Ce.isrange?null:Object(C.jsxs)(c.Fragment,{children:[Object(C.jsx)(V.a,{sm:"3",children:Object(C.jsxs)(te.a,{children:[Object(C.jsxs)(re.a,{for:"skuamount",children:["Minimum-Amount",Object(C.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(C.jsx)(ne.a,{type:"number",name:"skuamount",id:"skuamount",value:Ce.skuamount,onChange:Ae,required:!0,min:1,placeholder:"0",onWheel:function(e){return e.target.blur()}})]})}),Object(C.jsx)(V.a,{sm:"3",children:Object(C.jsxs)(te.a,{children:[Object(C.jsx)(re.a,{for:"isrange",children:"Point Receiver Type"}),Object(C.jsx)(ce.a,{theme:g.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",defaultValue:Oe,onChange:function(e){Pe(Object(Q.a)(Object(Q.a)({},Ce),{},{usertype:e.value}))},options:le})]})}),"sender"===Ce.usertype||"both"===Ce.usertype?Object(C.jsx)(V.a,{sm:"3",children:Object(C.jsxs)(te.a,{children:[Object(C.jsxs)(re.a,{for:"skupoints",children:["Sender Point Per Amount",Object(C.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(C.jsx)(ne.a,{type:"number",name:"skupoints",id:"skupoints",value:Ce.skupoints,onChange:Ae,required:!0,min:0,placeholder:"0",step:1,onWheel:function(e){return e.target.blur()}})]})}):null,"receiver"===Ce.usertype||"both"===Ce.usertype?Object(C.jsx)(V.a,{sm:"3",children:Object(C.jsxs)(te.a,{children:[Object(C.jsxs)(re.a,{for:"skupoints",children:["Receiver Point Per Amount",Object(C.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(C.jsx)(ne.a,{type:"number",name:"receiverpoint",id:"receiverpoint",value:Ce.receiverpoint,onChange:Ae,required:!0,min:0,placeholder:"0",step:1,onWheel:function(e){return e.target.blur()}})]})}):null]}),!!Ce.isrange&&Object(C.jsx)(V.a,{md:"12",children:Object(C.jsxs)(J.a,{bordered:!0,responsive:!0,children:[Object(C.jsx)("thead",{style:{background:"white"},children:Object(C.jsxs)("tr",{children:[Object(C.jsxs)("th",{style:{background:"white"},children:["Start Range",Object(C.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(C.jsxs)("th",{style:{background:"white"},children:["End Range",Object(C.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(C.jsx)("th",{style:{background:"white"},children:"Point Receiver Type"}),Object(C.jsxs)("th",{style:{background:"white"},children:["Sender Point Per Amount",Object(C.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(C.jsxs)("th",{style:{background:"white"},children:["Receiver Point Per Amount",Object(C.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(C.jsx)("th",{style:{background:"white"},children:"Action"})]})}),Object(C.jsx)("tbody",{children:Ee.map((function(e,t){return console.log("row ",e),Object(C.jsxs)("tr",{children:[Object(C.jsx)("td",{children:Object(C.jsx)(ne.a,{type:"number",name:"skustartrange",id:"skustartrange".concat(t),value:e.skustartrange,min:t>0?Number(Ee[t-1].skuendrange)+.01:0,onChange:function(e){return De(e,t)},required:!0,placeholder:"0",onWheel:function(e){return e.target.blur()},step:"any"})}),Object(C.jsx)("td",{children:Object(C.jsx)(ne.a,{type:"number",name:"skuendrange",id:"skuendrange".concat(t),value:e.skuendrange,min:e.skustartrange||0,step:"any",onChange:function(e){return De(e,t)},required:!0,placeholder:"0",onWheel:function(e){return e.target.blur()}})}),Object(C.jsx)("td",{children:Object(C.jsx)(ce.a,{theme:g.i,maxMenuHeight:200,className:"react-select",classNamePrefix:"select",defaultValue:e.defaultuserType,onChange:function(e){return function(e,t){var r=Object(X.a)(Ee);r[t]=Object(Q.a)(Object(Q.a)({},r[t]),{},{usertype:e.value}),Se(r)}(e,t)},options:le})}),Object(C.jsx)("td",{children:Object(C.jsx)(ne.a,{type:"number",name:"skupoints",id:"skupoints".concat(t),value:e.skupoints,min:0,step:1,onChange:function(e){return De(e,t)},required:!0,placeholder:"0",onWheel:function(e){return e.target.blur()},disabled:"receiver"===e.usertype})}),Object(C.jsx)("td",{children:Object(C.jsx)(ne.a,{type:"number",name:"receiverpoint",id:"receiverpoints".concat(t),value:e.receiverpoint,min:0,step:1,onChange:function(e){return De(e,t)},required:!0,placeholder:"0",onWheel:function(e){return e.target.blur()},disabled:"sender"===e.usertype})}),Object(C.jsxs)("td",{children:[Object(C.jsx)(h.a.Ripple,{size:"sm",color:"info",type:R?"submit":"button",onClick:function(e){return function(e){e.preventDefault(),console.log("chkRangeInputValues() ",Te()),Te()&&(Se([].concat(Object(X.a)(Ee),[{skustartrange:Number(Ee[Ee.length-1].skuendrange)+.01,skuendrange:"",skupoints:"",receiverpoint:"",usertype:"sender",defaultuserType:le[0]}])),N(!0))}(e)},children:Object(C.jsx)(s.a,{size:15})}),"\xa0\xa0",Ee.length>1&&Object(C.jsx)(h.a.Ripple,{size:"sm",color:"danger",onClick:function(e){Se(Ee.filter((function(e,r){return r!==t})))},children:Object(C.jsx)($.a,{size:15})})]})]},t)}))})]})}),Object(C.jsx)(V.a,{sm:"12",className:"text-center",children:k?Object(C.jsxs)(h.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(C.jsx)(K.a,{color:"white",size:"sm"}),Object(C.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(C.jsx)(h.a.Ripple,{className:"ml-2",color:"primary",type:"submit",style:{marginTop:"25px"},children:Object(C.jsx)("span",{children:"Submit"})})})]})})]})]})})},ue=["Rule Name","Service Name","Is Range","Data","Start Date","End Date","Tier Name","Point Expiry Interval(days)","Active"],pe=["rule_name","servicename","is_range","data","start_date","end_date","tier_name","point_expiry_interval_days","is_active"],je=function(e){var t=e.setruleidforview,r=e.ruleidforview,s=e.ref_id,d=Object(c.useState)(!0),u=Object(i.a)(d,2),p=u[0],j=u[1],b=Object(c.useState)({}),O=Object(i.a)(b,2),g=O[0],f=O[1],v=Object(c.useState)(""),_=Object(i.a)(v,2),y=_[0],k=_[1],w=Object(c.useState)({}),S=Object(i.a)(w,2),T=S[0],R=S[1];return Object(c.useEffect)(Object(a.a)(Object(n.a)().mark((function e(){var t,c,o,l,d;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,Promise.all([x.a.pmsPointRuleDetail({rule_id:s||-1}).then(function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){var r,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.data.payload,console.log("main ",r),!r){e.next=7;break}return a=Object(Q.a)(Object(Q.a)({},r),{},{servicename:r.map_item.length?r.map_item[0].service_keyword:"--",is_range:r.is_range?"True":"False",data:null,start_date:r.start_date?r.start_date.split("T")[0]:"--",end_date:r.end_date?r.end_date.split("T")[0]:"--",is_active:r.is_active?"True":"False"}),e.abrupt("return",a);case 7:return e.abrupt("return",{});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e.response),Object(E.a)(e),{}})),x.a.pmsTempPointRuleDetail({rule_id:r}).then(function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){var r,a;return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data.payload,console.log("temp payload ",r),a=Object(Q.a)(Object(Q.a)({},r),{},{servicename:r.map_item.length?r.map_item[0].service_keyword:"--",is_range:r.is_range?"True":"False",data:null,start_date:r.start_date?r.start_date.split("T")[0]:"--",end_date:r.end_date?r.end_date.split("T")[0]:"--",is_active:r.is_active?"True":"False"}),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e.response),Object(E.a)(e),{}}))]);case 3:t=e.sent,c=Object(i.a)(t,2),o=c[0],"Insert"!==(l=c[1]).action&&(d=!0,console.log("details ",o),l.map_item.map((function(e,t){var r=o.map_item[t]?o.map_item[t].start_range:-1,n=o.map_item[t]?o.map_item[t].end_range:-1,a=o.map_item[t]?o.map_item[t].point_receiver_type:"",i=o.map_item[t]?o.map_item[t].sender_reward_point:-1,c=o.map_item[t]?o.map_item[t].receiver_reward_point:-1;console.log("item ",e),console.log("raw ",{start_range:r,end_range:n,sender_reward_point:i}),(e.start_range!==r||e.end_range!==n||e.sender_reward_point!==i||e.point_receiver_type!==a||e.receiver_reward_point!==c)&&(d=!1)})),d||(l.data=" ")),R(o),k(l.action),f(l),j(!1);case 12:case"end":return e.stop()}}),e)}))),[]),Object(C.jsx)(c.Fragment,{children:p?Object(C.jsxs)(c.Fragment,{children:[" ",Object(C.jsx)(se.a,{active:!0})," ",Object(C.jsx)(se.a,{active:!0})," ",Object(C.jsx)(se.a,{active:!0})," "]}):Object(C.jsxs)(c.Fragment,{children:[" ",Object(C.jsx)(h.a.Ripple,{className:"mb-1",color:"primary",onClick:function(e){t(null)},children:Object(C.jsxs)("div",{className:"d-flex align-items-center",children:[Object(C.jsx)(Z.a,{size:17,style:{marginRight:"5px"}}),Object(C.jsx)("span",{children:"Back"})]})}),Object(C.jsxs)(o.a,{children:[Object(C.jsx)(l.a,{className:"border-bottom",children:Object(C.jsx)(m.a,{tag:"h4",children:"Service Point Rule Temp Details"})}),Object(C.jsx)(U.a,{style:{paddingTop:"15px"},children:Object(C.jsxs)(J.a,{hover:!0,responsive:!0,children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"Parameter"}),Object(C.jsx)("th",{children:"Old Data"}),Object(C.jsx)("th",{children:"New Data"})]})}),Object(C.jsx)("tbody",{children:ue.map((function(e,t){return Object(C.jsxs)("tr",{style:{backgroundColor:T[pe[t]]!==g[pe[t]]&&"Insert"!==y?"#f9c9c9":null},children:[Object(C.jsx)("td",{style:{fontWeight:"bold"},children:e}),Object(C.jsx)("td",{children:"data"===pe[t]&&"Insert"!==y?Object(C.jsx)(c.Fragment,{children:Object(C.jsxs)(J.a,{responsive:!0,children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"Start Range"}),Object(C.jsx)("th",{children:"End Range"}),Object(C.jsx)("th",{children:"Point Receiver Type"}),Object(C.jsx)("th",{children:"Sender Point Per Amount"}),Object(C.jsx)("th",{children:"Receiver Point Per Amount"})]})}),Object(C.jsx)("tbody",{children:Object(C.jsx)("tr",{children:Object(C.jsxs)(c.Fragment,{children:[Object(C.jsx)("td",{children:T.map_item.map((function(e,t){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.start_range},t+1)}))}),Object(C.jsx)("td",{children:T.map_item.map((function(e,t){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.end_range||"--"},t+1)}))}),Object(C.jsx)("td",{children:T.map_item.map((function(e,t){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.point_receiver_type||"--"},t+1)}))}),Object(C.jsx)("td",{children:T.map_item.map((function(e,t){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.sender_reward_point||"--"},t+1)}))}),Object(C.jsx)("td",{children:T.map_item.map((function(e,t){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.receiver_reward_point||"--"},t+1)}))})]})})})]})}):T[pe[t]]}),Object(C.jsx)("td",{children:"data"===pe[t]?Object(C.jsx)(c.Fragment,{children:Object(C.jsxs)(J.a,{responsive:!0,children:[Object(C.jsx)("thead",{children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{children:"Start Range"}),Object(C.jsx)("th",{children:"End Range"}),Object(C.jsx)("th",{children:"Point Receiver Type"}),Object(C.jsx)("th",{children:"Sender Point Per Amount"}),Object(C.jsx)("th",{children:"Receiver Point Per Amount"})]})}),Object(C.jsx)("tbody",{children:Object(C.jsx)("tr",{children:Object(C.jsxs)(c.Fragment,{children:[Object(C.jsx)("td",{children:g.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.start_range})}))}),Object(C.jsx)("td",{children:g.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.end_range||"--"})}))}),Object(C.jsx)("td",{children:g.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.point_receiver_type||"--"})}))}),Object(C.jsx)("td",{children:g.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.sender_reward_point||"--"})}))}),Object(C.jsx)("td",{children:g.map_item.map((function(e){return Object(C.jsx)("div",{style:{padding:"5px 0",borderBottom:"1px solid #E0E0E0",width:"100px"},children:e.receiver_reward_point||"--"})}))})]})})})]})}):g[pe[t]]})]},t+1)}))})]})})]})]})})};t.default=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),r=t[0],f=t[1],v=Object(c.useState)([]),_=Object(i.a)(v,2),y=_[0],k=_[1],w=Object(c.useState)([]),S=Object(i.a)(w,2),T=S[0],R=S[1],N=Object(c.useState)(!0),P=Object(i.a)(N,2),D=P[0],W=P[1],L=Object(c.useState)(null),F=Object(i.a)(L,2),I=F[0],z=F[1],M=Object(c.useState)(null),H=Object(i.a)(M,2),q=H[0],V=H[1],U=Object(c.useState)(null),J=Object(i.a)(U,2),K=J[0],Y=J[1],Q=Object(c.useState)(1),X=Object(i.a)(Q,2),Z=X[0],$=X[1],ee=Object(c.useState)("1"),te=Object(i.a)(ee,2),re=te[0],ne=te[1],ae=function(e){return ne(e)};return Object(c.useEffect)(Object(a.a)(Object(n.a)().mark((function e(){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.pmsPointRuleList({rule_type:3}).then((function(e){console.log(e);var t=e.data.payload,r=t.list,n=t.mypending,a=t.approvepending;f(r),k(n),R(a),W(!1)})).catch((function(e){Object(E.a)(e),console.log(e),W(!1)}));case 2:case"end":return e.stop()}}),e)}))),[Z]),Object(C.jsx)(c.Fragment,{children:I?Object(C.jsx)(de,{refresh:Z,setrefresh:$,ruleeditdata:I,setruleeditdata:z}):q?Object(C.jsx)(je,{setruleidforview:V,ruleidforview:q,ref_id:K}):Object(C.jsxs)(c.Fragment,{children:[Object(C.jsx)(o.a,{children:Object(C.jsx)(l.a,{children:Object(C.jsxs)(d.a,{tabs:!0,children:[Object(C.jsx)(u.a,{children:Object(C.jsx)(p.a,{active:"1"===re,onClick:function(){return ae("1")},children:Object(C.jsx)("span",{className:"align-middle d-none d-sm-block",children:"Rule List"})})}),g.j.includes(34)&&Object(C.jsx)(u.a,{children:Object(C.jsx)(p.a,{active:"2"===re,onClick:function(){return ae("2")},children:Object(C.jsx)("span",{className:"align-middle d-none d-sm-block",children:"My Pending"})})}),g.j.includes(34)&&Object(C.jsx)(u.a,{children:Object(C.jsx)(p.a,{active:"3"===re,onClick:function(){return ae("3")},children:Object(C.jsx)("span",{className:"align-middle d-none d-sm-block",children:"Approve"})})})]})})}),Object(C.jsx)(o.a,{children:Object(C.jsxs)(j.a,{activeTab:re,children:[Object(C.jsx)(b.a,{tabId:"1",children:Object(C.jsxs)(o.a,{children:[Object(C.jsxs)(l.a,{className:"border-bottom",children:[Object(C.jsx)(m.a,{tag:"h4",children:"Service Point Rules"}),Object(C.jsx)("div",{children:g.j.includes(16)&&Object(C.jsx)(h.a.Ripple,{className:"ml-2",color:"primary",tag:O.b,to:"/createServicePointRule",children:Object(C.jsxs)("div",{className:"d-flex align-items-center",children:[Object(C.jsx)(s.a,{size:17,style:{marginRight:"5px"}}),Object(C.jsx)("span",{children:"Create Service Point Rule"})]})})})]}),Object(C.jsx)(A,{pointRuleList:r,rule_type:1,TableDataLoading:D,refresh:Z,setrefresh:$,setruleeditdata:z})]})}),Object(C.jsx)(b.a,{tabId:"2",children:Object(C.jsx)(B,{pointRuleList:y,rule_type:1,TableDataLoading:D,setruleidforview:V,setref_id:Y})}),Object(C.jsx)(b.a,{tabId:"3",children:Object(C.jsx)(G,{pointRuleList:T,rule_type:1,TableDataLoading:D,refresh:Z,setrefresh:$,setruleidforview:V,setref_id:Y})})]})})]})})}},472:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return c}));r(0);var n=r(127),a=function(e){try{var t=e.response;404===t.status||401===t.status||400===t.status||500===t.status||409===t.status?n.f.error(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):n.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){n.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},i=function(e){try{var t=e.response;404!==t.status&&401!==t.status&&400!==t.status||n.f.error(t.data.errors?t.data.errors[Object.keys(t.data.errors)[0]]:t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){n.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},c=function(e){var t=e.data.message||"success";n.f.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},479:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"d",(function(){return s})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return l}));var n=r(476),a=r(477),i={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},c=function(e){return new Date(e).toLocaleDateString(void 0,i)},s=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},o=function(){var e=Object(a.a)(Object(n.a)().mark((function e(t){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t){e.next=4;break}return window.location.href="/Adminlogin",e.next=4,localStorage.clear();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e,t,r){var n=document.createElement("a"),a=function(e){var r;return r="",r+=t.join(","),r+="\n",e.forEach((function(e){var n=0;t.forEach((function(t){n>0&&(r+=","),r+=e[t],n++})),r+="\n"})),r}(e);if(null!==a){var i=JSON.parse(localStorage.getItem("userData")),c="".concat(r,"_").concat((new Date).toISOString(),"_").concat(i.fullname.replaceAll(/\s/g,""),".csv");a.match(/^data:text\/csv/i)||(a="data:text/csv;charset=utf-8,".concat(a)),n.setAttribute("href",encodeURI(a)),n.setAttribute("download",c),n.click()}}},500:function(e,t,r){"use strict";var n=r(16),a=r(0),i=r(1552),c=r(502),s=r(499),o=r.n(s),l=r(501),d=r.n(l),u=r(6);t.a=function(e){var t=e.column,r=e.TableData,s=e.TableDataLoading,l=Object(a.useState)(0),p=Object(n.a)(l,2),j=p[0],b=p[1];return Object(u.jsx)(a.Fragment,{children:Object(u.jsx)(d.a,{noHeader:!0,pagination:!0,columns:t,paginationPerPage:10,className:"react-dataTable",sortIcon:Object(u.jsx)(i.a,{size:10}),paginationDefaultPage:j+1,paginationComponent:function(){return Object(u.jsx)(o.a,{previousLabel:"",nextLabel:"",forcePage:j,onPageChange:function(e){return function(e){b(e.selected)}(e)},pageCount:r.length?r.length/10:1,breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"})},data:r,progressPending:s,progressComponent:Object(u.jsx)(c.a,{color:"primary"}),responsive:!0,pointerOnHover:!0,highlightOnHover:!0,striped:!0})})}},638:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return o}));var n={1:{title:"Active",color:"light-success "},0:{title:"Pending",color:"light-primary"},5:{title:"Stopped",color:"light-danger"},11:{title:"Unpaid",color:"light-primary"}},a={1:{title:"Active",color:"light-success "},0:{title:"In-Active",color:"light-primary"}},i={Insert:{title:"Insert",color:"light-success "},Update:{title:"Update",color:"light-primary"},Delete:{title:"Delete",color:"light-danger"},INSERT:{title:"INSERT",color:"light-success "},UPDATE:{title:"UPDATE",color:"light-primary"},DELETE:{title:"DELETE",color:"light-danger"}},c=function(e){return n[e]||{title:"N/A",color:"light-danger"}},s=function(e){return a[e]||{title:"N/A",color:"light-danger"}},o=function(e){return i[e]||{title:"N/A",color:"light-danger"}}}}]);
//# sourceMappingURL=320.be7ae509.chunk.js.map