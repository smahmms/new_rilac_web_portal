(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[367],{1384:function(e,t,a){"use strict";var c=a(21),r=a(1),s=a(16),n=a(478),o=a(487),l=a(0),i=a(1527),d=a(1636),j=a(495),b=a(483),u=a(496),m=a(484),O=a(485),p=a(634),h=a(489),x=a(1513),y=a(1488),g=a(1511),f=a(1512),v=a(1236),C=a(470),N=a(502),S=a(1485),k=a(490),w=a.n(k),_=a(481),B=a.n(_),q=a(472),P=a(6);B()(w.a);t.a=function(e){e.setConditionalRendering;var t=e.showCompanyName,a=(e.setshowCompanyName,e.continueBtn,e.setcontinueBtn,Object(l.useState)(Object(r.a)(Object(r.a)({},JSON.parse(localStorage.getItem("registration_data"))),{},{isnewaccount:!0,isibn:!1,accountnumber:"",sortcode:"",accountholdername:"",isneedmorethenonepersontoauth:!1,addpaymentid:0,payment_method_id:1,sub_type:"monthly"}))),k=Object(s.a)(a,2),w=k[0],_=k[1],B=Object(l.useState)({email:!1,address:!1,accountNumber:!1,sortcode:!1}),E=Object(s.a)(B,2),I=E[0],A=E[1],M=Object(l.useState)(!1),R=Object(s.a)(M,2),Y=(R[0],R[1],Object(l.useState)(!1)),H=Object(s.a)(Y,2),z=H[0],D=H[1],T=Object(l.useState)(!0),J=Object(s.a)(T,2),F=J[0],L=J[1],K=Object(l.useState)(!1),G=Object(s.a)(K,2),U=G[0],V=(G[1],Object(l.useState)(!1)),W=Object(s.a)(V,2),Q=W[0],X=W[1],Z=Object(l.useState)([]),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ae=Object(l.useState)([]),ce=Object(s.a)(ae,2),re=ce[0],se=ce[1],ne=Object(l.useState)(!1),oe=Object(s.a)(ne,2),le=oe[0],ie=oe[1],de=Object(l.useState)([]),je=Object(s.a)(de,2),be=je[0],ue=(je[1],function(e){if("email"===e.target.name){var t=/\S+@\S+\.\S+/.test(e.target.value),a=Object(r.a)({},I);a.email=!t,A(Object(r.a)({},a))}if("sortcode"===e.target.name){var s=Object(r.a)({},I);6!==e.target.value.length?s.sortcode=!0:s.sortcode=!1,A(Object(r.a)({},s))}if("accountnumber"===e.target.name){var n=Object(r.a)({},I);8!==e.target.value.length?n.accountNumber=!0:n.accountNumber=!1,A(Object(r.a)({},n))}_(Object(r.a)(Object(r.a)({},w),{},Object(c.a)({},e.target.name,e.target.value)))});return Object(P.jsx)("div",{className:"m-0",children:Object(P.jsx)(b.a,{children:Object(P.jsx)(u.a,{className:"p-2",style:{width:"100%"},onSubmit:function(e){e.preventDefault();var t=w.accountnumber,a=w.address,c=w.city,s=w.email,o=w.firstname,l=w.lastname,i=w.postcode,d=w.sortcode,j=w.accountholdername,b=Object(r.a)({},I);b.address=!a,A(Object(r.a)({},b)),!a||I.email||I.sortcode||I.accountNumber||(ie(!0),console.log({accountnumber:t,address:a,city:c,email:s,firstname:o,lastname:l,postcode:i,sortcode:d,accountholdername:j}),console.log(w),n.a.customerBusinessRegistration(Object(r.a)({},w)).then((function(e){console.log(e),window.location.href=e.data.payload.payment_url})).catch((function(e){ie(!1),Object(q.a)(e.response),console.log(e.response)})))},autoComplete:"off",children:Object(P.jsxs)(m.a,{children:[!!be.length&&Object(P.jsx)(O.a,{md:"12",children:Object(P.jsx)(p.a,{color:"danger",className:"p-1",children:Object(P.jsx)("ul",{children:be.map((function(e,t){return Object(P.jsx)("li",{children:"".concat(e.message)},t)}))})})}),Object(P.jsxs)(O.a,{md:"4",className:"mb-1",children:[Object(P.jsx)(h.a,{children:t?"Company name":"First Name"}),t?Object(P.jsx)(x.a,{required:!0,placeholder:"Your Company Name",type:"text",name:"companyname",value:w.companyname,onChange:ue}):Object(P.jsx)(x.a,{required:!0,placeholder:"Firstname",type:"text",name:"firstname",value:w.firstname,onChange:ue})]}),!t&&Object(P.jsxs)(O.a,{md:"4",className:"mb-1",children:[Object(P.jsx)(h.a,{children:"Last Name"}),Object(P.jsx)(x.a,{required:!0,placeholder:"Lastname",type:"text",name:"lastname",value:w.lastname,onChange:ue})]}),Object(P.jsxs)(O.a,{md:"4",className:"mb-1",children:[Object(P.jsx)(h.a,{children:"Email"}),Object(P.jsx)(x.a,{required:!0,placeholder:"Your Email",type:"email",name:"email",value:w.email,onChange:ue}),I.email&&Object(P.jsx)("small",{style:{color:"red"},children:"Please enter a valid email"})]}),Object(P.jsxs)(O.a,{md:"4",className:"mb-1",children:[Object(P.jsx)(h.a,{children:"Account Holder Name"}),Object(P.jsx)(x.a,{required:!0,placeholder:"Account Holder Name",type:"text",name:"accountholdername",value:w.accountholdername,onChange:ue,disabled:!w.isnewaccount})]}),Object(P.jsxs)(O.a,{md:"4",className:"mb-1",children:[Object(P.jsxs)(h.a,{children:[w.isibn&&"IBAN"," Sort Code"]}),Object(P.jsx)(x.a,{required:!0,placeholder:"Sort Code",type:"number",name:"sortcode",value:w.sortcode,onChange:ue,disabled:!w.isnewaccount}),I.sortcode&&Object(P.jsx)("small",{style:{color:"red"},children:"must be 6 character"})]}),Object(P.jsxs)(O.a,{md:"4",className:"mb-1",children:[Object(P.jsxs)(h.a,{children:[w.isibn?"IBAN":"Account Number"," "]}),Object(P.jsx)(x.a,{required:!0,placeholder:"Account Number",type:"number",name:"accountnumber",value:w.accountnumber,onChange:ue,disabled:!w.isnewaccount}),I.accountNumber&&Object(P.jsx)("small",{style:{color:"red"},children:"must be 8 character"})]}),Object(P.jsxs)(O.a,{md:"12",children:[Object(P.jsx)("hr",{}),Object(P.jsx)(b.a,{children:Object(P.jsxs)(m.a,{children:[Object(P.jsx)(O.a,{md:"4",children:Object(P.jsxs)(y.a,{children:[Object(P.jsxs)(h.a,{for:"postcode",children:["Post Code",Object(P.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(P.jsxs)(g.a,{className:"input-group-merge mb-1",children:[Object(P.jsx)(f.a,{addonType:"prepend",children:Object(P.jsx)(v.a,{children:Object(P.jsx)(i.a,{size:14})})}),Object(P.jsx)(x.a,{type:"text",name:"postcode",id:"postcode",placeholder:"Post Code",value:w.postcode,onChange:ue,required:!0}),Object(P.jsx)(f.a,{addonType:"append",children:Q?Object(P.jsx)(C.a,{style:{paddingBottom:"9px"},color:"primary",outline:!0,disabled:!0,children:Object(P.jsx)(N.a,{color:"primary",size:"sm"})}):Object(P.jsx)(C.a,{color:"primary",outline:!0,onClick:function(){w.postcode&&(X(!0),te([]),_(Object(r.a)(Object(r.a)({},w),{},{address:"",country:"",city:""})),n.a.ukAddressEndpoint({postCode:w.postcode}).then((function(e){var t=e.data.payload.addresses;console.log(t),t.length?D(!1):D(!0),L(!0);var a=t.map((function(e,t){return{value:t,label:e.formatted_address.filter((function(e){return e})).splice(0,1).toString()}}));X(!1),te(a),se(t)})).catch((function(e){X(!1),Object(q.a)(e),D(!0)})))},children:"Search"})}),Object(P.jsx)("div",{className:"p-0 m-0 w-100",children:z&&!U&&Object(P.jsx)("small",{style:{color:"red"},children:" postcode notfound"})}),Object(P.jsx)("div",{className:"p-0 m-0 w-100",children:U&&Object(P.jsx)("small",{style:{color:"red"},children:" postcode must be 6 to 8 character"})})]}),z&&Object(P.jsx)(S.a,{type:"checkbox",id:"postcode1",value:"CPC",onChange:function(e){_(Object(r.a)(Object(r.a)({},w),{},{country:"",address:"",city:""})),e.target.checked?L(!1):L(!0)},inline:!0,label:"Click here to enter your address manually"})]})}),Object(P.jsx)(O.a,{md:"3",sm:"12",children:Object(P.jsxs)(y.a,{children:[Object(P.jsxs)(h.a,{for:"address",children:["Address ",Object(P.jsx)("span",{style:{color:"red"},children:"*"})]}),ee.length?Object(P.jsx)(j.a,{styles:{control:function(e,t){return Object(r.a)(Object(r.a)({},e),{},{borderColor:"#7367f0"})}},maxMenuHeight:150,theme:o.i,className:"react-select",classNamePrefix:"select",name:"address",required:!0,onChange:function(e){var t=+e.value;_(Object(r.a)(Object(r.a)({},w),{},{address:e.label,country:re[t].country,city:re[t].town_or_city}))},options:ee,isClearable:!1}):Object(P.jsx)(x.a,{type:"text",required:!0,onChange:ue,value:w.address,disabled:F,name:"address",placeholder:"Address"}),I.address&&!w.address&&Object(P.jsx)("small",{style:{color:"red"},children:"Address is required"})]})}),Object(P.jsx)(O.a,{md:"3",sm:"12",children:Object(P.jsxs)(y.a,{children:[Object(P.jsxs)(h.a,{for:"country",children:["Country ",Object(P.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(P.jsx)(x.a,{onChange:ue,type:"text",required:!0,name:"country",value:w.country,disabled:F,id:"country",placeholder:"Country"})]})}),Object(P.jsx)(O.a,{md:"2",sm:"12",children:Object(P.jsxs)(y.a,{children:[Object(P.jsxs)(h.a,{for:"city",children:["City ",Object(P.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(P.jsx)(x.a,{onChange:ue,type:"text",required:!0,name:"city",value:w.city,disabled:F,id:"city",placeholder:"City"})]})})]})})]}),Object(P.jsx)(O.a,{md:"12",children:Object(P.jsx)("small",{children:"You may cancel this Direct Debit at any time by contacting Rilac or your bank"})}),Object(P.jsx)(O.a,{md:"12",className:"text-center",children:le?Object(P.jsxs)(C.a.Ripple,{className:"ml-2",color:"primary",disabled:!0,style:{marginTop:"22px"},children:[Object(P.jsx)(N.a,{size:"sm"}),Object(P.jsx)("span",{className:"align-middle ml-50",children:"Loading..."})]}):Object(P.jsxs)(C.a.Ripple,{className:"ml-2",color:"primary",style:{marginTop:"22px"},type:"submit",children:[Object(P.jsx)(d.a,{size:15}),Object(P.jsx)("span",{className:"align-middle ml-50",children:"Submit"})]})})]})})})})}},2637:function(e,t,a){"use strict";a.r(t);var c=a(476),r=a(477),s=a(1),n=a(16),o=a(621),l=a(478),i=a(130),d=(a(627),a(487),a(58),a(0)),j=a(564),b=a(129),u=a(660),m=a(483),O=a(486),p=a(548),h=a(1525),x=a(1526),y=a(470),g=a(550),f=a(551),v=a(502),C=(a(132),a(996)),N=a(997),S=(a(506),a(1567),a(1636)),k=a(496),w=a(484),_=a(485),B=a(1488),q=a(489),P=(a(780),a(534),a(472)),E=a(6),I=function(){Object(d.useContext)(i.a);var e=Object(o.a)(),t=Object(n.a)(e,2),m=t[0],O=(t[1],Object(u.g)()),p=(Object(b.b)(),Object(j.c)()),h=(p.register,p.errors,p.handleSubmit,p.trigger,Object(d.useState)({})),x=Object(n.a)(h,2),g=(x[0],x[1],Object(d.useState)({})),f=Object(n.a)(g,2),N=(f[0],f[1],Object(d.useState)("")),I=Object(n.a)(N,2),A=(I[0],I[1],Object(d.useState)(!1)),M=Object(n.a)(A,2),R=M[0],Y=M[1],H=Object(d.useState)(0),z=Object(n.a)(H,2),D=(z[0],z[1],Object(d.useState)(!1)),T=Object(n.a)(D,2),J=(T[0],T[1],Object(C.useStripe)()),F=Object(C.useElements)(),L=(Object(d.useRef)(null),{style:{base:{lineHeight:"27px",color:"#212529",fontSize:"1.1rem","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}}),K=Object(d.useState)(Object(s.a)(Object(s.a)({},JSON.parse(localStorage.getItem("planDetails"))),{},{card_name:"",card_number:"",card_address:"",card_expiry:"",card_cvc:"",paymentMethodId:"",payment_method_id:2,sub_type:"monthly"})),G=Object(n.a)(K,2),U=G[0],V=(G[1],"dark"===m?"register-v2-dark.svg":"register-v2.svg"),W=(a(679)("./".concat(V)).default,function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Y(!0),J&&F){e.next=5;break}return Y(!1),e.abrupt("return");case 5:return a={type:"card",card:F.getElement(C.CardNumberElement)},console.log(a),e.next=9,J.createPaymentMethod(a).then(function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.paymentMethod.id),console.log(Object(s.a)(Object(s.a)({},U),{},{paymentMethodId:t.paymentMethod.id})),a=function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var s,n,o;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data.payload.error){e.next=5;break}Y(!1),alert(t.data.payload.error),e.next=18;break;case 5:if(!t.data.payload.requiresAction){e.next=14;break}return e.next=8,J.handleCardAction(t.data.payload.clientSecret);case 8:s=e.sent,n=s.error,o=s.paymentIntent,n?(Y(!1),alert(n)):l.a.payByStripe({paymentIntentId:null===o||void 0===o?void 0:o.id}).then(function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var r;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.data.payload,a(r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Object(P.a)(e)})),e.next=18;break;case 14:Y(!1),console.log(t),Object(P.c)(t),O.push("/vendordashboard");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,l.a.quotaRequestPayByStripe(Object(s.a)(Object(s.a)({},U),{},{paymentMethodId:t.paymentMethod.id})).then(function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),t.data.payload,Y(!1),a(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){Y(!1),Object(P.a)(e.response),Object(P.a)(e),console.log(e.response)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(E.jsx)("div",{className:"",children:Object(E.jsx)(k.a,{action:"/",className:"auth-register-form",onSubmit:W,children:Object(E.jsxs)(w.a,{children:[Object(E.jsx)(_.a,{sm:"12",children:Object(E.jsxs)(B.a,{children:[Object(E.jsx)(q.a,{className:"form-label",for:"businessname",children:"Card Number"}),Object(E.jsx)(C.CardNumberElement,{type:"text",value:U.card_number,placeholder:"1234****",id:"cc-number",name:"businessname",options:L,onBlur:function(){console.log("CardNumberElement [blur]",event.target.value)}})]})}),Object(E.jsx)(_.a,{sm:"6",children:Object(E.jsxs)(B.a,{children:[Object(E.jsx)(q.a,{className:"form-label",for:"card-expiry",children:"Card Expiry"}),Object(E.jsx)(C.CardExpiryElement,{type:"text",value:U.card_expiry,placeholder:"MM/YYYY",id:"expiry",name:"expiry",options:L})]})}),Object(E.jsx)(_.a,{sm:"6",children:Object(E.jsxs)(B.a,{children:[Object(E.jsx)(q.a,{className:"form-label",for:"businessname",children:"CVC"}),Object(E.jsx)(C.CardCvcElement,{type:"text",value:U.card_cvc,placeholder:"MM/YYYY",id:"cvc",name:"cvc",options:L})]})}),Object(E.jsx)(_.a,{md:"12",className:"text-center",children:R?Object(E.jsxs)(y.a.Ripple,{className:"ml-2",color:"primary",disabled:!0,style:{marginTop:"22px"},children:[Object(E.jsx)(v.a,{size:"sm"}),Object(E.jsx)("span",{className:"align-middle ml-50",children:"Loading..."})]}):Object(E.jsxs)(y.a.Ripple,{className:"ml-2",color:"primary",style:{marginTop:"22px"},type:"submit",children:[Object(E.jsx)(S.a,{size:15}),Object(E.jsx)("span",{className:"align-middle ml-50",children:"Submit"})]})})]})})})};a(1384),t.default=function(){Object(d.useContext)(i.a);var e=Object(o.a)(),t=Object(n.a)(e,2),S=t[0],k=(t[1],Object(u.g)()),w=(Object(b.b)(),Object(j.c)()),_=(w.register,w.errors,w.handleSubmit,w.trigger,Object(d.useState)({})),B=Object(n.a)(_,2),q=(B[0],B[1],Object(d.useState)({})),P=Object(n.a)(q,2),A=(P[0],P[1],Object(d.useState)("")),M=Object(n.a)(A,2),R=M[0],Y=M[1],H=Object(d.useState)(!1),z=Object(n.a)(H,2),D=z[0],T=z[1],J=Object(d.useState)(0),F=Object(n.a)(J,2),L=(F[0],F[1]),K=Object(d.useRef)(null),G=Object(d.useState)(Object(s.a)({},JSON.parse(localStorage.getItem("planDetails")))),U=Object(n.a)(G,2),V=U[0],W=(U[1],Object(d.useState)(Object(s.a)(Object(s.a)({},JSON.parse(localStorage.getItem("registration_data"))),{},{country:"UK",payment_method_id:2}))),Q=Object(n.a)(W,2);Q[0],Q[1];Object(d.useEffect)(Object(r.a)(Object(c.a)().mark((function e(){return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("start use effect"),l.a.stripeData().then(function(){var e=Object(r.a)(Object(c.a)().mark((function e(t){var a;return Object(c.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.data.payload,Y(Object(N.a)(a.publishableKey)),T(!0),console.log(a),console.log("inside then use effect");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("inside catch use effect"),console.log(e),Error(e)})),L(parseFloat(50)),console.log(V);case 4:case"end":return e.stop()}}),e)}))),[]);var X="dark"===S?"register-v2-dark.svg":"register-v2.svg";a(679)("./".concat(X)).default;return Object(E.jsx)("div",{children:Object(E.jsx)(m.a,{style:{maxWidth:"768px"},className:"mx-auto my-4",children:Object(E.jsxs)(O.a,{className:"pt-2",children:[Object(E.jsx)(p.a,{pills:!0,className:"border-bottom pb-1",children:Object(E.jsx)(h.a,{children:Object(E.jsx)(x.a,{children:Object(E.jsx)(y.a.Ripple,{color:"primary",style:{cursor:"pointer"},onClick:function(e){k.goBack()},children:"Go Back"})})})}),Object(E.jsx)(p.a,{pills:!0,className:"border-bottom pb-1",children:Object(E.jsx)(h.a,{children:Object(E.jsx)("h4",{children:"Payment Info"})})}),Object(E.jsx)(g.a,{children:Object(E.jsx)(f.a,{children:D?Object(E.jsx)(C.Elements,{stripe:R,children:Object(E.jsx)(I,{amount:V.price_onetime,childFunc:K})}):Object(E.jsx)("div",{className:"d-flex justify-content-center",children:Object(E.jsx)(v.a,{className:"mt-5"})})})})]})})})}},472:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return n}));a(0);var c=a(127),r=function(e){try{var t=e.response;404===t.status||401===t.status||400===t.status||500===t.status||409===t.status?c.f.error(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):c.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){c.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},s=function(e){try{var t=e.response;404!==t.status&&401!==t.status&&400!==t.status||c.f.error(t.data.errors?t.data.errors[Object.keys(t.data.errors)[0]]:t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){c.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},n=function(e){var t=e.data.message||"success";c.f.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}}}]);
//# sourceMappingURL=367.75af1b4a.chunk.js.map