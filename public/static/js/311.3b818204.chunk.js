(this["webpackJsonprilac-web"]=this["webpackJsonprilac-web"]||[]).push([[311],{1132:function(e,t,a){},2405:function(e,t,a){"use strict";a.r(t);var c=a(121),r=a(1),s=a(476),l=a(477),n=a(21),i=a(16),o=a(0),d=a(818),j=a(495),b=a(499),u=a.n(b),p=a(501),O=a.n(p),m=a(1583),h=a(1581),x=a(1653),y=a(1515),f=a(1552),g=a(487),v=a(1520),C=a(483),N=a(486),k=a(482),S=a(480),w=a(496),P=a(485),z=a(1488),D=a(489),L=a(1513),T=a(470),B=a(502),q=a(484),W=a(533),I=a(536),M=a(531),H=a(819),R=a(472),A=a(478),E=a(490),F=a.n(E),J=a(481),U=a.n(J),Q=a(2109),Y=a.n(Q),K=(a(1132),a(6)),G=U()(F.a),V={1:{title:"Active",color:"light-success "},6:{title:"Ready",color:"light-primary"},7:{title:"Processed",color:"light-danger"},8:{title:"Checked",color:"light-secondary"},9:{title:"Paid",color:"light-info"},2:{title:"Booked",color:"light-info"},10:{title:"Scanning",color:"light-info"},3:{title:"Collected",color:"light-info"}};t.default=function(){var e=Object(o.useState)(!0),t=Object(i.a)(e,2),a=t[0],b=t[1],p=Object(o.useState)(!1),E=Object(i.a)(p,2),J=E[0],U=E[1],Q=Object(o.useState)(!1),X=Object(i.a)(Q,2),Z=X[0],$=X[1],_=Object(o.useState)(!0),ee=Object(i.a)(_,2),te=ee[0],ae=ee[1],ce=Object(o.useState)(!1),re=Object(i.a)(ce,2),se=re[0],le=re[1],ne=Object(o.useState)([]),ie=Object(i.a)(ne,2),oe=ie[0],de=ie[1],je=Object(o.useState)(0),be=Object(i.a)(je,2),ue=be[0],pe=be[1],Oe=Object(o.useState)(""),me=Object(i.a)(Oe,2),he=me[0],xe=me[1],ye=Object(o.useState)([]),fe=Object(i.a)(ye,2),ge=fe[0],ve=(fe[1],Object(o.useState)([])),Ce=Object(i.a)(ve,2),Ne=Ce[0],ke=Ce[1],Se=Object(o.useState)({total:0,ready:0,inused:0}),we=Object(i.a)(Se,2),Pe=we[0],ze=we[1],De=Object(o.useState)({trollyid:null,primarydepot:null,status:0}),Le=Object(i.a)(De,2),Te=Le[0],Be=Le[1],qe=Object(o.useState)({trollyid:"",primarydepot:"",status:""}),We=Object(i.a)(qe,2),Ie=We[0],Me=We[1],He=Object(o.useState)({trollyid:"",primarydepot:"",macid:""}),Re=Object(i.a)(He,2),Ae=Re[0],Ee=Re[1],Fe=Object(o.useState)({}),Je=Object(i.a)(Fe,2),Ue=Je[0],Qe=Je[1],Ye=Object(o.useState)({}),Ke=Object(i.a)(Ye,2),Ge=(Ke[0],Ke[1],Object(o.useState)(!1)),Ve=Object(i.a)(Ge,2),Xe=Ve[0],Ze=Ve[1],$e=Object(o.useState)(!1),_e=Object(i.a)($e,2),et=_e[0],tt=_e[1],at=Object(o.useState)({qurcode:"",trolleyid:""}),ct=Object(i.a)(at,2),rt=ct[0],st=ct[1],lt=Object(o.useState)([]),nt=Object(i.a)(lt,2),it=nt[0],ot=nt[1],dt=function(e){return G.fire(Object(n.a)({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",allowOutsideClick:!1,allowEscapeKey:!1,showCancelButton:!0,showLoaderOnConfirm:!0,confirmButtonText:"Yes, delete it!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ml-1"},buttonsStyling:!1,preConfirm:function(){return A.a.trollyDelete({trolleyid:e}).then((function(e){return e})).catch((function(e){return console.log(e.response),Object(R.a)(e),!1}))}},"allowOutsideClick",(function(){return!F.a.isLoading()}))).then((function(t){t.isConfirmed&&(!function(e){var t=oe.filter((function(t){return t.trolleyid!==e}));de(t)}(e),G.fire({icon:"success",title:"Deleted!",text:"The trolley has been deleted.",customClass:{confirmButton:"btn btn-success"}}))}))},jt=[{name:"Trolley Barcode",selector:"trolleyid",minWidth:"100px"},{name:"Mac ID",selector:"macid",minWidth:"100px"},{name:"Depot Name",minWidth:"150px",cell:function(e){return e.storeinfo?e.storeinfo.storename:""}},{name:"Status",selector:"status",sortable:!0,minWidth:"150px",cell:function(e){return Object(K.jsx)(v.a,{color:V[e.status].color,pill:!0,children:V[e.status].title})}},{name:"Actions",allowOverflow:!0,cell:function(e){return Object(K.jsxs)("div",{className:"d-flex",children:[Object(K.jsx)(m.a,{size:15,color:"#2bc871",style:{cursor:"pointer"},onClick:function(t){return a=e.trolleyid,c=e.qurcode,st({qurcode:c,trolleyid:a}),void tt(!et);var a,c}}),"\xa0\xa0",Object(K.jsx)(h.a,{size:15,color:"#2bc871",style:{cursor:"pointer"},onClick:function(t){return function(e){var t={},a={};Ee({trollyid:"",primarydepot:"",macid:""}),$(!1),oe.every((function(c){return c.trolleyid!==e||(t={trolleyid:e,macid:c.macid,id:c.id,storeid:c.storeid},Ne.every((function(e){return e.value!==c.storeid||(a={value:e.value,label:e.label},!1)})),!1)})),t.depotdefaultval=a,Qe(t),Ze(!Xe)}(e.trolleyid)}})," \xa0\xa0",Object(K.jsx)(x.a,{size:15,color:"red",style:{cursor:"pointer"},onClick:function(t){return dt(e.trolleyid)}})]})}}];Object(o.useEffect)(Object(l.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A.a.storeList().then((function(e){var t=e.data.payload.map((function(e){return{value:e.storeid,label:e.storename}}));ke(t),ae(!1)})).catch((function(e){ae(!1),console.log(e.response),Object(R.a)(e)})),A.a.trollyList().then((function(e){var t=e.data.payload;de(t),b(!1);var a=0,c=0,r=0;t.forEach((function(e){a++,6===e.status?c++:r++})),ze({total:a,ready:c,inused:r})})).catch((function(e){b(!1),console.log(e.response),Object(R.a)(e)}));case 2:case"end":return e.stop()}}),e)}))),[]);var bt=function(e){Be(Object(r.a)(Object(r.a)({},Te),{},Object(n.a)({},e.target.name,e.target.value)))},ut=function(e){Qe(Object(r.a)(Object(r.a)({},Ue),{},Object(n.a)({},e.target.name,e.target.value)))};return Object(K.jsxs)(o.Fragment,{children:[Object(K.jsx)(C.a,{children:Object(K.jsx)(N.a,{style:{paddingTop:"15px"},children:Object(K.jsxs)("div",{className:"d-flex flex-wrap",children:[Object(K.jsxs)("div",{className:"payment-card m-2 pt-1",children:[Object(K.jsx)("p",{style:{fontSize:"30px"},children:Pe.total||0}),Object(K.jsx)("p",{children:"Total"})]}),Object(K.jsxs)("div",{className:"payment-card m-2 pt-1",children:[Object(K.jsx)("p",{style:{fontSize:"30px"},children:Pe.ready||0}),Object(K.jsx)("p",{children:"Ready"})]}),Object(K.jsxs)("div",{className:"payment-card m-2 pt-1",children:[Object(K.jsx)("p",{style:{fontSize:"30px"},children:Pe.inused||0}),Object(K.jsx)("p",{children:"In-Used"})]})]})})}),Object(K.jsxs)(C.a,{children:[Object(K.jsx)(k.a,{className:"border-bottom",children:Object(K.jsx)(S.a,{tag:"h4",children:"Add New Trolley"})}),Object(K.jsx)(N.a,{style:{paddingTop:"15px"},children:Object(K.jsxs)(w.a,{className:"row",style:{width:"100%"},onSubmit:function(e){e.preventDefault(),Me({trollyid:"",primarydepot:"",status:""});var t=Te.trollyid,a=Te.primarydepot,s=Te.macid,l=!1;if(t||(Me({trollyid:"trolley barcode required"}),l=!0),a||(Me(Object(r.a)(Object(r.a)({},Ie),{},{primarydepot:"Please select Depot"})),l=!0),l)return 0;U(!0),A.a.trollyAdd({trolleyid:t,storeid:a,macid:s}).then((function(e){Object(R.c)(e),U(!1),Be(Object(r.a)(Object(r.a)({},Te),{},{trollyid:null,macid:null}));var l="";Ne.map((function(e){e.value===a&&(l=e.label)})),de([{macid:s,status:6,storeid:a,trolleyid:t,storeinfo:{storename:l}}].concat(Object(c.a)(oe)))})).catch((function(e){U(!1),console.log(e.response),Object(R.a)(e)}))},autoComplete:"off",children:[Object(K.jsx)(P.a,{sm:"3",children:Object(K.jsxs)(z.a,{children:[Object(K.jsxs)(D.a,{for:"search-input",children:["Trolley Barcode ",Object(K.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(K.jsx)(L.a,{type:"text",name:"trollyid",id:"trollyid",onChange:bt,required:!0,placeholder:"Trolley Barcode",value:Te.trollyid||""})]})}),Object(K.jsx)(P.a,{sm:"3",children:Object(K.jsxs)(z.a,{children:[Object(K.jsxs)(D.a,{for:"search-input",children:["Mac ID ",Object(K.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(K.jsx)(L.a,{type:"text",name:"macid",id:"macid",onChange:bt,required:!0,placeholder:"Mac ID",value:Te.macid||""})]})}),Object(K.jsx)(P.a,{sm:"3",children:Object(K.jsxs)(z.a,{children:[Object(K.jsxs)(D.a,{for:"exampleSelect3",children:["Primary Depot ",Object(K.jsx)("span",{style:{color:"red"},children:"*"})]}),Object(K.jsx)(j.a,{theme:g.i,className:"react-select",classNamePrefix:"select",name:"primarydepot",onChange:function(e,t){"clear"===t.action?Be(Object(r.a)(Object(r.a)({},Te),{},{primarydepot:null})):(Me(Object(r.a)(Object(r.a)({},Ie),{},{primarydepot:""})),Be(Object(r.a)(Object(r.a)({},Te),{},{primarydepot:e.value})))},options:Ne,isClearable:!0,isLoading:te}),Object(K.jsx)("span",{style:{color:"red",fontSize:"11px"},children:Ie.primarydepot})]})}),Object(K.jsx)(P.a,{sm:"3",children:J?Object(K.jsxs)(T.a.Ripple,{color:"primary",className:"mr-1",disabled:!0,style:{marginTop:"25px"},children:[Object(K.jsx)(B.a,{color:"white",size:"sm"}),Object(K.jsx)("span",{className:"ml-50",children:"Loading..."})]}):Object(K.jsxs)(T.a.Ripple,{className:"ml-2",color:"primary",type:"submit",style:{marginTop:"25px"},children:[Object(K.jsx)(y.a,{size:15}),Object(K.jsx)("span",{className:"align-middle ml-50",children:"Add New"})]})})]})})]}),Object(K.jsxs)(C.a,{children:[Object(K.jsx)(k.a,{className:"border-bottom",style:{display:"inline"},children:Object(K.jsxs)(q.a,{children:[Object(K.jsx)(P.a,{sm:"8",children:Object(K.jsx)(S.a,{tag:"h4",children:"Trolley List"})}),Object(K.jsx)(P.a,{sm:"4",children:Object(K.jsx)(L.a,{type:"text",name:"searchinput",id:"search-input2",onChange:function(e){var t=e.target.value,a=oe.filter((function(e){var a=e.trolleyid.startsWith(t)||e.macid.startsWith(t)||e.storeinfo.storename.toLowerCase().startsWith(t.toLowerCase()),c=e.trolleyid.includes(t)||e.macid.includes(t)||e.storeinfo.storename.toLowerCase().includes(t.toLowerCase());return a||(!a&&c?c:null)}));xe(t),ot(a)},placeholder:"Search by Mac ID or Barcode or Depot"})})]})}),Object(K.jsx)(O.a,{noHeader:!0,pagination:!0,columns:jt,paginationPerPage:10,className:"react-dataTable",sortIcon:Object(K.jsx)(f.a,{size:10}),paginationDefaultPage:ue+1,paginationComponent:function(){var e;return Object(K.jsx)(u.a,(e={previousLabel:"",nextLabel:"",forcePage:ue,onPageChange:function(e){return function(e){pe(e.selected)}(e)},pageCount:he.length?ge.length/10:oe.length/10||1,breakLabel:"...",pageRangeDisplayed:2,marginPagesDisplayed:2,activeClassName:"active",pageClassName:"page-item",breakClassName:"page-item",breakLinkClassName:"page-link",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link"},Object(n.a)(e,"breakClassName","page-item"),Object(n.a)(e,"breakLinkClassName","page-link"),Object(n.a)(e,"containerClassName","pagination react-paginate separated-pagination pagination-sm justify-content-end pr-1 mt-1"),e))},data:he.length?it:oe,progressPending:a,progressComponent:Object(K.jsx)(B.a,{color:"primary"}),responsive:!0})]}),Object(K.jsx)(d.a,{open:se,handleModal:function(){return le(!se)}}),Object(K.jsx)("div",{className:"demo-inline-spacing editrolly",children:Object(K.jsx)("div",{children:Object(K.jsxs)(W.a,{isOpen:Xe,toggle:function(){return Ze(!Xe)},className:"modal-dialog-centered",children:[Object(K.jsx)(I.a,{toggle:function(){return Ze(!Xe)},children:"Update Form"}),Object(K.jsxs)(M.a,{children:[Object(K.jsxs)(z.a,{children:[Object(K.jsxs)(D.a,{for:"barcodes",children:["Trolley Barcode ",Object(K.jsx)("span",{style:{color:"red"},children:"*"}),"  ",Object(K.jsx)("span",{style:{color:"red",fontSize:"11px"},children:Ae.trollyid})]}),Object(K.jsx)(L.a,{type:"text",id:"barcodes",name:"trolleyid",placeholder:"Trolley Barcode",value:Ue.trolleyid||"",onChange:ut,required:!0})]}),Object(K.jsxs)(z.a,{children:[Object(K.jsxs)(D.a,{for:"macids",children:["Mac ID ",Object(K.jsx)("span",{style:{color:"red"},children:"*"}),"  ",Object(K.jsx)("span",{style:{color:"red",fontSize:"11px"},children:Ae.macid})]}),Object(K.jsx)(L.a,{type:"text",id:"macids",placeholder:"Mac ID",name:"macid",value:Ue.macid||"",onChange:ut,required:!0})]}),Object(K.jsxs)(z.a,{children:[Object(K.jsxs)(D.a,{for:"exampleSelect3",children:["Primary Depot ",Object(K.jsx)("span",{style:{color:"red"},children:"*"}),"  ",Object(K.jsx)("span",{style:{color:"red",fontSize:"11px"},children:Ae.primarydepot})]}),Object(K.jsx)(j.a,{theme:g.i,className:"react-select",classNamePrefix:"select",name:"primarydepot2",value:Ue.depotdefaultval,onChange:function(e,t){var a=t.action;Qe("clear"===a?Object(r.a)(Object(r.a)({},Ue),{},{depotdefaultval:null}):Object(r.a)(Object(r.a)({},Ue),{},{depotdefaultval:{value:e.value,label:e.label}}))},options:Ne,isClearable:!0,isLoading:te})]})]}),Object(K.jsx)(H.a,{children:Z?Object(K.jsxs)(o.Fragment,{children:[Object(K.jsxs)(T.a,{color:"primary",disabled:!0,children:[Object(K.jsx)(B.a,{color:"white",size:"sm"}),Object(K.jsx)("span",{className:"ml-50",children:"Loading..."})]})," "]}):Object(K.jsxs)(o.Fragment,{children:[Object(K.jsx)(T.a,{color:"primary",onClick:function(e){return function(e){e.preventDefault(),Ee({trollyid:"",primarydepot:"",macid:""});var t=Ue.id,a=Ue.trolleyid,c=Ue.macid,s=(Ue.storeid,Ue.depotdefaultval),l=!1;if(a||(Ee({trollyid:"trolley barcode required"}),l=!0),c||(Ee(Object(r.a)(Object(r.a)({},Ie),{},{macid:"macid required"})),l=!0),s||(Ee(Object(r.a)(Object(r.a)({},Ie),{},{primarydepot:"primarydepot required"})),l=!0),l)return 0;$(!0),A.a.trollyEdit({id:t,trolleyid:a,storeid:s.value,macid:c}).then((function(e){console.log(e),Ze(!1),Object(R.c)(e),$(!1);var l=oe.map((function(e){if(e.id===t){var l="";return Ne.map((function(e){e.value===s.value&&(l=e.label)})),Object(r.a)(Object(r.a)({},e),{},{macid:c,storeid:s.value,trolleyid:a,storeinfo:{storename:l}})}return e}));de(l)})).catch((function(e){$(!1),console.log(e.response),Object(R.a)(e)}))}(e)},children:"Update"})," "]})})]})})}),Object(K.jsx)("div",{className:"demo-inline-spacing viewtrollyQRCode",children:Object(K.jsx)("div",{children:Object(K.jsxs)(W.a,{isOpen:et,toggle:function(){return tt(!et)},className:"modal-dialog-centered",children:[Object(K.jsx)(I.a,{toggle:function(){return tt(!et)},children:"Qrcode"}),Object(K.jsx)(M.a,{children:Object(K.jsxs)(P.a,{sm:12,md:{size:3,order:2,offset:2},children:[Object(K.jsx)(Y.a,{value:rt.qurcode}),Object(K.jsx)("span",{children:rt.trolleyid})]})})]})})})]})}},472:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return l}));a(0);var c=a(127),r=function(e){try{var t=e.response;404===t.status||401===t.status||400===t.status||500===t.status||409===t.status?c.f.error(t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):c.f.error("The server is under maintenance",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){c.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},s=function(e){try{var t=e.response;404!==t.status&&401!==t.status&&400!==t.status||c.f.error(t.data.errors?t.data.errors[Object.keys(t.data.errors)[0]]:t.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}catch(t){c.f.error("Please check your connection",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},l=function(e){var t=e.data.message||"success";c.f.success(t,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},518:function(e,t,a){},818:function(e,t,a){"use strict";var c=a(16),r=a(0),s=a(563),l=a.n(s),n=a(1487),i=a(1521),o=a(1545),d=a(1610),j=a(1546),b=a(1576),u=a(533),p=a(536),O=a(531),m=a(1488),h=a(489),x=a(1511),y=a(1512),f=a(1236),g=a(1513),v=a(470),C=(a(518),a(6));t.a=function(e){var t=e.open,a=e.handleModal,s=Object(r.useState)(new Date),N=Object(c.a)(s,2),k=N[0],S=N[1],w=Object(C.jsx)(n.a,{className:"cursor-pointer",size:15,onClick:a});return Object(C.jsxs)(u.a,{isOpen:t,toggle:a,className:"sidebar-sm",modalClassName:"modal-slide-in",contentClassName:"pt-0",children:[Object(C.jsx)(p.a,{className:"mb-3",toggle:a,close:w,tag:"div",children:Object(C.jsx)("h5",{className:"modal-title",children:"New Record"})}),Object(C.jsxs)(O.a,{className:"flex-grow-1",children:[Object(C.jsxs)(m.a,{children:[Object(C.jsx)(h.a,{for:"full-name",children:"Full Name"}),Object(C.jsxs)(x.a,{children:[Object(C.jsx)(y.a,{addonType:"prepend",children:Object(C.jsx)(f.a,{children:Object(C.jsx)(i.a,{size:15})})}),Object(C.jsx)(g.a,{id:"full-name",placeholder:"Bruce Wayne"})]})]}),Object(C.jsxs)(m.a,{children:[Object(C.jsx)(h.a,{for:"post",children:"Post"}),Object(C.jsxs)(x.a,{children:[Object(C.jsx)(y.a,{addonType:"prepend",children:Object(C.jsx)(f.a,{children:Object(C.jsx)(o.a,{size:15})})}),Object(C.jsx)(g.a,{id:"post",placeholder:"Web Developer"})]})]}),Object(C.jsxs)(m.a,{children:[Object(C.jsx)(h.a,{for:"email",children:"Email"}),Object(C.jsxs)(x.a,{children:[Object(C.jsx)(y.a,{addonType:"prepend",children:Object(C.jsx)(f.a,{children:Object(C.jsx)(d.a,{size:15})})}),Object(C.jsx)(g.a,{type:"email",id:"email",placeholder:"brucewayne@email.com"})]})]}),Object(C.jsxs)(m.a,{children:[Object(C.jsx)(h.a,{for:"joining-date",children:"Joining Date"}),Object(C.jsxs)(x.a,{children:[Object(C.jsx)(y.a,{addonType:"prepend",children:Object(C.jsx)(f.a,{children:Object(C.jsx)(j.a,{size:15})})}),Object(C.jsx)(l.a,{className:"form-control",id:"joining-date",value:k,onChange:function(e){return S(e)}})]})]}),Object(C.jsxs)(m.a,{className:"mb-4",children:[Object(C.jsx)(h.a,{for:"salary",children:"Salary"}),Object(C.jsxs)(x.a,{children:[Object(C.jsx)(y.a,{addonType:"prepend",children:Object(C.jsx)(f.a,{children:Object(C.jsx)(b.a,{size:15})})}),Object(C.jsx)(g.a,{type:"number",id:"salary"})]})]}),Object(C.jsx)(v.a,{className:"mr-1",color:"primary",onClick:a,children:"Submit"}),Object(C.jsx)(v.a,{color:"secondary",onClick:a,outline:!0,children:"Cancel"})]})]})}}}]);
//# sourceMappingURL=311.3b818204.chunk.js.map